/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource>  https://mths.be/punycode v1.4.1 by @mathias  safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource>  http://mths.be/fromcodepoint v0.1.0 by @mathias */
(function(y){"object"===typeof exports&&"undefined"!==typeof module?module.exports=y():"function"===typeof define&&define.amd?define([],y):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).script=y()})(function(){return function(){function y(J,D,C){function m(d,p){if(!D[d]){if(!J[d]){var t="function"==typeof require&&require;if(!p&&t)return t(d,!0);if(f)return f(d,!0);p=Error("Cannot find module '"+d+"'");throw p.code="MODULE_NOT_FOUND",p;
}p=D[d]={exports:{}};J[d][0].call(p.exports,function(u){return m(J[d][1][u]||u)},p,p.exports,y,J,D,C)}return D[d].exports}for(var f="function"==typeof require&&require,w=0;w<C.length;w++)m(C[w]);return m}return y}()({1:[function(y,J,D){const C=y("ytdl-core"),{createFFmpeg:m,fetchFile:f}=y("@ffmpeg/ffmpeg"),w=m({log:!0});(async()=>{await w.load()})();J.exports={getEncodedAudioBuffer:async d=>{console.log("[info] unlinking old audio data");try{w.FS("unlink","output.mp3")}catch{}console.log("[info] getting audio info");
d=await C.getInfo(d);console.log("[info] getting audio formats");var p=C.chooseFormat(d.formats,{quality:"highestaudio",filter:"audioonly"});console.log("[info] fetching audio data");d=await f(p.url);console.log("[info] writing audio data");p=`audio.${p.container}`;w.FS("writeFile",p,d);console.log("[info] encoding audio as mp3");await w.run("-i",p,"output.mp3");console.log("[info] unlink temporary audio file");w.FS("unlink",p);console.log("[info] sending final audio data");return w.FS("readFile",
"output.mp3").buffer},getVideoBuffer:async d=>{console.log("[info] getting video info");d=await C.getInfo(d);console.log("[info] getting video formats");d=C.chooseFormat(d.formats,{quality:"highest",filter:p=>"mp4"===p.container});console.log("[info] fetching final video data");d=await f(d.url);console.log("[info] sending final video data");return d.buffer},getEncodedVideoBuffer:async d=>{console.log("[info] unlinking old video data");try{w.FS("unlink","output.mp4")}catch{}console.log("[info] getting video info");
var p=await C.getInfo(d);console.log("[info] getting video formats");d=C.chooseFormat(p.formats,{quality:"highestvideo"});console.log("[info] getting audio formats");p=C.chooseFormat(p.formats,{quality:"highestaudio",filter:"audioonly"});console.log("[info] fetching video and audio data");const [t,u]=await Promise.all([f(d.url),f(p.url)]);console.log("[info] writing video and audio data");d=`video.${d.container}`;p=`audio.${p.container}`;w.FS("writeFile",d,t);w.FS("writeFile",p,u);console.log("[info] merging video and audio data");
await w.run("-i",d,"-i",p,"-c:v","copy","-c:a","copy","-shortest","output.mp4");console.log("[info] unlink temporary video and audio files");w.FS("unlink",d);w.FS("unlink",p);console.log("[info] sending final video data");return w.FS("readFile","output.mp4").buffer}}},{"@ffmpeg/ffmpeg":9,"ytdl-core":80}],2:[function(y,J,D){J.exports={name:"@ffmpeg/ffmpeg",version:"0.10.1",description:"FFmpeg WebAssembly version",main:"src/index.js",types:"src/index.d.ts",directories:{example:"examples"},scripts:{start:"node scripts/server.js",
build:"rimraf dist && webpack --config scripts/webpack.config.prod.js",prepublishOnly:"npm run build",lint:"eslint src",wait:"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js",
"test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},browser:{"./src/node/index.js":"./src/browser/index.js"},repository:{type:"git",url:"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},keywords:["ffmpeg","WebAssembly","video"],author:"Jerome Wu <jeromewus@gmail.com>",license:"MIT",bugs:{url:"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},
engines:{node:">=12.16.1"},homepage:"https://github.com/ffmpegwasm/ffmpeg.wasm#readme",dependencies:{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},devDependencies:{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.10.0","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0",chai:"^4.2.0",cors:"^2.8.5",eslint:"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1",express:"^4.17.1",mocha:"^8.2.1","mocha-headless-chrome":"^2.0.3",
"npm-run-all":"^4.1.5","wait-on":"^5.3.0",webpack:"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"}}},{}],3:[function(y,J,D){D=y("_process");const C=y("resolve-url");({devDependencies:y}=y("../../package.json"));J.exports={corePath:"development"===D.env.NODE_ENV?C("/node_modules/@ffmpeg/core/dist/ffmpeg-core.js"):`https://unpkg.com/@ffmpeg/core@${y["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`}},{"../../package.json":2,_process:27,"resolve-url":33}],4:[function(y,J,D){const C=
y("resolve-url"),m=f=>new Promise((w,d)=>{const p=new FileReader;p.onload=()=>{w(p.result)};p.onerror=({target:{error:{code:t}}})=>{d(Error(`File could not be read! Code=${t}`))};p.readAsArrayBuffer(f)});J.exports=async f=>{let w=f;if("undefined"===typeof f)return new Uint8Array;if("string"===typeof f)w=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(f)?atob(f.split(",")[1]).split("").map(d=>d.charCodeAt(0)):await (await fetch(C(f))).arrayBuffer();else if(f instanceof File||f instanceof Blob)w=await m(f);
return new Uint8Array(w)}},{"resolve-url":33}],5:[function(y,J,D){const C=y("resolve-url"),{log:m}=y("../utils/log"),f=async(w,d)=>{m("info",`fetch ${w}`);const p=await (await fetch(w)).arrayBuffer();m("info",`${w} file size = ${p.byteLength} bytes`);d=new Blob([p],{type:d});d=URL.createObjectURL(d);m("info",`${w} blob URL = ${d}`);return d};J.exports=async({corePath:w})=>{if("string"!==typeof w)throw Error("corePath should be a string!");w=C(w);const d=await f(w,"application/javascript"),p=await f(w.replace("ffmpeg-core.js",
"ffmpeg-core.wasm"),"application/wasm"),t=await f(w.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");if("undefined"===typeof createFFmpegCore)return new Promise(u=>{const h=document.createElement("script"),k=()=>{h.removeEventListener("load",k);m("info","ffmpeg-core.js script loaded");u({createFFmpegCore,corePath:d,wasmPath:p,workerPath:t})};h.src=d;h.type="text/javascript";h.addEventListener("load",k);document.getElementsByTagName("head")[0].appendChild(h)});m("info","ffmpeg-core.js script is loaded already");
return Promise.resolve({createFFmpegCore,corePath:d,wasmPath:p,workerPath:t})}},{"../utils/log":10,"resolve-url":33}],6:[function(y,J,D){D=y("./defaultOptions");const C=y("./getCreateFFmpegCore");y=y("./fetchFile");J.exports={defaultOptions:D,getCreateFFmpegCore:C,fetchFile:y}},{"./defaultOptions":3,"./fetchFile":4,"./getCreateFFmpegCore":5}],7:[function(y,J,D){J.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}},{}],8:[function(y,J,
D){const {defaultArgs:C,baseOptions:m}=y("./config"),{setLogging:f,setCustomLogger:w,log:d}=y("./utils/log"),p=y("./utils/parseProgress"),t=y("./utils/parseArgs"),{defaultOptions:u,getCreateFFmpegCore:h}=y("./node"),{version:k}=y("../package.json"),q=Error("ffmpeg.wasm is not ready, make sure you have completed load().");J.exports=(F={})=>{const {log:v,logger:B,progress:l,...A}={...m,...u,...F};let n=null,x=null,G=null,H=!1,L=l;const I=({type:N,message:M})=>{d(N,M);p(M,L);"FFMPEG_END"===M&&null!==
G&&(G(),G=null,H=!1)};f(v);w(B);d("info",`use ffmpeg.wasm v${k}`);return{setProgress:N=>{L=N},setLogger:N=>{w(N)},setLogging:f,load:async()=>{d("info","load ffmpeg-core");if(null===n){d("info","loading ffmpeg-core");const {createFFmpegCore:N,corePath:M,workerPath:T,wasmPath:S}=await h(A);n=await N({mainScriptUrlOrBlob:M,printErr:O=>I({type:"fferr",message:O}),print:O=>I({type:"ffout",message:O}),locateFile:(O,V)=>{if("undefined"!==typeof window){if("undefined"!==typeof S&&O.endsWith("ffmpeg-core.wasm"))return S;
if("undefined"!==typeof T&&O.endsWith("ffmpeg-core.worker.js"))return T}return V+O}});x=n.cwrap("proxy_main","number",["number","number"]);d("info","ffmpeg-core loaded")}else throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");},isLoaded:()=>null!==n,run:(...N)=>{d("info",`run ffmpeg command: ${N.join(" ")}`);if(null===n)throw q;if(H)throw Error("ffmpeg.wasm can only run one command at a time");H=!0;return new Promise(M=>{const T=[...C,...N].filter(S=>
0!==S.length);G=M;x(...t(n,T))})},exit:()=>{if(null===n)throw q;H=!1;n.exit(1);G=x=n=null},FS:(N,...M)=>{d("info",`run FS.${N} ${M.map(S=>"string"===typeof S?S:`<${S.length} bytes binary file>`).join(" ")}`);if(null===n)throw q;let T=null;try{T=n.FS[N](...M)}catch(S){if("readdir"===N)throw Error(`ffmpeg.FS('readdir', '${M[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`);if("readFile"===N)throw Error(`ffmpeg.FS('readFile', '${M[0]}') error. Check if the path exists`);throw Error("Oops, something went wrong in FS operation.");
}return T}}}},{"../package.json":2,"./config":7,"./node":6,"./utils/log":10,"./utils/parseArgs":11,"./utils/parseProgress":12}],9:[function(y,J,D){y("regenerator-runtime/runtime");D=y("./createFFmpeg");({fetchFile:y}=y("./node"));J.exports={createFFmpeg:D,fetchFile:y}},{"./createFFmpeg":8,"./node":6,"regenerator-runtime/runtime":32}],10:[function(y,J,D){let C=!1,m=()=>{};J.exports={logging:C,setLogging:f=>{C=f},setCustomLogger:f=>{m=f},log:(f,w)=>{m({type:f,message:w});C&&console.log(`[${f}] ${w}`)}}},
{}],11:[function(y,J,D){J.exports=(C,m)=>{const f=C._malloc(m.length*Uint32Array.BYTES_PER_ELEMENT);m.forEach((w,d)=>{const p=C._malloc(w.length+1);C.writeAsciiToMemory(w,p);C.setValue(f+Uint32Array.BYTES_PER_ELEMENT*d,p,"i32")});return[m.length,f]}},{}],12:[function(y,J,D){let C=0,m=0;const f=w=>{const [d,p,t]=w.split(":");return 3600*parseFloat(d)+60*parseFloat(p)+parseFloat(t)};J.exports=(w,d)=>{if("string"===typeof w)if(w.startsWith("  Duration")){if(w=w.split(", ")[0].split(": ")[1],w=f(w),d({duration:w,
ratio:m}),0===C||C>w)C=w}else w.startsWith("frame")||w.startsWith("size")?(w=w.split("time=")[1].split(" ")[0],w=f(w),m=w/C,d({ratio:m,time:w})):w.startsWith("video:")&&(d({ratio:1}),C=0)}},{}],13:[function(y,J,D){function C(d){var p=d.length;if(0<p%4)throw Error("Invalid string. Length must be a multiple of 4");d=d.indexOf("=");-1===d&&(d=p);return[d,d===p?0:4-d%4]}D.byteLength=function(d){d=C(d);var p=d[1];return 3*(d[0]+p)/4-p};D.toByteArray=function(d){var p=C(d);var t=p[0];p=p[1];var u=new w(3*
(t+p)/4-p),h=0,k=0<p?t-4:t,q;for(q=0;q<k;q+=4)t=f[d.charCodeAt(q)]<<18|f[d.charCodeAt(q+1)]<<12|f[d.charCodeAt(q+2)]<<6|f[d.charCodeAt(q+3)],u[h++]=t>>16&255,u[h++]=t>>8&255,u[h++]=t&255;2===p&&(t=f[d.charCodeAt(q)]<<2|f[d.charCodeAt(q+1)]>>4,u[h++]=t&255);1===p&&(t=f[d.charCodeAt(q)]<<10|f[d.charCodeAt(q+1)]<<4|f[d.charCodeAt(q+2)]>>2,u[h++]=t>>8&255,u[h++]=t&255);return u};D.fromByteArray=function(d){for(var p=d.length,t=p%3,u=[],h=0,k=p-t;h<k;h+=16383){for(var q=u,F=q.push,v,B=d,l=h+16383>k?k:
h+16383,A=[],n=h;n<l;n+=3)v=(B[n]<<16&16711680)+(B[n+1]<<8&65280)+(B[n+2]&255),A.push(m[v>>18&63]+m[v>>12&63]+m[v>>6&63]+m[v&63]);v=A.join("");F.call(q,v)}1===t?(d=d[p-1],u.push(m[d>>2]+m[d<<4&63]+"==")):2===t&&(d=(d[p-2]<<8)+d[p-1],u.push(m[d>>10]+m[d>>4&63]+m[d<<2&63]+"="));return u.join("")};var m=[],f=[],w="undefined"!==typeof Uint8Array?Uint8Array:Array;for(y=0;64>y;++y)m[y]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[y],f["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(y)]=
y;f[45]=62;f[95]=63},{}],14:[function(y,J,D){},{}],15:[function(y,J,D){(function(C){(function(){function m(b){if(b>V)throw new RangeError('The value "'+b+'" is invalid for option "size"');b=new Uint8Array(b);b.__proto__=f.prototype;return b}function f(b,a,e){if("number"===typeof b){if("string"===typeof a)throw new TypeError('The "string" argument must be of type string. Received type number');return p(b)}return w(b,a,e)}function w(b,a,e){if("string"===typeof b){var c=a;if("string"!==typeof c||""===
c)c="utf8";if(!f.isEncoding(c))throw new TypeError("Unknown encoding: "+c);a=k(b,c)|0;e=m(a);b=e.write(b,c);b!==a&&(e=e.slice(0,b));return e}if(ArrayBuffer.isView(b))return t(b);if(null==b)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b);if(T(b,ArrayBuffer)||b&&T(b.buffer,ArrayBuffer)){if(0>a||b.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(b.byteLength<a+(e||0))throw new RangeError('"length" is outside of buffer bounds');
b=void 0===a&&void 0===e?new Uint8Array(b):void 0===e?new Uint8Array(b,a):new Uint8Array(b,a,e);b.__proto__=f.prototype;return b}if("number"===typeof b)throw new TypeError('The "value" argument must not be of type number. Received type number');c=b.valueOf&&b.valueOf();if(null!=c&&c!==b)return f.from(c,a,e);if(c=u(b))return c;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof b[Symbol.toPrimitive])return f.from(b[Symbol.toPrimitive]("string"),a,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof b);}function d(b){if("number"!==typeof b)throw new TypeError('"size" argument must be of type number');if(0>b)throw new RangeError('The value "'+b+'" is invalid for option "size"');}function p(b){d(b);return m(0>b?0:h(b)|0)}function t(b){for(var a=0>b.length?0:h(b.length)|0,e=m(a),c=0;c<a;c+=1)e[c]=b[c]&255;return e}function u(b){if(f.isBuffer(b)){var a=h(b.length)|0,e=m(a);if(0===e.length)return e;b.copy(e,0,0,a);return e}if(void 0!==b.length)return(a="number"!==typeof b.length)||(a=b.length,
a=a!==a),a?m(0):t(b);if("Buffer"===b.type&&Array.isArray(b.data))return t(b.data)}function h(b){if(b>=V)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+V.toString(16)+" bytes");return b|0}function k(b,a){if(f.isBuffer(b))return b.length;if(ArrayBuffer.isView(b)||T(b,ArrayBuffer))return b.byteLength;if("string"!==typeof b)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof b);var e=b.length,c=2<arguments.length&&
!0===arguments[2];if(!c&&0===e)return 0;for(var g=!1;;)switch(a){case "ascii":case "latin1":case "binary":return e;case "utf8":case "utf-8":return L(b).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*e;case "hex":return e>>>1;case "base64":return N(b).length;default:if(g)return c?-1:L(b).length;a=(""+a).toLowerCase();g=!0}}function q(b,a,e){var c=!1;if(void 0===a||0>a)a=0;if(a>this.length)return"";if(void 0===e||e>this.length)e=this.length;if(0>=e)return"";e>>>=0;a>>>=0;if(e<=
a)return"";for(b||="utf8";;)switch(b){case "hex":b=a;a=e;e=this.length;if(!b||0>b)b=0;if(!a||0>a||a>e)a=e;c="";for(e=b;e<a;++e)b=c,c=this[e],c=16>c?"0"+c.toString(16):c.toString(16),c=b+c;return c;case "utf8":case "utf-8":return l(this,a,e);case "ascii":b="";for(e=Math.min(this.length,e);a<e;++a)b+=String.fromCharCode(this[a]&127);return b;case "latin1":case "binary":b="";for(e=Math.min(this.length,e);a<e;++a)b+=String.fromCharCode(this[a]);return b;case "base64":return a=0===a&&e===this.length?S.fromByteArray(this):
S.fromByteArray(this.slice(a,e)),a;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=this.slice(a,e);e="";for(b=0;b<a.length;b+=2)e+=String.fromCharCode(a[b]+256*a[b+1]);return e;default:if(c)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();c=!0}}function F(b,a,e){var c=b[a];b[a]=b[e];b[e]=c}function v(b,a,e,c,g){if(0===b.length)return-1;"string"===typeof e?(c=e,e=0):2147483647<e?e=2147483647:-2147483648>e&&(e=-2147483648);e=+e;e!==e&&(e=g?0:b.length-1);0>e&&(e=b.length+
e);if(e>=b.length){if(g)return-1;e=b.length-1}else if(0>e)if(g)e=0;else return-1;"string"===typeof a&&(a=f.from(a,c));if(f.isBuffer(a))return 0===a.length?-1:B(b,a,e,c,g);if("number"===typeof a)return a&=255,"function"===typeof Uint8Array.prototype.indexOf?g?Uint8Array.prototype.indexOf.call(b,a,e):Uint8Array.prototype.lastIndexOf.call(b,a,e):B(b,[a],e,c,g);throw new TypeError("val must be string, number or Buffer");}function B(b,a,e,c,g){function r(E,z){return 1===K?E[z]:E.readUInt16BE(z*K)}var K=
1,R=b.length,P=a.length;if(void 0!==c&&(c=String(c).toLowerCase(),"ucs2"===c||"ucs-2"===c||"utf16le"===c||"utf-16le"===c)){if(2>b.length||2>a.length)return-1;K=2;R/=2;P/=2;e/=2}if(g)for(c=-1;e<R;e++)if(r(b,e)===r(a,-1===c?0:e-c)){if(-1===c&&(c=e),e-c+1===P)return c*K}else-1!==c&&(e-=e-c),c=-1;else for(e+P>R&&(e=R-P);0<=e;e--){R=!0;for(c=0;c<P;c++)if(r(b,e+c)!==r(a,c)){R=!1;break}if(R)return e}return-1}function l(b,a,e){e=Math.min(b.length,e);for(var c=[];a<e;){var g=b[a],r=null,K=239<g?4:223<g?3:
191<g?2:1;if(a+K<=e)switch(K){case 1:128>g&&(r=g);break;case 2:var R=b[a+1];128===(R&192)&&(g=(g&31)<<6|R&63,127<g&&(r=g));break;case 3:R=b[a+1];var P=b[a+2];128===(R&192)&&128===(P&192)&&(g=(g&15)<<12|(R&63)<<6|P&63,2047<g&&(55296>g||57343<g)&&(r=g));break;case 4:R=b[a+1];P=b[a+2];var E=b[a+3];128===(R&192)&&128===(P&192)&&128===(E&192)&&(g=(g&15)<<18|(R&63)<<12|(P&63)<<6|E&63,65535<g&&1114112>g&&(r=g))}null===r?(r=65533,K=1):65535<r&&(r-=65536,c.push(r>>>10&1023|55296),r=56320|r&1023);c.push(r);
a+=K}b=c.length;if(b<=W)c=String.fromCharCode.apply(String,c);else{e="";for(a=0;a<b;)e+=String.fromCharCode.apply(String,c.slice(a,a+=W));c=e}return c}function A(b,a,e){if(0!==b%1||0>b)throw new RangeError("offset is not uint");if(b+a>e)throw new RangeError("Trying to access beyond buffer length");}function n(b,a,e,c,g,r){if(!f.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>g||a<r)throw new RangeError('"value" argument is out of bounds');if(e+c>b.length)throw new RangeError("Index out of range");
}function x(b,a,e,c,g,r){if(e+c>b.length)throw new RangeError("Index out of range");if(0>e)throw new RangeError("Index out of range");}function G(b,a,e,c,g){a=+a;e>>>=0;g||x(b,a,e,4,3.4028234663852886E38,-3.4028234663852886E38);O.write(b,a,e,c,23,4);return e+4}function H(b,a,e,c,g){a=+a;e>>>=0;g||x(b,a,e,8,1.7976931348623157E308,-1.7976931348623157E308);O.write(b,a,e,c,52,8);return e+8}function L(b,a){a=a||Infinity;for(var e,c=b.length,g=null,r=[],K=0;K<c;++K){e=b.charCodeAt(K);if(55295<e&&57344>
e){if(!g){if(56319<e){-1<(a-=3)&&r.push(239,191,189);continue}else if(K+1===c){-1<(a-=3)&&r.push(239,191,189);continue}g=e;continue}if(56320>e){-1<(a-=3)&&r.push(239,191,189);g=e;continue}e=(g-55296<<10|e-56320)+65536}else g&&-1<(a-=3)&&r.push(239,191,189);g=null;if(128>e){if(0>--a)break;r.push(e)}else if(2048>e){if(0>(a-=2))break;r.push(e>>6|192,e&63|128)}else if(65536>e){if(0>(a-=3))break;r.push(e>>12|224,e>>6&63|128,e&63|128)}else if(1114112>e){if(0>(a-=4))break;r.push(e>>18|240,e>>12&63|128,e>>
6&63|128,e&63|128)}else throw Error("Invalid code point");}return r}function I(b){for(var a=[],e=0;e<b.length;++e)a.push(b.charCodeAt(e)&255);return a}function N(b){var a=S,e=a.toByteArray;b=b.split("=")[0];b=b.trim().replace(U,"");if(2>b.length)b="";else for(;0!==b.length%4;)b+="=";return e.call(a,b)}function M(b,a,e,c){for(var g=0;g<c&&!(g+e>=a.length||g>=b.length);++g)a[g+e]=b[g];return g}function T(b,a){return b instanceof a||null!=b&&null!=b.constructor&&null!=b.constructor.name&&b.constructor.name===
a.name}var S=y("base64-js"),O=y("ieee754");D.Buffer=f;D.SlowBuffer=function(b){+b!=b&&(b=0);return f.alloc(+b)};D.INSPECT_MAX_BYTES=50;var V=2147483647;D.kMaxLength=V;f.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1);b.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===b.foo()}catch(a){return!1}}();f.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}});Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});f.poolSize=8192;f.from=function(b,a,e){return w(b,a,e)};f.prototype.__proto__=Uint8Array.prototype;
f.__proto__=Uint8Array;f.alloc=function(b,a,e){d(b);b=0>=b?m(b):void 0!==a?"string"===typeof e?m(b).fill(a,e):m(b).fill(a):m(b);return b};f.allocUnsafe=function(b){return p(b)};f.allocUnsafeSlow=function(b){return p(b)};f.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==f.prototype};f.compare=function(b,a){T(b,Uint8Array)&&(b=f.from(b,b.offset,b.byteLength));T(a,Uint8Array)&&(a=f.from(a,a.offset,a.byteLength));if(!f.isBuffer(b)||!f.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(b===a)return 0;for(var e=b.length,c=a.length,g=0,r=Math.min(e,c);g<r;++g)if(b[g]!==a[g]){e=b[g];c=a[g];break}return e<c?-1:c<e?1:0};f.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};f.concat=function(b,a){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return f.alloc(0);
var e;if(void 0===a)for(e=a=0;e<b.length;++e)a+=b[e].length;a=f.allocUnsafe(a);var c=0;for(e=0;e<b.length;++e){var g=b[e];T(g,Uint8Array)&&(g=f.from(g));if(!f.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(a,c);c+=g.length}return a};f.byteLength=k;f.prototype._isBuffer=!0;f.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<b;a+=2)F(this,a,a+1);return this};f.prototype.swap32=
function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<b;a+=4)F(this,a,a+3),F(this,a+1,a+2);return this};f.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<b;a+=8)F(this,a,a+7),F(this,a+1,a+6),F(this,a+2,a+5),F(this,a+3,a+4);return this};f.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?l(this,0,b):q.apply(this,
arguments)};f.prototype.toLocaleString=f.prototype.toString;f.prototype.equals=function(b){if(!f.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===f.compare(this,b)};f.prototype.inspect=function(){var b=D.INSPECT_MAX_BYTES;var a=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim();this.length>b&&(a+=" ... ");return"<Buffer "+a+">"};f.prototype.compare=function(b,a,e,c,g){T(b,Uint8Array)&&(b=f.from(b,b.offset,b.byteLength));if(!f.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof b);void 0===a&&(a=0);void 0===e&&(e=b?b.length:0);void 0===c&&(c=0);void 0===g&&(g=this.length);if(0>a||e>b.length||0>c||g>this.length)throw new RangeError("out of range index");if(c>=g&&a>=e)return 0;if(c>=g)return-1;if(a>=e)return 1;a>>>=0;e>>>=0;c>>>=0;g>>>=0;if(this===b)return 0;var r=g-c,K=e-a,R=Math.min(r,K);c=this.slice(c,g);b=b.slice(a,e);for(a=0;a<R;++a)if(c[a]!==b[a]){r=c[a];K=b[a];break}return r<K?-1:K<r?1:0};f.prototype.includes=function(b,a,e){return-1!==this.indexOf(b,a,e)};f.prototype.indexOf=
function(b,a,e){return v(this,b,a,e,!0)};f.prototype.lastIndexOf=function(b,a,e){return v(this,b,a,e,!1)};f.prototype.write=function(b,a,e,c){if(void 0===a)c="utf8",e=this.length,a=0;else if(void 0===e&&"string"===typeof a)c=a,e=this.length,a=0;else if(isFinite(a))a>>>=0,isFinite(e)?(e>>>=0,void 0===c&&(c="utf8")):(c=e,e=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var g=this.length-a;if(void 0===e||e>g)e=g;if(0<b.length&&(0>e||0>a)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");
c||="utf8";for(g=!1;;)switch(c){case "hex":a:{a=Number(a)||0;c=this.length-a;e?(e=Number(e),e>c&&(e=c)):e=c;c=b.length;e>c/2&&(e=c/2);for(c=0;c<e;++c){g=parseInt(b.substr(2*c,2),16);if(g!==g){b=c;break a}this[a+c]=g}b=c}return b;case "utf8":case "utf-8":return M(L(b,this.length-a),this,a,e);case "ascii":return M(I(b),this,a,e);case "latin1":case "binary":return M(I(b),this,a,e);case "base64":return M(N(b),this,a,e);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=b;g=this.length-a;for(var r=
[],K=0;K<c.length&&!(0>(g-=2));++K){var R=c.charCodeAt(K);b=R>>8;R%=256;r.push(R);r.push(b)}return M(r,this,a,e);default:if(g)throw new TypeError("Unknown encoding: "+c);c=(""+c).toLowerCase();g=!0}};f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var W=4096;f.prototype.slice=function(b,a){var e=this.length;b=~~b;a=void 0===a?e:~~a;0>b?(b+=e,0>b&&(b=0)):b>e&&(b=e);0>a?(a+=e,0>a&&(a=0)):a>e&&(a=e);a<b&&(a=b);b=this.subarray(b,a);b.__proto__=f.prototype;
return b};f.prototype.readUIntLE=function(b,a,e){b>>>=0;a>>>=0;e||A(b,a,this.length);e=this[b];for(var c=1,g=0;++g<a&&(c*=256);)e+=this[b+g]*c;return e};f.prototype.readUIntBE=function(b,a,e){b>>>=0;a>>>=0;e||A(b,a,this.length);e=this[b+--a];for(var c=1;0<a&&(c*=256);)e+=this[b+--a]*c;return e};f.prototype.readUInt8=function(b,a){b>>>=0;a||A(b,1,this.length);return this[b]};f.prototype.readUInt16LE=function(b,a){b>>>=0;a||A(b,2,this.length);return this[b]|this[b+1]<<8};f.prototype.readUInt16BE=function(b,
a){b>>>=0;a||A(b,2,this.length);return this[b]<<8|this[b+1]};f.prototype.readUInt32LE=function(b,a){b>>>=0;a||A(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};f.prototype.readUInt32BE=function(b,a){b>>>=0;a||A(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};f.prototype.readIntLE=function(b,a,e){b>>>=0;a>>>=0;e||A(b,a,this.length);e=this[b];for(var c=1,g=0;++g<a&&(c*=256);)e+=this[b+g]*c;e>=128*c&&(e-=Math.pow(2,8*a));return e};f.prototype.readIntBE=
function(b,a,e){b>>>=0;a>>>=0;e||A(b,a,this.length);e=a;for(var c=1,g=this[b+--e];0<e&&(c*=256);)g+=this[b+--e]*c;g>=128*c&&(g-=Math.pow(2,8*a));return g};f.prototype.readInt8=function(b,a){b>>>=0;a||A(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};f.prototype.readInt16LE=function(b,a){b>>>=0;a||A(b,2,this.length);b=this[b]|this[b+1]<<8;return b&32768?b|4294901760:b};f.prototype.readInt16BE=function(b,a){b>>>=0;a||A(b,2,this.length);b=this[b+1]|this[b]<<8;return b&32768?b|4294901760:
b};f.prototype.readInt32LE=function(b,a){b>>>=0;a||A(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};f.prototype.readInt32BE=function(b,a){b>>>=0;a||A(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};f.prototype.readFloatLE=function(b,a){b>>>=0;a||A(b,4,this.length);return O.read(this,b,!0,23,4)};f.prototype.readFloatBE=function(b,a){b>>>=0;a||A(b,4,this.length);return O.read(this,b,!1,23,4)};f.prototype.readDoubleLE=function(b,a){b>>>=0;a||A(b,8,
this.length);return O.read(this,b,!0,52,8)};f.prototype.readDoubleBE=function(b,a){b>>>=0;a||A(b,8,this.length);return O.read(this,b,!1,52,8)};f.prototype.writeUIntLE=function(b,a,e,c){b=+b;a>>>=0;e>>>=0;c||n(this,b,a,e,Math.pow(2,8*e)-1,0);c=1;var g=0;for(this[a]=b&255;++g<e&&(c*=256);)this[a+g]=b/c&255;return a+e};f.prototype.writeUIntBE=function(b,a,e,c){b=+b;a>>>=0;e>>>=0;c||n(this,b,a,e,Math.pow(2,8*e)-1,0);c=e-1;var g=1;for(this[a+c]=b&255;0<=--c&&(g*=256);)this[a+c]=b/g&255;return a+e};f.prototype.writeUInt8=
function(b,a,e){b=+b;a>>>=0;e||n(this,b,a,1,255,0);this[a]=b&255;return a+1};f.prototype.writeUInt16LE=function(b,a,e){b=+b;a>>>=0;e||n(this,b,a,2,65535,0);this[a]=b&255;this[a+1]=b>>>8;return a+2};f.prototype.writeUInt16BE=function(b,a,e){b=+b;a>>>=0;e||n(this,b,a,2,65535,0);this[a]=b>>>8;this[a+1]=b&255;return a+2};f.prototype.writeUInt32LE=function(b,a,e){b=+b;a>>>=0;e||n(this,b,a,4,4294967295,0);this[a+3]=b>>>24;this[a+2]=b>>>16;this[a+1]=b>>>8;this[a]=b&255;return a+4};f.prototype.writeUInt32BE=
function(b,a,e){b=+b;a>>>=0;e||n(this,b,a,4,4294967295,0);this[a]=b>>>24;this[a+1]=b>>>16;this[a+2]=b>>>8;this[a+3]=b&255;return a+4};f.prototype.writeIntLE=function(b,a,e,c){b=+b;a>>>=0;c||(c=Math.pow(2,8*e-1),n(this,b,a,e,c-1,-c));c=0;var g=1,r=0;for(this[a]=b&255;++c<e&&(g*=256);)0>b&&0===r&&0!==this[a+c-1]&&(r=1),this[a+c]=(b/g>>0)-r&255;return a+e};f.prototype.writeIntBE=function(b,a,e,c){b=+b;a>>>=0;c||(c=Math.pow(2,8*e-1),n(this,b,a,e,c-1,-c));c=e-1;var g=1,r=0;for(this[a+c]=b&255;0<=--c&&
(g*=256);)0>b&&0===r&&0!==this[a+c+1]&&(r=1),this[a+c]=(b/g>>0)-r&255;return a+e};f.prototype.writeInt8=function(b,a,e){b=+b;a>>>=0;e||n(this,b,a,1,127,-128);0>b&&(b=255+b+1);this[a]=b&255;return a+1};f.prototype.writeInt16LE=function(b,a,e){b=+b;a>>>=0;e||n(this,b,a,2,32767,-32768);this[a]=b&255;this[a+1]=b>>>8;return a+2};f.prototype.writeInt16BE=function(b,a,e){b=+b;a>>>=0;e||n(this,b,a,2,32767,-32768);this[a]=b>>>8;this[a+1]=b&255;return a+2};f.prototype.writeInt32LE=function(b,a,e){b=+b;a>>>=
0;e||n(this,b,a,4,2147483647,-2147483648);this[a]=b&255;this[a+1]=b>>>8;this[a+2]=b>>>16;this[a+3]=b>>>24;return a+4};f.prototype.writeInt32BE=function(b,a,e){b=+b;a>>>=0;e||n(this,b,a,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);this[a]=b>>>24;this[a+1]=b>>>16;this[a+2]=b>>>8;this[a+3]=b&255;return a+4};f.prototype.writeFloatLE=function(b,a,e){return G(this,b,a,!0,e)};f.prototype.writeFloatBE=function(b,a,e){return G(this,b,a,!1,e)};f.prototype.writeDoubleLE=function(b,a,e){return H(this,b,
a,!0,e)};f.prototype.writeDoubleBE=function(b,a,e){return H(this,b,a,!1,e)};f.prototype.copy=function(b,a,e,c){if(!f.isBuffer(b))throw new TypeError("argument should be a Buffer");e||=0;c||0===c||(c=this.length);a>=b.length&&(a=b.length);a||=0;0<c&&c<e&&(c=e);if(c===e||0===b.length||0===this.length)return 0;if(0>a)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("sourceEnd out of bounds");c>this.length&&
(c=this.length);b.length-a<c-e&&(c=b.length-a+e);var g=c-e;if(this===b&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(a,e,c);else if(this===b&&e<a&&a<c)for(c=g-1;0<=c;--c)b[c+a]=this[c+e];else Uint8Array.prototype.set.call(b,this.subarray(e,c),a);return g};f.prototype.fill=function(b,a,e,c){if("string"===typeof b){"string"===typeof a?(c=a,a=0,e=this.length):"string"===typeof e&&(c=e,e=this.length);if(void 0!==c&&"string"!==typeof c)throw new TypeError("encoding must be a string");
if("string"===typeof c&&!f.isEncoding(c))throw new TypeError("Unknown encoding: "+c);if(1===b.length){var g=b.charCodeAt(0);if("utf8"===c&&128>g||"latin1"===c)b=g}}else"number"===typeof b&&(b&=255);if(0>a||this.length<a||this.length<e)throw new RangeError("Out of range index");if(e<=a)return this;a>>>=0;e=void 0===e?this.length:e>>>0;b||=0;if("number"===typeof b)for(c=a;c<e;++c)this[c]=b;else{g=f.isBuffer(b)?b:f.from(b,c);var r=g.length;if(0===r)throw new TypeError('The value "'+b+'" is invalid for argument "value"');
for(c=0;c<e-a;++c)this[c+a]=g[c%r]}return this};var U=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,y("buffer").Buffer)},{"base64-js":13,buffer:15,ieee754:19}],16:[function(y,J,D){J.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",
304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",
422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",
511:"Network Authentication Required"}},{}],17:[function(y,J,D){function C(){C.init.call(this)}function m(l){if("function"!==typeof l)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof l);}function f(l,A,n,x){m(n);var G=l._events;if(void 0===G)G=l._events=Object.create(null),l._eventsCount=0;else{void 0!==G.newListener&&(l.emit("newListener",A,n.listener?n.listener:n),G=l._events);var H=G[A]}void 0===H?(G[A]=n,++l._eventsCount):("function"===typeof H?H=G[A]=
x?[n,H]:[H,n]:x?H.unshift(n):H.push(n),n=void 0===l._maxListeners?C.defaultMaxListeners:l._maxListeners,0<n&&H.length>n&&!H.warned&&(H.warned=!0,n=Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit"),n.name="MaxListenersExceededWarning",n.emitter=l,n.type=A,n.count=H.length,console&&console.warn&&console.warn(n)));return l}function w(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),
this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(l,A,n){l={fired:!1,wrapFn:void 0,target:l,type:A,listener:n};A=w.bind(l);A.listener=n;return l.wrapFn=A}function p(l,A,n){l=l._events;if(void 0===l)return[];A=l[A];if(void 0===A)return[];if("function"===typeof A)return n?[A.listener||A]:[A];if(n)for(n=Array(A.length),l=0;l<n.length;++l)n[l]=A[l].listener||A[l];else n=u(A,A.length);return n}function t(l){var A=this._events;if(void 0!==
A){l=A[l];if("function"===typeof l)return 1;if(void 0!==l)return l.length}return 0}function u(l,A){for(var n=Array(A),x=0;x<A;++x)n[x]=l[x];return n}function h(l,A,n){"function"===typeof l.on&&k(l,"error",A,n)}function k(l,A,n,x){if("function"===typeof l.on)if(x.once)l.once(A,n);else l.on(A,n);else if("function"===typeof l.addEventListener)l.addEventListener(A,function L(H){x.once&&l.removeEventListener(A,L);n(H)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+
typeof l);}var q=(y="object"===typeof Reflect?Reflect:null)&&"function"===typeof y.apply?y.apply:function(l,A,n){return Function.prototype.apply.call(l,A,n)};var F=y&&"function"===typeof y.ownKeys?y.ownKeys:Object.getOwnPropertySymbols?function(l){return Object.getOwnPropertyNames(l).concat(Object.getOwnPropertySymbols(l))}:function(l){return Object.getOwnPropertyNames(l)};var v=Number.isNaN||function(l){return l!==l};J.exports=C;J.exports.once=function(l,A){return new Promise(function(n,x){function G(L){l.removeListener(A,
H);x(L)}function H(){"function"===typeof l.removeListener&&l.removeListener("error",G);n([].slice.call(arguments))}k(l,A,H,{once:!0});"error"!==A&&h(l,G,{once:!0})})};C.EventEmitter=C;C.prototype._events=void 0;C.prototype._eventsCount=0;C.prototype._maxListeners=void 0;var B=10;Object.defineProperty(C,"defaultMaxListeners",{enumerable:!0,get:function(){return B},set:function(l){if("number"!==typeof l||0>l||v(l))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+
l+".");B=l}});C.init=function(){if(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)this._events=Object.create(null),this._eventsCount=0;this._maxListeners=this._maxListeners||void 0};C.prototype.setMaxListeners=function(l){if("number"!==typeof l||0>l||v(l))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+l+".");this._maxListeners=l;return this};C.prototype.getMaxListeners=function(){return void 0===this._maxListeners?C.defaultMaxListeners:
this._maxListeners};C.prototype.emit=function(l){for(var A=[],n=1;n<arguments.length;n++)A.push(arguments[n]);n="error"===l;var x=this._events;if(void 0!==x)n=n&&void 0===x.error;else if(!n)return!1;if(n){var G;0<A.length&&(G=A[0]);if(G instanceof Error)throw G;A=Error("Unhandled error."+(G?" ("+G.message+")":""));A.context=G;throw A;}n=x[l];if(void 0===n)return!1;if("function"===typeof n)q(n,this,A);else for(G=n.length,x=u(n,G),n=0;n<G;++n)q(x[n],this,A);return!0};C.prototype.addListener=function(l,
A){return f(this,l,A,!1)};C.prototype.on=C.prototype.addListener;C.prototype.prependListener=function(l,A){return f(this,l,A,!0)};C.prototype.once=function(l,A){m(A);this.on(l,d(this,l,A));return this};C.prototype.prependOnceListener=function(l,A){m(A);this.prependListener(l,d(this,l,A));return this};C.prototype.removeListener=function(l,A){var n;m(A);var x=this._events;if(void 0===x)return this;var G=x[l];if(void 0===G)return this;if(G===A||G.listener===A)0===--this._eventsCount?this._events=Object.create(null):
(delete x[l],x.removeListener&&this.emit("removeListener",l,G.listener||A));else if("function"!==typeof G){var H=-1;for(n=G.length-1;0<=n;n--)if(G[n]===A||G[n].listener===A){var L=G[n].listener;H=n;break}if(0>H)return this;if(0===H)G.shift();else{for(;H+1<G.length;H++)G[H]=G[H+1];G.pop()}1===G.length&&(x[l]=G[0]);void 0!==x.removeListener&&this.emit("removeListener",l,L||A)}return this};C.prototype.off=C.prototype.removeListener;C.prototype.removeAllListeners=function(l){var A=this._events;if(void 0===
A)return this;if(void 0===A.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==A[l]&&(0===--this._eventsCount?this._events=Object.create(null):delete A[l]),this;if(0===arguments.length){var n=Object.keys(A);for(A=0;A<n.length;++A){var x=n[A];"removeListener"!==x&&this.removeAllListeners(x)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}n=A[l];if("function"===typeof n)this.removeListener(l,
n);else if(void 0!==n)for(A=n.length-1;0<=A;A--)this.removeListener(l,n[A]);return this};C.prototype.listeners=function(l){return p(this,l,!0)};C.prototype.rawListeners=function(l){return p(this,l,!1)};C.listenerCount=function(l,A){return"function"===typeof l.listenerCount?l.listenerCount(A):t.call(l,A)};C.prototype.listenerCount=t;C.prototype.eventNames=function(){return 0<this._eventsCount?F(this._events):[]}},{}],18:[function(y,J,D){function C(d){"string"===typeof d&&(d=f.parse(d));d.protocol||
(d.protocol="https:");if("https:"!==d.protocol)throw Error('Protocol "'+d.protocol+'" not supported. Expected "https:"');return d}var m=y("http"),f=y("url");y=J.exports;for(var w in m)m.hasOwnProperty(w)&&(y[w]=m[w]);y.request=function(d,p){d=C(d);return m.request.call(this,d,p)};y.get=function(d,p){d=C(d);return m.get.call(this,d,p)}},{http:51,url:72}],19:[function(y,J,D){D.read=function(C,m,f,w,d){var p=8*d-w-1;var t=(1<<p)-1,u=t>>1,h=-7;d=f?d-1:0;var k=f?-1:1,q=C[m+d];d+=k;f=q&(1<<-h)-1;q>>=-h;
for(h+=p;0<h;f=256*f+C[m+d],d+=k,h-=8);p=f&(1<<-h)-1;f>>=-h;for(h+=w;0<h;p=256*p+C[m+d],d+=k,h-=8);if(0===f)f=1-u;else{if(f===t)return p?NaN:Infinity*(q?-1:1);p+=Math.pow(2,w);f-=u}return(q?-1:1)*p*Math.pow(2,f-w)};D.write=function(C,m,f,w,d,p){var t,u=8*p-d-1,h=(1<<u)-1,k=h>>1,q=23===d?Math.pow(2,-24)-Math.pow(2,-77):0;p=w?0:p-1;var F=w?1:-1,v=0>m||0===m&&0>1/m?1:0;m=Math.abs(m);isNaN(m)||Infinity===m?(m=isNaN(m)?1:0,w=h):(w=Math.floor(Math.log(m)/Math.LN2),1>m*(t=Math.pow(2,-w))&&(w--,t*=2),m=1<=
w+k?m+q/t:m+q*Math.pow(2,1-k),2<=m*t&&(w++,t/=2),w+k>=h?(m=0,w=h):1<=w+k?(m=(m*t-1)*Math.pow(2,d),w+=k):(m=m*Math.pow(2,k-1)*Math.pow(2,d),w=0));for(;8<=d;C[f+p]=m&255,p+=F,m/=256,d-=8);w=w<<d|m;for(u+=d;0<u;C[f+p]=w&255,p+=F,w/=256,u-=8);C[f+p-F]|=128*v}},{}],20:[function(y,J,D){J.exports="function"===typeof Object.create?function(C,m){m&&(C.super_=m,C.prototype=Object.create(m.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}))}:function(C,m){if(m){C.super_=m;var f=function(){};
f.prototype=m.prototype;C.prototype=new f;C.prototype.constructor=C}}},{}],21:[function(y,J,D){J=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{"default":d}};Object.defineProperty(D,"__esModule",{value:!0});const C=y("stream"),m=J(y("sax")),f=y("./parse-time");class w extends C.Writable{constructor(d){super();this._parser=m.default.createStream(!1,{lowercase:!0});this._parser.on("error",this.destroy.bind(this));let p,t=0,u=0,h,k,q,F,v,B=[],l=!1,A=!1,n,x,G;const H=I=>{const N={RepresentationID:d,
Number:u,Time:t};return I.replace(/\$(\w+)\$/g,(M,T)=>`${N[T]}`)};this._parser.on("opentag",I=>{switch(I.name){case "mpd":t=I.attributes.availabilitystarttime?(new Date(I.attributes.availabilitystarttime)).getTime():0;n="dynamic"!==I.attributes.type;break;case "period":u=0;k=1E3;q=F=0;v=[];x=0;G=f.durationStr(I.attributes.start)||0;break;case "segmentlist":u=parseInt(I.attributes.startnumber)||u;k=parseInt(I.attributes.timescale)||k;F=parseInt(I.attributes.duration)||F;q=parseInt(I.attributes.presentationtimeoffset)||
q;break;case "segmenttemplate":h=I.attributes;u=parseInt(I.attributes.startnumber)||u;k=parseInt(I.attributes.timescale)||k;break;case "segmenttimeline":case "baseurl":p=I.name;break;case "s":B.push({duration:parseInt(I.attributes.d),repeat:parseInt(I.attributes.r),time:parseInt(I.attributes.t)});break;case "adaptationset":case "representation":x++;d||(d=I.attributes.id);if(l=I.attributes.id===`${d}`)G&&(t+=G),q&&(t-=q/k*1E3),this.emit("starttime",t);break;case "initialization":l&&this.emit("item",
{url:v.filter(M=>!!M).join("")+I.attributes.sourceurl,seq:u,init:!0,duration:0});break;case "segmenturl":if(l){A=!0;var N=B.shift();N=((null===N||void 0===N?void 0:N.duration)||F)/k*1E3;this.emit("item",{url:v.filter(M=>!!M).join("")+I.attributes.media,seq:u++,duration:N});t+=N}}});const L=()=>{n&&this.emit("endlist");l?this.emit("end"):this.destroy(Error(`Representation '${d}' not found`))};this._parser.on("closetag",I=>{switch(I){case "adaptationset":case "representation":x--;if(h&&B.length){A=
!0;h.initialization&&this.emit("item",{url:v.filter(N=>!!N).join("")+H(h.initialization),seq:u,init:!0,duration:0});for(let {duration:N,repeat:M,time:T}of B)for(N=N/k*1E3,M=M||1,t=T||t,I=0;I<M;I++)this.emit("item",{url:v.filter(S=>!!S).join("")+H(h.media),seq:u++,duration:N}),t+=N}A&&(this.emit("endearly"),L(),this._parser.removeAllListeners(),this.removeAllListeners("finish"))}});this._parser.on("text",I=>{"baseurl"===p&&(v[x]=I,p=null)});this.on("finish",L)}_write(d,p,t){this._parser.write(d);t()}}
D.default=w},{"./parse-time":24,sax:35,stream:36}],22:[function(y,J,D){var C=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{"default":t}};const m=y("stream"),f=C(y("miniget"));D=C(y("./m3u8-parser"));C=C(y("./dash-mpd-parser"));const w=y("./queue"),d=y("./parse-time"),p={m3u8:D.default,"dash-mpd":C.default};y=(t,u={})=>{const h=new m.PassThrough({highWaterMark:u.highWaterMark}),k=u.chunkReadahead||3,q=u.liveBuffer||2E4,F=u.requestOptions,v=p[u.parser||(/\.mpd$/.test(t)?"dash-mpd":
"m3u8")];if(!v)throw TypeError(`parser '${u.parser}' not supported`);let B=0;"undefined"!==typeof u.begin&&(B="string"===typeof u.begin?d.humanStr(u.begin):Math.max(u.begin-q,0));const l=c=>{for(let g of"abort request response redirect retry reconnect".split(" "))c.on(g,h.emit.bind(h,g))};let A;const n=new w.Queue((c,g)=>{A=c;let r=0;c.on("data",K=>r+=K.length);c.pipe(h,{end:!1});c.on("end",()=>g(null,r))},{concurrency:1});let x=0,G=0;const H=new w.Queue((c,g)=>{var r=Object.assign({},F);c.range&&
(r.headers=Object.assign({},r.headers,{Range:`bytes=${c.range.start}-${c.range.end}`}));r=f.default((new URL(c.url,t)).toString(),r);r.on("error",g);l(r);n.push(r,(K,R)=>{G+=+R;h.emit("progress",{num:++x,size:R,duration:c.duration,url:c.url},H.total,G);g(null)})},{concurrency:k}),L=c=>{h.emit("error",c);h.end()};let I,N,M,T=!0,S=!1,O=!1,V;const W=c=>{A=null;c?L(c):!T&&!S&&!O&&H.tasks.length+H.active<=I?(c=Math.max(0,N-(Date.now()-V)),T=!0,M=setTimeout(e,c)):!S&&!O||H.tasks.length||H.active||h.end()};
let U,b,a=0;const e=()=>{V=Date.now();U=f.default(t,F);U.on("error",L);l(U);const c=U.pipe(new v(u.id));c.on("starttime",P=>{a||(a=P,"string"===typeof u.begin&&0<=B&&(B+=a))});c.on("endlist",()=>{O=!0});c.on("endearly",U.unpipe.bind(U,c));let g=[];const r=P=>{if(!P.init){if(P.seq<=b)return;b=P.seq}B=P.time;H.push(P,W);g.push(P)};let K=[],R=0;c.on("item",P=>{P=Object.assign({time:a},P);if(B<=P.time)r(P);else for(K.push(P),R+=P.duration;1<K.length&&R-K[0].duration>q;){const E=K.shift();R-=E.duration}a+=
P.duration});c.on("end",()=>{U=null;!g.length&&K.length&&K.forEach(P=>{r(P)});I=Math.max(1,Math.ceil(.01*g.length));N=g.reduce((P,E)=>E.duration+P,0);T=!1;W(null)})};e();h.end=()=>{S=!0;n.die();H.die();clearTimeout(M);null===U||void 0===U?void 0:U.destroy();null===A||void 0===A?void 0:A.destroy();m.PassThrough.prototype.end.call(h,null);return h};return h};y.parseTimestamp=d.humanStr;J.exports=y},{"./dash-mpd-parser":21,"./m3u8-parser":23,"./parse-time":24,"./queue":25,miniget:26,stream:36}],23:[function(y,
J,D){Object.defineProperty(D,"__esModule",{value:!0});y=y("stream");class C extends y.Writable{constructor(){super();this._lastLine="";this._seq=0;this._nextItemRange=this._nextItemDuration=null;this._lastItemRangeEnd=0;this.on("finish",()=>{this._parseLine(this._lastLine);this.emit("end")})}_parseAttrList(m){let f={},w=/([A-Z0-9-]+)=(?:"([^"]*?)"|([^,]*?))/g,d;for(;null!==(d=w.exec(m));)f[d[1]]=d[2]||d[3];return f}_parseRange(m){if(!m)return null;var f=m.split("@");m=f[1]?parseInt(f[1]):this._lastItemRangeEnd+
1;f=m+parseInt(f[0])-1;m={start:m,end:f};this._lastItemRangeEnd=m.end;return m}_parseLine(m){var f=m.match(/^#(EXT[A-Z0-9-]+)(?::(.*))?/);if(f)switch(m=f[2]||"",f[1]){case "EXT-X-PROGRAM-DATE-TIME":this.emit("starttime",(new Date(m)).getTime());break;case "EXT-X-MEDIA-SEQUENCE":this._seq=parseInt(m);break;case "EXT-X-MAP":f=this._parseAttrList(m);if(!f.URI){this.destroy(Error("`EXT-X-MAP` found without required attribute `URI`"));break}this.emit("item",{url:f.URI,seq:this._seq,init:!0,duration:0,
range:this._parseRange(f.BYTERANGE)});break;case "EXT-X-BYTERANGE":this._nextItemRange=this._parseRange(m);break;case "EXTINF":this._nextItemDuration=Math.round(1E3*parseFloat(m.split(",")[0]));break;case "EXT-X-ENDLIST":this.emit("endlist")}else!/^#/.test(m)&&m.trim()&&(this.emit("item",{url:m.trim(),seq:this._seq++,duration:this._nextItemDuration,range:this._nextItemRange}),this._nextItemRange=null)}_write(m,f,w){let d=m.toString("utf8").split("\n");this._lastLine&&(d[0]=this._lastLine+d[0]);d.forEach((p,
t)=>{this.destroyed||(t<d.length-1?this._parseLine(p):this._lastLine=p)});w()}}D.default=C},{stream:36}],24:[function(y,J,D){Object.defineProperty(D,"__esModule",{value:!0});D.durationStr=D.humanStr=void 0;const C=/^\d+$/,m=/^(?:(?:(\d+):)?(\d{1,2}):)?(\d{1,2})(?:\.(\d{3}))?$/,f={ms:1,s:1E3,m:6E4,h:36E5};D.humanStr=w=>{if("number"===typeof w)return w;if(C.test(w))return+w;var d=m.exec(w);if(d)return+(d[1]||0)*f.h+ +(d[2]||0)*f.m+ +d[3]*f.s+ +(d[4]||0);d=0;const p=/(-?\d+)(ms|s|m|h)/g;let t;for(;null!==
(t=p.exec(w));)d+=+t[1]*f[t[2]];return d};D.durationStr=w=>{let d=0;const p=/(\d+(?:\.\d+)?)(S|M|H)/g;let t;for(;null!==(t=p.exec(w));)d+=+t[1]*f[t[2].toLowerCase()];return d}},{}],25:[function(y,J,D){Object.defineProperty(D,"__esModule",{value:!0});D.Queue=void 0;class C{constructor(m,f={}){this._worker=m;this._concurrency=f.concurrency||1;this.tasks=[];this.active=this.total=0}push(m,f){this.tasks.push({item:m,callback:f});this.total++;this._next()}_next(){if(!(this.active>=this._concurrency)&&
this.tasks.length){var {item:m,callback:f}=this.tasks.shift(),w=!1;this.active++;this._worker(m,(d,p)=>{w||(this.active--,w=!0,null===f||void 0===f?void 0:f(d,p),this._next())})}}die(){this.tasks=[]}}D.Queue=C},{}],26:[function(y,J,D){(function(C){(function(){function m(q,F={}){var v;const B=Object.assign({},m.defaultOptions,F),l=new d.PassThrough({highWaterMark:B.highWaterMark});l.destroyed=l.aborted=!1;let A,n,x,G=0,H=0,L,I=0,N,M=!1,T=0,S,O=0;if(null===(v=B.headers)||void 0===v?0:v.Range)if(v=/bytes=(\d+)-(\d+)?/.exec(`${B.headers.Range}`))T=
parseInt(v[1],10),S=parseInt(v[2],10);B.acceptEncoding&&(B.headers=Object.assign({"Accept-Encoding":Object.keys(B.acceptEncoding).join(", ")},B.headers));const V=c=>"HEAD"!==F.method&&M&&O!==N&&I++<B.maxReconnects?(x=null,H=0,L=setTimeout(b,Math.min(B.backoff.inc,B.backoff.max)),l.emit("reconnect",I,c),!0):!1,W=c=>l.destroyed?!1:x&&0<O?V(c.err):(!c.err||"ENOTFOUND"===c.err.message)&&H++<B.maxRetries?(L=setTimeout(b,c.retryAfter||Math.min(H*B.backoff.inc,B.backoff.max)),l.emit("retry",H,c.err),!0):
!1,U=(c,g)=>{for(let r of g)c.on(r,l.emit.bind(l,r))},b=()=>{let c={},g;try{let z="string"===typeof q?new URL(q):q;c=Object.assign({},{host:z.host,hostname:z.hostname,path:z.pathname+z.search+z.hash,port:z.port,protocol:z.protocol});z.username&&(c.auth=`${z.username}:${z.password}`);g=p[String(c.protocol)]}catch(z){}if(g){Object.assign(c,B);M&&0<O&&(c.headers=Object.assign({},c.headers,{Range:`bytes=${O+T}-${S||""}`}));if(B.transform){try{c=B.transform(c)}catch(z){l.emit("error",z);return}if(!c||
c.protocol)if(g=p[String(null===c||void 0===c?void 0:c.protocol)],!g){l.emit("error",new m.MinigetError("Invalid URL object from `transform` function"));return}}var r=z=>{l.destroyed||l.readableEnded||(R(),W({err:z})?A.removeListener("close",K):l.emit("error",z))},K=()=>{R();W({})},R=()=>{A.removeListener("close",K);null===n||void 0===n?void 0:n.removeListener("data",P);null===x||void 0===x?void 0:x.removeListener("end",E)},P=z=>{O+=z.length},E=()=>{R();V()||l.end()};A=g.request(c,z=>{if(!l.destroyed)if(t.has(z.statusCode)){if(G++>=
B.maxRedirects)l.emit("error",new m.MinigetError("Too many redirects"));else{if(z.headers.location)q=z.headers.location;else{z=new m.MinigetError("Redirect status code given with no location",z.statusCode);l.emit("error",z);R();return}setTimeout(b,1E3*parseInt(z.headers["retry-after"]||"0",10));l.emit("redirect",q)}R()}else if(u.has(z.statusCode))W({retryAfter:parseInt(z.headers["retry-after"]||"0",10)})||(z=new m.MinigetError(`Status code: ${z.statusCode}`,z.statusCode),l.emit("error",z)),R();else if(z.statusCode&&
(200>z.statusCode||400<=z.statusCode)){var Q=new m.MinigetError(`Status code: ${z.statusCode}`,z.statusCode);500<=z.statusCode?r(Q):l.emit("error",Q);R()}else{x=z;if(B.acceptEncoding&&z.headers["content-encoding"])for(Q of z.headers["content-encoding"].split(", ").reverse()){let Y=B.acceptEncoding[Q];Y&&(x=x.pipe(Y()),x.on("error",r))}N||(N=parseInt(`${z.headers["content-length"]}`,10),M="bytes"===z.headers["accept-ranges"]&&0<N&&0<B.maxReconnects);z.on("data",P);x.on("end",E);x.pipe(l,{end:!M});
n=z;l.emit("response",z);z.on("error",r);U(z,k)}});A.on("error",r);A.on("close",K);U(A,h);l.destroyed&&e(...a);l.emit("request",A);A.end()}else l.emit("error",new m.MinigetError(`Invalid URL: ${q}`))};l.abort=c=>{console.warn("`MinigetStream#abort()` has been deprecated in favor of `MinigetStream#destroy()`");l.aborted=!0;l.emit("abort");l.destroy(c)};let a;const e=c=>{A.destroy(c);null===x||void 0===x?void 0:x.unpipe(l);null===x||void 0===x?void 0:x.destroy();clearTimeout(L)};l._destroy=(...c)=>
{l.destroyed=!0;A?e(...c):a=c};l.text=()=>new Promise((c,g)=>{let r="";l.setEncoding("utf8");l.on("data",K=>r+=K);l.on("end",()=>c(r));l.on("error",g)});C.nextTick(b);return l}var f=this&&this.__importDefault||function(q){return q&&q.__esModule?q:{"default":q}};const w=f(y("http"));f=f(y("https"));const d=y("stream"),p={"http:":w.default,"https:":f.default},t=new Set([301,302,303,307,308]),u=new Set([429,503]),h="connect continue information socket timeout upgrade".split(" "),k=["aborted"];m.MinigetError=
class extends Error{constructor(q,F){super(q);this.statusCode=F}};m.defaultOptions={maxRedirects:10,maxRetries:2,maxReconnects:0,backoff:{inc:100,max:1E4}};J.exports=m}).call(this)}).call(this,y("_process"))},{_process:27,http:51,https:18,stream:36}],27:[function(y,J,D){function C(){throw Error("setTimeout has not been defined");}function m(){throw Error("clearTimeout has not been defined");}function f(l){if(h===setTimeout)return setTimeout(l,0);if((h===C||!h)&&setTimeout)return h=setTimeout,setTimeout(l,
0);try{return h(l,0)}catch(A){try{return h.call(null,l,0)}catch(n){return h.call(this,l,0)}}}function w(l){if(k===clearTimeout)return clearTimeout(l);if((k===m||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(l);try{return k(l)}catch(A){try{return k.call(null,l)}catch(n){return k.call(this,l)}}}function d(){F&&v&&(F=!1,v.length?q=v.concat(q):B=-1,q.length&&p())}function p(){if(!F){var l=f(d);F=!0;for(var A=q.length;A;){v=q;for(q=[];++B<A;)v&&v[B].run();B=-1;A=q.length}v=null;F=!1;w(l)}}function t(l,
A){this.fun=l;this.array=A}function u(){}y=J.exports={};try{var h="function"===typeof setTimeout?setTimeout:C}catch(l){h=C}try{var k="function"===typeof clearTimeout?clearTimeout:m}catch(l){k=m}var q=[],F=!1,v,B=-1;y.nextTick=function(l){var A=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)A[n-1]=arguments[n];q.push(new t(l,A));1!==q.length||F||f(p)};t.prototype.run=function(){this.fun.apply(null,this.array)};y.title="browser";y.browser=!0;y.env={};y.argv=[];y.version=
"";y.versions={};y.on=u;y.addListener=u;y.once=u;y.off=u;y.removeListener=u;y.removeAllListeners=u;y.emit=u;y.prependListener=u;y.prependOnceListener=u;y.listeners=function(l){return[]};y.binding=function(l){throw Error("process.binding is not supported");};y.cwd=function(){return"/"};y.chdir=function(l){throw Error("process.chdir is not supported");};y.umask=function(){return 0}},{}],28:[function(y,J,D){(function(C){(function(){(function(m){function f(L){throw new RangeError(n[L]);}function w(L,
I){for(var N=L.length,M=[];N--;)M[N]=I(L[N]);return M}function d(L,I){var N=L.split("@"),M="";1<N.length&&(M=N[0]+"@",L=N[1]);L=L.replace(A,".");L=L.split(".");I=w(L,I).join(".");return M+I}function p(L){for(var I=[],N=0,M=L.length,T,S;N<M;)T=L.charCodeAt(N++),55296<=T&&56319>=T&&N<M?(S=L.charCodeAt(N++),56320==(S&64512)?I.push(((T&1023)<<10)+(S&1023)+65536):(I.push(T),N--)):I.push(T);return I}function t(L){return w(L,function(I){var N="";65535<I&&(I-=65536,N+=G(I>>>10&1023|55296),I=56320|I&1023);
return N+=G(I)}).join("")}function u(L,I,N){var M=0;L=N?x(L/700):L>>1;for(L+=x(L/I);455<L;M+=36)L=x(L/35);return x(M+36*L/(L+38))}function h(L){var I=[],N=L.length,M=0,T=128,S=72,O,V;var W=L.lastIndexOf("-");0>W&&(W=0);for(O=0;O<W;++O)128<=L.charCodeAt(O)&&f("not-basic"),I.push(L.charCodeAt(O));for(W=0<W?W+1:0;W<N;){O=M;var U=1;for(V=36;;V+=36){W>=N&&f("invalid-input");var b=L.charCodeAt(W++);b=10>b-48?b-22:26>b-65?b-65:26>b-97?b-97:36;(36<=b||b>x((2147483647-M)/U))&&f("overflow");M+=b*U;var a=V<=
S?1:V>=S+26?26:V-S;if(b<a)break;b=36-a;U>x(2147483647/b)&&f("overflow");U*=b}U=I.length+1;S=u(M-O,U,0==O);x(M/U)>2147483647-T&&f("overflow");T+=x(M/U);M%=U;I.splice(M++,0,T)}return t(I)}function k(L){var I,N,M,T=[];L=p(L);var S=L.length;var O=128;var V=0;var W=72;for(M=0;M<S;++M){var U=L[M];128>U&&T.push(G(U))}for((I=N=T.length)&&T.push("-");I<S;){var b=2147483647;for(M=0;M<S;++M)U=L[M],U>=O&&U<b&&(b=U);var a=I+1;b-O>x((2147483647-V)/a)&&f("overflow");V+=(b-O)*a;O=b;for(M=0;M<S;++M)if(U=L[M],U<O&&
2147483647<++V&&f("overflow"),U==O){var e=V;for(b=36;;b+=36){U=b<=W?1:b>=W+26?26:b-W;if(e<U)break;var c=e-U;e=36-U;var g=T;U+=c%e;g.push.call(g,G(U+22+75*(26>U)-0));e=x(c/e)}T.push(G(e+22+75*(26>e)-0));W=u(V,a,I==N);V=0;++I}++V;++O}return T.join("")}var q="object"==typeof D&&D&&!D.nodeType&&D,F="object"==typeof J&&J&&!J.nodeType&&J,v="object"==typeof C&&C;if(v.global===v||v.window===v||v.self===v)m=v;var B=/^xn--/,l=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,n={overflow:"Overflow: input needs wider integers to process",
"not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=Math.floor,G=String.fromCharCode,H;v={version:"1.4.1",ucs2:{decode:p,encode:t},decode:h,encode:k,toASCII:function(L){return d(L,function(I){return l.test(I)?"xn--"+k(I):I})},toUnicode:function(L){return d(L,function(I){return B.test(I)?h(I.slice(4).toLowerCase()):I})}};if(q&&F)if(J.exports==q)F.exports=v;else for(H in v)v.hasOwnProperty(H)&&(q[H]=v[H]);else m.punycode=v})(this)}).call(this)}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],29:[function(y,J,D){J.exports=function(m,f,w,d){w=w||"=";var p={};if("string"!==typeof m||0===m.length)return p;var t=/\+/g;m=m.split(f||"&");f=1E3;d&&"number"===typeof d.maxKeys&&(f=d.maxKeys);d=m.length;0<f&&d>f&&(d=f);for(f=0;f<d;++f){var u=m[f].replace(t,"%20"),h=u.indexOf(w);if(0<=h){var k=u.substr(0,h);u=u.substr(h+1)}else k=u,u="";k=decodeURIComponent(k);u=decodeURIComponent(u);Object.prototype.hasOwnProperty.call(p,
k)?C(p[k])?p[k].push(u):p[k]=[p[k],u]:p[k]=u}return p};var C=Array.isArray||function(m){return"[object Array]"===Object.prototype.toString.call(m)}},{}],30:[function(y,J,D){function C(d,p){if(d.map)return d.map(p);for(var t=[],u=0;u<d.length;u++)t.push(p(d[u],u));return t}var m=function(d){switch(typeof d){case "string":return d;case "boolean":return d?"true":"false";case "number":return isFinite(d)?d:"";default:return""}};J.exports=function(d,p,t,u){p=p||"&";t=t||"=";null===d&&(d=void 0);return"object"===
typeof d?C(w(d),function(h){var k=encodeURIComponent(m(h))+t;return f(d[h])?C(d[h],function(q){return k+encodeURIComponent(m(q))}).join(p):k+encodeURIComponent(m(d[h]))}).join(p):u?encodeURIComponent(m(u))+t+encodeURIComponent(m(d)):""};var f=Array.isArray||function(d){return"[object Array]"===Object.prototype.toString.call(d)},w=Object.keys||function(d){var p=[],t;for(t in d)Object.prototype.hasOwnProperty.call(d,t)&&p.push(t);return p}},{}],31:[function(y,J,D){D.decode=D.parse=y("./decode");D.encode=
D.stringify=y("./encode")},{"./decode":29,"./encode":30}],32:[function(y,J,D){y=function(C){function m(b,a,e){Object.defineProperty(b,a,{value:e,enumerable:!0,configurable:!0,writable:!0});return b[a]}function f(b,a,e,c){a=Object.create((a&&a.prototype instanceof d?a:d).prototype);c=new B(c||[]);a._invoke=k(b,e,c);return a}function w(b,a,e){try{return{type:"normal",arg:b.call(a,e)}}catch(c){return{type:"throw",arg:c}}}function d(){}function p(){}function t(){}function u(b){["next","throw","return"].forEach(function(a){m(b,
a,function(e){return this._invoke(a,e)})})}function h(b,a){function e(g,r,K,R){g=w(b[g],b,r);if("throw"===g.type)R(g.arg);else{var P=g.arg;return(g=P.value)&&"object"===typeof g&&x.call(g,"__await")?a.resolve(g.__await).then(function(E){e("next",E,K,R)},function(E){e("throw",E,K,R)}):a.resolve(g).then(function(E){P.value=E;K(P)},function(E){return e("throw",E,K,R)})}}var c;this._invoke=function(g,r){function K(){return new a(function(R,P){e(g,r,R,P)})}return c=c?c.then(K,K):K()}}function k(b,a,e){var c=
M;return function(g,r){if(c===S)throw Error("Generator is already running");if(c===O){if("throw"===g)throw r;return A()}e.method=g;for(e.arg=r;;){if(g=e.delegate)if(g=q(g,e)){if(g===V)continue;return g}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(c===M)throw c=O,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);c=S;g=w(b,a,e);if("normal"===g.type){c=e.done?O:T;if(g.arg===V)continue;return{value:g.arg,done:e.done}}"throw"===g.type&&(c=O,
e.method="throw",e.arg=g.arg)}}}function q(b,a){var e=b.iterator[a.method];if(e===G){a.delegate=null;if("throw"===a.method){if(b.iterator["return"]&&(a.method="return",a.arg=G,q(b,a),"throw"===a.method))return V;a.method="throw";a.arg=new TypeError("The iterator does not provide a 'throw' method")}return V}e=w(e,b.iterator,a.arg);if("throw"===e.type)return a.method="throw",a.arg=e.arg,a.delegate=null,V;e=e.arg;if(!e)return a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=
null,V;if(e.done)a[b.resultName]=e.value,a.next=b.nextLoc,"return"!==a.method&&(a.method="next",a.arg=G);else return e;a.delegate=null;return V}function F(b){var a={tryLoc:b[0]};1 in b&&(a.catchLoc=b[1]);2 in b&&(a.finallyLoc=b[2],a.afterLoc=b[3]);this.tryEntries.push(a)}function v(b){var a=b.completion||{};a.type="normal";delete a.arg;b.completion=a}function B(b){this.tryEntries=[{tryLoc:"root"}];b.forEach(F,this);this.reset(!0)}function l(b){if(b){var a=b[L];if(a)return a.call(b);if("function"===
typeof b.next)return b;if(!isNaN(b.length)){var e=-1;a=function g(){for(;++e<b.length;)if(x.call(b,e))return g.value=b[e],g.done=!1,g;g.value=G;g.done=!0;return g};return a.next=a}}return{next:A}}function A(){return{value:G,done:!0}}var n=Object.prototype,x=n.hasOwnProperty,G,H="function"===typeof Symbol?Symbol:{},L=H.iterator||"@@iterator",I=H.asyncIterator||"@@asyncIterator",N=H.toStringTag||"@@toStringTag";try{m({},"")}catch(b){m=function(a,e,c){return a[e]=c}}C.wrap=f;var M="suspendedStart",T=
"suspendedYield",S="executing",O="completed",V={};H={};m(H,L,function(){return this});var W=Object.getPrototypeOf;(W=W&&W(W(l([]))))&&W!==n&&x.call(W,L)&&(H=W);var U=t.prototype=d.prototype=Object.create(H);p.prototype=t;m(U,"constructor",t);m(t,"constructor",p);p.displayName=m(t,N,"GeneratorFunction");C.isGeneratorFunction=function(b){return(b="function"===typeof b&&b.constructor)?b===p||"GeneratorFunction"===(b.displayName||b.name):!1};C.mark=function(b){Object.setPrototypeOf?Object.setPrototypeOf(b,
t):(b.__proto__=t,m(b,N,"GeneratorFunction"));b.prototype=Object.create(U);return b};C.awrap=function(b){return{__await:b}};u(h.prototype);m(h.prototype,I,function(){return this});C.AsyncIterator=h;C.async=function(b,a,e,c,g){void 0===g&&(g=Promise);var r=new h(f(b,a,e,c),g);return C.isGeneratorFunction(a)?r:r.next().then(function(K){return K.done?K.value:r.next()})};u(U);m(U,N,"Generator");m(U,L,function(){return this});m(U,"toString",function(){return"[object Generator]"});C.keys=function(b){var a=
[],e;for(e in b)a.push(e);a.reverse();return function g(){for(;a.length;){var r=a.pop();if(r in b)return g.value=r,g.done=!1,g}g.done=!0;return g}};C.values=l;B.prototype={constructor:B,reset:function(b){this.next=this.prev=0;this.sent=this._sent=G;this.done=!1;this.delegate=null;this.method="next";this.arg=G;this.tryEntries.forEach(v);if(!b)for(var a in this)"t"===a.charAt(0)&&x.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=G)},stop:function(){this.done=!0;var b=this.tryEntries[0].completion;if("throw"===
b.type)throw b.arg;return this.rval},dispatchException:function(b){function a(P,E){r.type="throw";r.arg=b;e.next=P;E&&(e.method="next",e.arg=G);return!!E}if(this.done)throw b;for(var e=this,c=this.tryEntries.length-1;0<=c;--c){var g=this.tryEntries[c],r=g.completion;if("root"===g.tryLoc)return a("end");if(g.tryLoc<=this.prev){var K=x.call(g,"catchLoc"),R=x.call(g,"finallyLoc");if(K&&R){if(this.prev<g.catchLoc)return a(g.catchLoc,!0);if(this.prev<g.finallyLoc)return a(g.finallyLoc)}else if(K){if(this.prev<
g.catchLoc)return a(g.catchLoc,!0)}else if(R){if(this.prev<g.finallyLoc)return a(g.finallyLoc)}else throw Error("try statement without catch or finally");}}},abrupt:function(b,a){for(var e=this.tryEntries.length-1;0<=e;--e){var c=this.tryEntries[e];if(c.tryLoc<=this.prev&&x.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var g=c;break}}g&&("break"===b||"continue"===b)&&g.tryLoc<=a&&a<=g.finallyLoc&&(g=null);e=g?g.completion:{};e.type=b;e.arg=a;return g?(this.method="next",this.next=g.finallyLoc,V):
this.complete(e)},complete:function(b,a){if("throw"===b.type)throw b.arg;"break"===b.type||"continue"===b.type?this.next=b.arg:"return"===b.type?(this.rval=this.arg=b.arg,this.method="return",this.next="end"):"normal"===b.type&&a&&(this.next=a);return V},finish:function(b){for(var a=this.tryEntries.length-1;0<=a;--a){var e=this.tryEntries[a];if(e.finallyLoc===b)return this.complete(e.completion,e.afterLoc),v(e),V}},"catch":function(b){for(var a=this.tryEntries.length-1;0<=a;--a){var e=this.tryEntries[a];
if(e.tryLoc===b){b=e.completion;if("throw"===b.type){var c=b.arg;v(e)}return c}}throw Error("illegal catch attempt");},delegateYield:function(b,a,e){this.delegate={iterator:l(b),resultName:a,nextLoc:e};"next"===this.method&&(this.arg=G);return V}};return C}("object"===typeof J?J.exports:{});try{regeneratorRuntime=y}catch(C){"object"===typeof globalThis?globalThis.regeneratorRuntime=y:Function("r","regeneratorRuntime = r")(y)}},{}],33:[function(y,J,D){void function(C,m){"object"===typeof D?J.exports=
m():C.resolveUrl=m()}(this,function(){return function(){var C=arguments.length;if(0===C)throw Error("resolveUrl requires at least one argument; got none.");var m=document.createElement("base");m.href=arguments[0];if(1===C)return m.href;var f=document.getElementsByTagName("head")[0];f.insertBefore(m,f.firstChild);for(var w=document.createElement("a"),d,p=1;p<C;p++)w.href=arguments[p],d=w.href,m.href=d;f.removeChild(m);return d}})},{}],34:[function(y,J,D){function C(d,p){for(var t in d)p[t]=d[t]}function m(d,
p,t){return w(d,p,t)}var f=y("buffer"),w=f.Buffer;w.from&&w.alloc&&w.allocUnsafe&&w.allocUnsafeSlow?J.exports=f:(C(f,D),D.Buffer=m);m.prototype=Object.create(w.prototype);C(w,m);m.from=function(d,p,t){if("number"===typeof d)throw new TypeError("Argument must not be a number");return w(d,p,t)};m.alloc=function(d,p,t){if("number"!==typeof d)throw new TypeError("Argument must be a number");d=w(d);void 0!==p?"string"===typeof t?d.fill(p,t):d.fill(p):d.fill(0);return d};m.allocUnsafe=function(d){if("number"!==
typeof d)throw new TypeError("Argument must be a number");return w(d)};m.allocUnsafeSlow=function(d){if("number"!==typeof d)throw new TypeError("Argument must be a number");return f.SlowBuffer(d)}},{buffer:15}],35:[function(y,J,D){(function(C){(function(){(function(m){function f(c,g){if(!(this instanceof f))return new f(c,g);for(var r=0,K=H.length;r<K;r++)this[H[r]]="";this.q=this.c="";this.bufferCheckPosition=m.MAX_BUFFER_LENGTH;this.opt=g||{};this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags;
this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase";this.tags=[];this.closed=this.closedRoot=this.sawRoot=!1;this.tag=this.error=null;this.strict=!!c;this.noscript=!(!c&&!this.opt.noscript);this.state=a.BEGIN;this.ENTITIES=(this.strictEntities=this.opt.strictEntities)?Object.create(m.XML_ENTITIES):Object.create(m.ENTITIES);this.attribList=[];this.opt.xmlns&&(this.ns=Object.create(O));if(this.trackPosition=!1!==this.opt.position)this.position=this.line=this.column=0;this.onready&&this.onready(void 0)}
function w(c,g){if(!(this instanceof w))return new w(c,g);L.apply(this);this._parser=new f(c,g);this.readable=this.writable=!0;var r=this;this._parser.onend=function(){r.emit("end")};this._parser.onerror=function(K){r.emit("error",K);r._parser.error=null};this._decoder=null;I.forEach(function(K){Object.defineProperty(r,"on"+K,{get:function(){return r._parser["on"+K]},set:function(R){if(!R)return r.removeAllListeners(K),r._parser["on"+K]=R;r.on(K,R)},enumerable:!0,configurable:!1})})}function d(c){return" "===
c||"\n"===c||"\r"===c||"\t"===c}function p(c){return'"'===c||"'"===c}function t(c,g,r){c.textNode&&u(c);c[g]&&c[g](r)}function u(c){c.textNode=h(c.opt,c.textNode);c.textNode&&c.ontext&&c.ontext(c.textNode);c.textNode=""}function h(c,g){c.trim&&(g=g.trim());c.normalize&&(g=g.replace(/\s+/g," "));return g}function k(c,g){u(c);c.trackPosition&&(g+="\nLine: "+c.line+"\nColumn: "+c.column+"\nChar: "+c.c);g=Error(g);c.error=g;c.onerror&&c.onerror(g);return c}function q(c){c.sawRoot&&!c.closedRoot&&F(c,
"Unclosed root tag");c.state!==a.BEGIN&&c.state!==a.BEGIN_WHITESPACE&&c.state!==a.TEXT&&k(c,"Unexpected end");u(c);c.c="";c.closed=!0;c.onend&&c.onend(void 0);f.call(c,c.strict,c.opt);return c}function F(c,g){if("object"!==typeof c||!(c instanceof f))throw Error("bad call to strictFail");c.strict&&k(c,g)}function v(c,g){var r=0>c.indexOf(":")?["",c]:c.split(":"),K=r[0];r=r[1];g&&"xmlns"===c&&(K="xmlns",r="");return{prefix:K,local:r}}function B(c){c.strict||(c.attribName=c.attribName[c.looseCase]());
if(-1===c.attribList.indexOf(c.attribName)&&!c.tag.attributes.hasOwnProperty(c.attribName))if(c.opt.xmlns){var g=v(c.attribName,!0),r=g.local;if("xmlns"===g.prefix)if("xml"===r&&c.attribValue!==T)F(c,"xml: prefix must be bound to "+T+"\nActual: "+c.attribValue);else if("xmlns"===r&&c.attribValue!==S)F(c,"xmlns: prefix must be bound to "+S+"\nActual: "+c.attribValue);else{g=c.tag;var K=c.tags[c.tags.length-1]||c;g.ns===K.ns&&(g.ns=Object.create(K.ns));g.ns[r]=c.attribValue}c.attribList.push([c.attribName,
c.attribValue])}else c.tag.attributes[c.attribName]=c.attribValue,t(c,"onattribute",{name:c.attribName,value:c.attribValue});c.attribName=c.attribValue=""}function l(c,g){if(c.opt.xmlns){var r=c.tag,K=v(c.tagName);r.prefix=K.prefix;r.local=K.local;r.uri=r.ns[K.prefix]||"";r.prefix&&!r.uri&&(F(c,"Unbound namespace prefix: "+JSON.stringify(c.tagName)),r.uri=K.prefix);K=c.tags[c.tags.length-1]||c;r.ns&&K.ns!==r.ns&&Object.keys(r.ns).forEach(function(Z){t(c,"onopennamespace",{prefix:Z,uri:r.ns[Z]})});
K=0;for(var R=c.attribList.length;K<R;K++){var P=c.attribList[K],E=P[0],z=P[1],Q=v(E,!0);P=Q.prefix;var Y=""===P?"":r.ns[P]||"";z={name:E,value:z,prefix:P,local:Q.local,uri:Y};P&&"xmlns"!==P&&!Y&&(F(c,"Unbound namespace prefix: "+JSON.stringify(P)),z.uri=P);c.tag.attributes[E]=z;t(c,"onattribute",z)}c.attribList.length=0}c.tag.isSelfClosing=!!g;c.sawRoot=!0;c.tags.push(c.tag);t(c,"onopentag",c.tag);g||(c.noscript||"script"!==c.tagName.toLowerCase()?c.state=a.TEXT:c.state=a.SCRIPT,c.tag=null,c.tagName=
"");c.attribName=c.attribValue="";c.attribList.length=0}function A(c){if(c.tagName){if(c.script){if("script"!==c.tagName){c.script+="</"+c.tagName+">";c.tagName="";c.state=a.SCRIPT;return}t(c,"onscript",c.script);c.script=""}var g=c.tags.length,r=c.tagName;c.strict||(r=r[c.looseCase]());for(var K=r;g--;)if(c.tags[g].name!==K)F(c,"Unexpected close tag");else break;if(0>g)F(c,"Unmatched closing tag: "+c.tagName),c.textNode+="</"+c.tagName+">";else{c.tagName=r;for(r=c.tags.length;r-- >g;){var R=c.tag=
c.tags.pop();c.tagName=c.tag.name;t(c,"onclosetag",c.tagName);for(var P in R.ns);K=c.tags[c.tags.length-1]||c;c.opt.xmlns&&R.ns!==K.ns&&Object.keys(R.ns).forEach(function(E){t(c,"onclosenamespace",{prefix:E,uri:R.ns[E]})})}0===g&&(c.closedRoot=!0);c.tagName=c.attribValue=c.attribName="";c.attribList.length=0}}else F(c,"Weird empty close tag."),c.textNode+="</>";c.state=a.TEXT}function n(c){var g=c.entity,r=g.toLowerCase(),K="";if(c.ENTITIES[g])return c.ENTITIES[g];if(c.ENTITIES[r])return c.ENTITIES[r];
g=r;if("#"===g.charAt(0))if("x"===g.charAt(1)){g=g.slice(2);var R=parseInt(g,16);K=R.toString(16)}else g=g.slice(1),R=parseInt(g,10),K=R.toString(10);g=g.replace(/^0+/,"");return isNaN(R)||K.toLowerCase()!==g?(F(c,"Invalid character entity"),"&"+c.entity+";"):String.fromCodePoint(R)}function x(c,g){"<"===g?(c.state=a.OPEN_WAKA,c.startTagPosition=c.position):d(g)||(F(c,"Non-whitespace before first tag."),c.textNode=g,c.state=a.TEXT)}function G(c,g){var r="";g<c.length&&(r=c.charAt(g));return r}m.parser=
function(c,g){return new f(c,g)};m.SAXParser=f;m.SAXStream=w;m.createStream=function(c,g){return new w(c,g)};m.MAX_BUFFER_LENGTH=65536;var H="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" ");m.EVENTS="text processinginstruction sgmldeclaration doctype comment opentagstart attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" ");Object.create||(Object.create=function(c){function g(){}
g.prototype=c;return new g});Object.keys||(Object.keys=function(c){var g=[],r;for(r in c)c.hasOwnProperty(r)&&g.push(r);return g});f.prototype={end:function(){q(this)},write:function(c){if(this.error)throw this.error;if(this.closed)return k(this,"Cannot write after close. Assign an onready handler.");if(null===c)return q(this);"object"===typeof c&&(c=c.toString());for(var g=0,r;;){this.c=r=G(c,g++);if(!r)break;this.trackPosition&&(this.position++,"\n"===r?(this.line++,this.column=0):this.column++);
switch(this.state){case a.BEGIN:this.state=a.BEGIN_WHITESPACE;if("\ufeff"===r)continue;x(this,r);continue;case a.BEGIN_WHITESPACE:x(this,r);continue;case a.TEXT:if(this.sawRoot&&!this.closedRoot){for(var K=g-1;r&&"<"!==r&&"&"!==r;)(r=G(c,g++))&&this.trackPosition&&(this.position++,"\n"===r?(this.line++,this.column=0):this.column++);this.textNode+=c.substring(K,g-1)}"<"!==r||this.sawRoot&&this.closedRoot&&!this.strict?(d(r)||this.sawRoot&&!this.closedRoot||F(this,"Text data outside of root node."),
"&"===r?this.state=a.TEXT_ENTITY:this.textNode+=r):(this.state=a.OPEN_WAKA,this.startTagPosition=this.position);continue;case a.SCRIPT:"<"===r?this.state=a.SCRIPT_ENDING:this.script+=r;continue;case a.SCRIPT_ENDING:"/"===r?this.state=a.CLOSE_TAG:(this.script+="<"+r,this.state=a.SCRIPT);continue;case a.OPEN_WAKA:"!"===r?(this.state=a.SGML_DECL,this.sgmlDecl=""):d(r)||(V.test(r)?(this.state=a.OPEN_TAG,this.tagName=r):"/"===r?(this.state=a.CLOSE_TAG,this.tagName=""):"?"===r?(this.state=a.PROC_INST,this.procInstName=
this.procInstBody=""):(F(this,"Unencoded <"),this.startTagPosition+1<this.position&&(r=Array(this.position-this.startTagPosition).join(" ")+r),this.textNode+="<"+r,this.state=a.TEXT));continue;case a.SGML_DECL:(this.sgmlDecl+r).toUpperCase()===N?(t(this,"onopencdata"),this.state=a.CDATA,this.cdata=this.sgmlDecl=""):"--"===this.sgmlDecl+r?(this.state=a.COMMENT,this.sgmlDecl=this.comment=""):(this.sgmlDecl+r).toUpperCase()===M?(this.state=a.DOCTYPE,(this.doctype||this.sawRoot)&&F(this,"Inappropriately located doctype declaration"),
this.sgmlDecl=this.doctype=""):">"===r?(t(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=a.TEXT):(p(r)&&(this.state=a.SGML_DECL_QUOTED),this.sgmlDecl+=r);continue;case a.SGML_DECL_QUOTED:r===this.q&&(this.state=a.SGML_DECL,this.q="");this.sgmlDecl+=r;continue;case a.DOCTYPE:">"===r?(this.state=a.TEXT,t(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=r,"["===r?this.state=a.DOCTYPE_DTD:p(r)&&(this.state=a.DOCTYPE_QUOTED,this.q=r));continue;case a.DOCTYPE_QUOTED:this.doctype+=
r;r===this.q&&(this.q="",this.state=a.DOCTYPE);continue;case a.DOCTYPE_DTD:this.doctype+=r;"]"===r?this.state=a.DOCTYPE:p(r)&&(this.state=a.DOCTYPE_DTD_QUOTED,this.q=r);continue;case a.DOCTYPE_DTD_QUOTED:this.doctype+=r;r===this.q&&(this.state=a.DOCTYPE_DTD,this.q="");continue;case a.COMMENT:"-"===r?this.state=a.COMMENT_ENDING:this.comment+=r;continue;case a.COMMENT_ENDING:"-"===r?(this.state=a.COMMENT_ENDED,(this.comment=h(this.opt,this.comment))&&t(this,"oncomment",this.comment),this.comment=""):
(this.comment+="-"+r,this.state=a.COMMENT);continue;case a.COMMENT_ENDED:">"!==r?(F(this,"Malformed comment"),this.comment+="--"+r,this.state=a.COMMENT):this.state=a.TEXT;continue;case a.CDATA:"]"===r?this.state=a.CDATA_ENDING:this.cdata+=r;continue;case a.CDATA_ENDING:"]"===r?this.state=a.CDATA_ENDING_2:(this.cdata+="]"+r,this.state=a.CDATA);continue;case a.CDATA_ENDING_2:">"===r?(this.cdata&&t(this,"oncdata",this.cdata),t(this,"onclosecdata"),this.cdata="",this.state=a.TEXT):"]"===r?this.cdata+=
"]":(this.cdata+="]]"+r,this.state=a.CDATA);continue;case a.PROC_INST:"?"===r?this.state=a.PROC_INST_ENDING:d(r)?this.state=a.PROC_INST_BODY:this.procInstName+=r;continue;case a.PROC_INST_BODY:if(!this.procInstBody&&d(r))continue;else"?"===r?this.state=a.PROC_INST_ENDING:this.procInstBody+=r;continue;case a.PROC_INST_ENDING:">"===r?(t(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=a.TEXT):(this.procInstBody+="?"+r,
this.state=a.PROC_INST_BODY);continue;case a.OPEN_TAG:if(W.test(r))this.tagName+=r;else{this.strict||(this.tagName=this.tagName[this.looseCase]());K=this.tags[this.tags.length-1]||this;var R=this.tag={name:this.tagName,attributes:{}};this.opt.xmlns&&(R.ns=K.ns);this.attribList.length=0;t(this,"onopentagstart",R);">"===r?l(this):"/"===r?this.state=a.OPEN_TAG_SLASH:(d(r)||F(this,"Invalid character in tag name"),this.state=a.ATTRIB)}continue;case a.OPEN_TAG_SLASH:">"===r?(l(this,!0),A(this)):(F(this,
"Forward-slash in opening tag not followed by >"),this.state=a.ATTRIB);continue;case a.ATTRIB:if(d(r))continue;else">"===r?l(this):"/"===r?this.state=a.OPEN_TAG_SLASH:V.test(r)?(this.attribName=r,this.attribValue="",this.state=a.ATTRIB_NAME):F(this,"Invalid attribute name");continue;case a.ATTRIB_NAME:"="===r?this.state=a.ATTRIB_VALUE:">"===r?(F(this,"Attribute without value"),this.attribValue=this.attribName,B(this),l(this)):d(r)?this.state=a.ATTRIB_NAME_SAW_WHITE:W.test(r)?this.attribName+=r:F(this,
"Invalid attribute name");continue;case a.ATTRIB_NAME_SAW_WHITE:if("="===r)this.state=a.ATTRIB_VALUE;else if(d(r))continue;else F(this,"Attribute without value"),this.attribValue=this.tag.attributes[this.attribName]="",t(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===r?l(this):V.test(r)?(this.attribName=r,this.state=a.ATTRIB_NAME):(F(this,"Invalid attribute name"),this.state=a.ATTRIB);continue;case a.ATTRIB_VALUE:if(d(r))continue;else p(r)?(this.q=r,this.state=a.ATTRIB_VALUE_QUOTED):
(F(this,"Unquoted attribute value"),this.state=a.ATTRIB_VALUE_UNQUOTED,this.attribValue=r);continue;case a.ATTRIB_VALUE_QUOTED:if(r!==this.q){"&"===r?this.state=a.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=r;continue}B(this);this.q="";this.state=a.ATTRIB_VALUE_CLOSED;continue;case a.ATTRIB_VALUE_CLOSED:d(r)?this.state=a.ATTRIB:">"===r?l(this):"/"===r?this.state=a.OPEN_TAG_SLASH:V.test(r)?(F(this,"No whitespace between attributes"),this.attribName=r,this.attribValue="",this.state=a.ATTRIB_NAME):F(this,
"Invalid attribute name");continue;case a.ATTRIB_VALUE_UNQUOTED:if(">"!==r&&!d(r)){"&"===r?this.state=a.ATTRIB_VALUE_ENTITY_U:this.attribValue+=r;continue}B(this);">"===r?l(this):this.state=a.ATTRIB;continue;case a.CLOSE_TAG:if(this.tagName)">"===r?A(this):W.test(r)?this.tagName+=r:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=a.SCRIPT):(d(r)||F(this,"Invalid tagname in closing tag"),this.state=a.CLOSE_TAG_SAW_WHITE);else if(d(r))continue;else V.test(r)?this.tagName=r:this.script?
(this.script+="</"+r,this.state=a.SCRIPT):F(this,"Invalid tagname in closing tag.");continue;case a.CLOSE_TAG_SAW_WHITE:if(d(r))continue;">"===r?A(this):F(this,"Invalid characters in closing tag");continue;case a.TEXT_ENTITY:case a.ATTRIB_VALUE_ENTITY_Q:case a.ATTRIB_VALUE_ENTITY_U:switch(this.state){case a.TEXT_ENTITY:var P=a.TEXT;var E="textNode";break;case a.ATTRIB_VALUE_ENTITY_Q:P=a.ATTRIB_VALUE_QUOTED;E="attribValue";break;case a.ATTRIB_VALUE_ENTITY_U:P=a.ATTRIB_VALUE_UNQUOTED,E="attribValue"}";"===
r?(this[E]+=n(this),this.entity="",this.state=P):(this.entity.length?b:U).test(r)?this.entity+=r:(F(this,"Invalid character in entity name"),this[E]+="&"+this.entity+r,this.entity="",this.state=P);continue;default:throw Error(this,"Unknown state: "+this.state);}}if(this.position>=this.bufferCheckPosition){c=Math.max(m.MAX_BUFFER_LENGTH,10);r=g=0;for(P=H.length;r<P;r++){E=this[H[r]].length;if(E>c)switch(H[r]){case "textNode":u(this);break;case "cdata":t(this,"oncdata",this.cdata);this.cdata="";break;
case "script":t(this,"onscript",this.script);this.script="";break;default:k(this,"Max buffer length exceeded: "+H[r])}g=Math.max(g,E)}this.bufferCheckPosition=m.MAX_BUFFER_LENGTH-g+this.position}return this},resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){u(this);""!==this.cdata&&(t(this,"oncdata",this.cdata),this.cdata="");""!==this.script&&(t(this,"onscript",this.script),this.script="")}};try{var L=y("stream").Stream}catch(c){L=function(){}}var I=
m.EVENTS.filter(function(c){return"error"!==c&&"end"!==c});w.prototype=Object.create(L.prototype,{constructor:{value:w}});w.prototype.write=function(c){"function"===typeof C&&"function"===typeof C.isBuffer&&C.isBuffer(c)&&(this._decoder||(this._decoder=new (y("string_decoder").StringDecoder)("utf8")),c=this._decoder.write(c));this._parser.write(c.toString());this.emit("data",c);return!0};w.prototype.end=function(c){c&&c.length&&this.write(c);this._parser.end();return!0};w.prototype.on=function(c,
g){var r=this;r._parser["on"+c]||-1===I.indexOf(c)||(r._parser["on"+c]=function(){var K=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);K.splice(0,0,c);r.emit.apply(r,K)});return L.prototype.on.call(r,c,g)};var N="[CDATA[",M="DOCTYPE",T="http://www.w3.org/XML/1998/namespace",S="http://www.w3.org/2000/xmlns/",O={xml:T,xmlns:S},V=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
W=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,U=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,b=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,
a=0;m.STATE={BEGIN:a++,BEGIN_WHITESPACE:a++,TEXT:a++,TEXT_ENTITY:a++,OPEN_WAKA:a++,SGML_DECL:a++,SGML_DECL_QUOTED:a++,DOCTYPE:a++,DOCTYPE_QUOTED:a++,DOCTYPE_DTD:a++,DOCTYPE_DTD_QUOTED:a++,COMMENT_STARTING:a++,COMMENT:a++,COMMENT_ENDING:a++,COMMENT_ENDED:a++,CDATA:a++,CDATA_ENDING:a++,CDATA_ENDING_2:a++,PROC_INST:a++,PROC_INST_BODY:a++,PROC_INST_ENDING:a++,OPEN_TAG:a++,OPEN_TAG_SLASH:a++,ATTRIB:a++,ATTRIB_NAME:a++,ATTRIB_NAME_SAW_WHITE:a++,ATTRIB_VALUE:a++,ATTRIB_VALUE_QUOTED:a++,ATTRIB_VALUE_CLOSED:a++,
ATTRIB_VALUE_UNQUOTED:a++,ATTRIB_VALUE_ENTITY_Q:a++,ATTRIB_VALUE_ENTITY_U:a++,CLOSE_TAG:a++,CLOSE_TAG_SAW_WHITE:a++,SCRIPT:a++,SCRIPT_ENDING:a++};m.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};m.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,
THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,
laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,
Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,
lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,
ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(m.ENTITIES).forEach(function(c){var g=m.ENTITIES[c];g="number"===typeof g?String.fromCharCode(g):g;m.ENTITIES[c]=g});for(var e in m.STATE)m.STATE[m.STATE[e]]=e;a=m.STATE;String.fromCodePoint||function(){var c=String.fromCharCode,g=Math.floor,r=function(){var K=[],R=-1,
P=arguments.length;if(!P)return"";for(var E="";++R<P;){var z=Number(arguments[R]);if(!isFinite(z)||0>z||1114111<z||g(z)!==z)throw RangeError("Invalid code point: "+z);if(65535>=z)K.push(z);else{z-=65536;var Q=(z>>10)+55296;z=z%1024+56320;K.push(Q,z)}if(R+1===P||16384<K.length)E+=c.apply(null,K),K.length=0}return E};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:r,configurable:!0,writable:!0}):String.fromCodePoint=r}()})("undefined"===typeof D?this.sax={}:D)}).call(this)}).call(this,
y("buffer").Buffer)},{buffer:15,stream:36,string_decoder:70}],36:[function(y,J,D){function C(){m.call(this)}J.exports=C;var m=y("events").EventEmitter;y("inherits")(C,m);C.Readable=y("readable-stream/lib/_stream_readable.js");C.Writable=y("readable-stream/lib/_stream_writable.js");C.Duplex=y("readable-stream/lib/_stream_duplex.js");C.Transform=y("readable-stream/lib/_stream_transform.js");C.PassThrough=y("readable-stream/lib/_stream_passthrough.js");C.finished=y("readable-stream/lib/internal/streams/end-of-stream.js");
C.pipeline=y("readable-stream/lib/internal/streams/pipeline.js");C.Stream=C;C.prototype.pipe=function(f,w){function d(v){f.writable&&!1===f.write(v)&&q.pause&&q.pause()}function p(){q.readable&&q.resume&&q.resume()}function t(){F||(F=!0,f.end())}function u(){F||(F=!0,"function"===typeof f.destroy&&f.destroy())}function h(v){k();if(0===m.listenerCount(this,"error"))throw v;}function k(){q.removeListener("data",d);f.removeListener("drain",p);q.removeListener("end",t);q.removeListener("close",u);q.removeListener("error",
h);f.removeListener("error",h);q.removeListener("end",k);q.removeListener("close",k);f.removeListener("close",k)}var q=this;q.on("data",d);f.on("drain",p);f._isStdio||w&&!1===w.end||(q.on("end",t),q.on("close",u));var F=!1;q.on("error",h);f.on("error",h);q.on("end",k);q.on("close",k);f.on("close",k);f.emit("pipe",q);return f}},{events:17,inherits:20,"readable-stream/lib/_stream_duplex.js":38,"readable-stream/lib/_stream_passthrough.js":39,"readable-stream/lib/_stream_readable.js":40,"readable-stream/lib/_stream_transform.js":41,
"readable-stream/lib/_stream_writable.js":42,"readable-stream/lib/internal/streams/end-of-stream.js":46,"readable-stream/lib/internal/streams/pipeline.js":48}],37:[function(y,J,D){function C(d,p){d.prototype=Object.create(p.prototype);d.prototype.constructor=d;d.__proto__=p}function m(d,p,t){t||=Error;var u=function(h){function k(q,F,v){var B=h.call;q="string"===typeof p?p:p(q,F,v);return B.call(h,this,q)||this}C(k,h);return k}(t);u.prototype.name=t.name;u.prototype.code=d;w[d]=u}function f(d,p){if(Array.isArray(d)){var t=
d.length;d=d.map(function(u){return String(u)});return 2<t?"one of ".concat(p," ").concat(d.slice(0,t-1).join(", "),", or ")+d[t-1]:2===t?"one of ".concat(p," ").concat(d[0]," or ").concat(d[1]):"of ".concat(p," ").concat(d[0])}return"of ".concat(p," ").concat(String(d))}var w={};m("ERR_INVALID_OPT_VALUE",function(d,p){return'The value "'+p+'" is invalid for option "'+d+'"'},TypeError);m("ERR_INVALID_ARG_TYPE",function(d,p,t){var u;if(u="string"===typeof p)u="not "===p.substr(0,4);u?(u="must not be",
p=p.replace(/^not /,"")):u="must be";var h=void 0;if(void 0===h||h>d.length)h=d.length;" argument"===d.substring(h-9,h)?d="The ".concat(d," ").concat(u," ").concat(f(p,"type")):(h=void 0,"number"!==typeof h&&(h=0),h=h+1>d.length?!1:-1!==d.indexOf(".",h),h=h?"property":"argument",d='The "'.concat(d,'" ').concat(h," ").concat(u," ").concat(f(p,"type")));return d+=". Received type ".concat(typeof t)},TypeError);m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");m("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+
d+" method is not implemented"});m("ERR_STREAM_PREMATURE_CLOSE","Premature close");m("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"});m("ERR_MULTIPLE_CALLBACK","Callback called multiple times");m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");m("ERR_STREAM_WRITE_AFTER_END","write after end");m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);m("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError);m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT",
"stream.unshift() after end event");J.exports.codes=w},{}],38:[function(y,J,D){(function(C){(function(){function m(k){if(!(this instanceof m))return new m(k);p.call(this,k);t.call(this,k);this.allowHalfOpen=!0;k&&(!1===k.readable&&(this.readable=!1),!1===k.writable&&(this.writable=!1),!1===k.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",f)))}function f(){this._writableState.ended||C.nextTick(w,this)}function w(k){k.end()}var d=Object.keys||function(k){var q=[],F;for(F in k)q.push(F);return q};
J.exports=m;var p=y("./_stream_readable"),t=y("./_stream_writable");y("inherits")(m,p);d=d(t.prototype);for(var u=0;u<d.length;u++){var h=d[u];m.prototype[h]||(m.prototype[h]=t.prototype[h])}Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(m.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(m.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(m.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(k){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=k,this._writableState.destroyed=k)}})}).call(this)}).call(this,y("_process"))},{"./_stream_readable":40,
"./_stream_writable":42,_process:27,inherits:20}],39:[function(y,J,D){function C(f){if(!(this instanceof C))return new C(f);m.call(this,f)}J.exports=C;var m=y("./_stream_transform");y("inherits")(C,m);C.prototype._transform=function(f,w,d){d(null,f)}},{"./_stream_transform":41,inherits:20}],40:[function(y,J,D){(function(C,m){(function(){function f(E,z,Q){if("function"===typeof E.prependListener)return E.prependListener(z,Q);if(E._events&&E._events[z])Array.isArray(E._events[z])?E._events[z].unshift(Q):
E._events[z]=[Q,E._events[z]];else E.on(z,Q)}function w(E,z,Q){I=I||y("./_stream_duplex");E=E||{};"boolean"!==typeof Q&&(Q=z instanceof I);this.objectMode=!!E.objectMode;Q&&(this.objectMode=this.objectMode||!!E.readableObjectMode);this.highWaterMark=W(this,E,"readableHighWaterMark",Q);this.buffer=new V;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=
!1;this.paused=!0;this.emitClose=!1!==E.emitClose;this.autoDestroy=!!E.autoDestroy;this.destroyed=!1;this.defaultEncoding=E.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;E.encoding&&(g||(g=y("string_decoder/").StringDecoder),this.decoder=new g(E.encoding),this.encoding=E.encoding)}function d(E){I=I||y("./_stream_duplex");if(!(this instanceof d))return new d(E);this._readableState=new w(E,this,this instanceof I);this.readable=!0;E&&("function"===typeof E.read&&
(this._read=E.read),"function"===typeof E.destroy&&(this._destroy=E.destroy));N.call(this)}function p(E,z,Q,Y,Z){O("readableAddChunk",z);var X=E._readableState;if(null===z)X.reading=!1,O("onEofChunk"),X.ended||(X.decoder&&(z=X.decoder.end())&&z.length&&(X.buffer.push(z),X.length+=X.objectMode?1:z.length),X.ended=!0,X.sync?h(E):(X.needReadable=!1,X.emittedReadable||(X.emittedReadable=!0,k(E))));else{if(!Z){Z=z;var da;M.isBuffer(Z)||Z instanceof T||"string"===typeof Z||void 0===Z||X.objectMode||(da=
new b("chunk",["string","Buffer","Uint8Array"],Z));var ea=da}if(ea)R(E,ea);else if(X.objectMode||z&&0<z.length)if("string"===typeof z||X.objectMode||Object.getPrototypeOf(z)===M.prototype||(z=M.from(z)),Y)X.endEmitted?R(E,new c):t(E,X,z,!0);else if(X.ended)R(E,new a);else{if(X.destroyed)return!1;X.reading=!1;X.decoder&&!Q?(z=X.decoder.write(z),X.objectMode||0!==z.length?t(E,X,z,!1):q(E,X)):t(E,X,z,!1)}else Y||(X.reading=!1,q(E,X))}return!X.ended&&(X.length<X.highWaterMark||0===X.length)}function t(E,
z,Q,Y){z.flowing&&0===z.length&&!z.sync?(z.awaitDrain=0,E.emit("data",Q)):(z.length+=z.objectMode?1:Q.length,Y?z.buffer.unshift(Q):z.buffer.push(Q),z.needReadable&&h(E));q(E,z)}function u(E,z){if(0>=E||0===z.length&&z.ended)return 0;if(z.objectMode)return 1;if(E!==E)return z.flowing&&z.length?z.buffer.head.data.length:z.length;if(E>z.highWaterMark){var Q=E;1073741824<=Q?Q=1073741824:(Q--,Q|=Q>>>1,Q|=Q>>>2,Q|=Q>>>4,Q|=Q>>>8,Q|=Q>>>16,Q++);z.highWaterMark=Q}return E<=z.length?E:z.ended?z.length:(z.needReadable=
!0,0)}function h(E){var z=E._readableState;O("emitReadable",z.needReadable,z.emittedReadable);z.needReadable=!1;z.emittedReadable||(O("emitReadable",z.flowing),z.emittedReadable=!0,C.nextTick(k,E))}function k(E){var z=E._readableState;O("emitReadable_",z.destroyed,z.length,z.ended);z.destroyed||!z.length&&!z.ended||(E.emit("readable"),z.emittedReadable=!1);z.needReadable=!z.flowing&&!z.ended&&z.length<=z.highWaterMark;n(E)}function q(E,z){z.readingMore||(z.readingMore=!0,C.nextTick(F,E,z))}function F(E,
z){for(;!z.reading&&!z.ended&&(z.length<z.highWaterMark||z.flowing&&0===z.length);){var Q=z.length;O("maybeReadMore read 0");E.read(0);if(Q===z.length)break}z.readingMore=!1}function v(E){return function(){var z=E._readableState;O("pipeOnDrain",z.awaitDrain);z.awaitDrain&&z.awaitDrain--;0===z.awaitDrain&&E.listeners("data").length&&(z.flowing=!0,n(E))}}function B(E){var z=E._readableState;z.readableListening=0<E.listenerCount("readable");z.resumeScheduled&&!z.paused?z.flowing=!0:0<E.listenerCount("data")&&
E.resume()}function l(E){O("readable nexttick read 0");E.read(0)}function A(E,z){O("resume",z.reading);z.reading||E.read(0);z.resumeScheduled=!1;E.emit("resume");n(E);z.flowing&&!z.reading&&E.read(0)}function n(E){var z=E._readableState;for(O("flow",z.flowing);z.flowing&&null!==E.read(););}function x(E,z){if(0===z.length)return null;z.objectMode?E=z.buffer.shift():!E||E>=z.length?(E=z.decoder?z.buffer.join(""):1===z.buffer.length?z.buffer.first():z.buffer.concat(z.length),z.buffer.clear()):E=z.buffer.consume(E,
z.decoder);return E}function G(E){var z=E._readableState;O("endReadable",z.endEmitted);z.endEmitted||(z.ended=!0,C.nextTick(H,z,E))}function H(E,z){O("endReadableNT",E.endEmitted,E.length);E.endEmitted||0!==E.length||(E.endEmitted=!0,z.readable=!1,z.emit("end"),E.autoDestroy&&(E=z._writableState,(!E||E.autoDestroy&&E.finished)&&z.destroy()))}function L(E,z){for(var Q=0,Y=E.length;Q<Y;Q++)if(E[Q]===z)return Q;return-1}J.exports=d;var I;d.ReadableState=w;y("events");var N=y("./internal/streams/stream"),
M=y("buffer").Buffer,T=m.Uint8Array||function(){},S=y("util");var O=S&&S.debuglog?S.debuglog("stream"):function(){};var V=y("./internal/streams/buffer_list");S=y("./internal/streams/destroy");var W=y("./internal/streams/state").getHighWaterMark,U=y("../errors").codes,b=U.ERR_INVALID_ARG_TYPE,a=U.ERR_STREAM_PUSH_AFTER_EOF,e=U.ERR_METHOD_NOT_IMPLEMENTED,c=U.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,g,r,K;y("inherits")(d,N);var R=S.errorOrDestroy,P=["error","close","destroy","pause","resume"];Object.defineProperty(d.prototype,
"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(E){this._readableState&&(this._readableState.destroyed=E)}});d.prototype.destroy=S.destroy;d.prototype._undestroy=S.undestroy;d.prototype._destroy=function(E,z){z(E)};d.prototype.push=function(E,z){var Q=this._readableState;if(Q.objectMode)var Y=!0;else"string"===typeof E&&(z=z||Q.defaultEncoding,z!==Q.encoding&&(E=M.from(E,z),z=""),Y=!0);return p(this,E,z,!1,Y)};d.prototype.unshift=
function(E){return p(this,E,null,!0,!1)};d.prototype.isPaused=function(){return!1===this._readableState.flowing};d.prototype.setEncoding=function(E){g||(g=y("string_decoder/").StringDecoder);E=new g(E);this._readableState.decoder=E;this._readableState.encoding=this._readableState.decoder.encoding;for(var z=this._readableState.buffer.head,Q="";null!==z;)Q+=E.write(z.data),z=z.next;this._readableState.buffer.clear();""!==Q&&this._readableState.buffer.push(Q);this._readableState.length=Q.length;return this};
d.prototype.read=function(E){O("read",E);E=parseInt(E,10);var z=this._readableState,Q=E;0!==E&&(z.emittedReadable=!1);if(0===E&&z.needReadable&&((0!==z.highWaterMark?z.length>=z.highWaterMark:0<z.length)||z.ended))return O("read: emitReadable",z.length,z.ended),0===z.length&&z.ended?G(this):h(this),null;E=u(E,z);if(0===E&&z.ended)return 0===z.length&&G(this),null;var Y=z.needReadable;O("need readable",Y);if(0===z.length||z.length-E<z.highWaterMark)Y=!0,O("length less than watermark",Y);z.ended||z.reading?
O("reading or ended",!1):Y&&(O("do read"),z.reading=!0,z.sync=!0,0===z.length&&(z.needReadable=!0),this._read(z.highWaterMark),z.sync=!1,z.reading||(E=u(Q,z)));Y=0<E?x(E,z):null;null===Y?(z.needReadable=z.length<=z.highWaterMark,E=0):(z.length-=E,z.awaitDrain=0);0===z.length&&(z.ended||(z.needReadable=!0),Q!==E&&z.ended&&G(this));null!==Y&&this.emit("data",Y);return Y};d.prototype._read=function(E){R(this,new e("_read()"))};d.prototype.pipe=function(E,z){function Q(ca,ha){O("onunpipe");ca===ba&&ha&&
!1===ha.hasUnpiped&&(ha.hasUnpiped=!0,O("cleanup"),E.removeListener("close",da),E.removeListener("finish",ea),E.removeListener("drain",ia),E.removeListener("error",X),E.removeListener("unpipe",Q),ba.removeListener("end",Y),ba.removeListener("end",fa),ba.removeListener("data",Z),ja=!0,!aa.awaitDrain||E._writableState&&!E._writableState.needDrain||ia())}function Y(){O("onend");E.end()}function Z(ca){O("ondata");ca=E.write(ca);O("dest.write",ca);!1===ca&&((1===aa.pipesCount&&aa.pipes===E||1<aa.pipesCount&&
-1!==L(aa.pipes,E))&&!ja&&(O("false write response, pause",aa.awaitDrain),aa.awaitDrain++),ba.pause())}function X(ca){O("onerror",ca);fa();E.removeListener("error",X);0===E.listeners("error").length&&R(E,ca)}function da(){E.removeListener("finish",ea);fa()}function ea(){O("onfinish");E.removeListener("close",da);fa()}function fa(){O("unpipe");ba.unpipe(E)}var ba=this,aa=this._readableState;switch(aa.pipesCount){case 0:aa.pipes=E;break;case 1:aa.pipes=[aa.pipes,E];break;default:aa.pipes.push(E)}aa.pipesCount+=
1;O("pipe count=%d opts=%j",aa.pipesCount,z);z=z&&!1===z.end||E===C.stdout||E===C.stderr?fa:Y;if(aa.endEmitted)C.nextTick(z);else ba.once("end",z);E.on("unpipe",Q);var ia=v(ba);E.on("drain",ia);var ja=!1;ba.on("data",Z);f(E,"error",X);E.once("close",da);E.once("finish",ea);E.emit("pipe",ba);aa.flowing||(O("pipe resume"),ba.resume());return E};d.prototype.unpipe=function(E){var z=this._readableState,Q={hasUnpiped:!1};if(0===z.pipesCount)return this;if(1===z.pipesCount){if(E&&E!==z.pipes)return this;
E||(E=z.pipes);z.pipes=null;z.pipesCount=0;z.flowing=!1;E&&E.emit("unpipe",this,Q);return this}if(!E){E=z.pipes;Q=z.pipesCount;z.pipes=null;z.pipesCount=0;z.flowing=!1;for(z=0;z<Q;z++)E[z].emit("unpipe",this,{hasUnpiped:!1});return this}var Y=L(z.pipes,E);if(-1===Y)return this;z.pipes.splice(Y,1);--z.pipesCount;1===z.pipesCount&&(z.pipes=z.pipes[0]);E.emit("unpipe",this,Q);return this};d.prototype.on=function(E,z){z=N.prototype.on.call(this,E,z);var Q=this._readableState;"data"===E?(Q.readableListening=
0<this.listenerCount("readable"),!1!==Q.flowing&&this.resume()):"readable"!==E||Q.endEmitted||Q.readableListening||(Q.readableListening=Q.needReadable=!0,Q.flowing=!1,Q.emittedReadable=!1,O("on readable",Q.length,Q.reading),Q.length?h(this):Q.reading||C.nextTick(l,this));return z};d.prototype.addListener=d.prototype.on;d.prototype.removeListener=function(E,z){z=N.prototype.removeListener.call(this,E,z);"readable"===E&&C.nextTick(B,this);return z};d.prototype.removeAllListeners=function(E){var z=N.prototype.removeAllListeners.apply(this,
arguments);"readable"!==E&&void 0!==E||C.nextTick(B,this);return z};d.prototype.resume=function(){var E=this._readableState;E.flowing||(O("resume"),E.flowing=!E.readableListening,E.resumeScheduled||(E.resumeScheduled=!0,C.nextTick(A,this,E)));E.paused=!1;return this};d.prototype.pause=function(){O("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(O("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};d.prototype.wrap=
function(E){var z=this,Q=this._readableState,Y=!1;E.on("end",function(){O("wrapped end");if(Q.decoder&&!Q.ended){var X=Q.decoder.end();X&&X.length&&z.push(X)}z.push(null)});E.on("data",function(X){O("wrapped data");Q.decoder&&(X=Q.decoder.write(X));Q.objectMode&&(null===X||void 0===X)||!(Q.objectMode||X&&X.length)||z.push(X)||(Y=!0,E.pause())});for(var Z in E)void 0===this[Z]&&"function"===typeof E[Z]&&(this[Z]=function(X){return function(){return E[X].apply(E,arguments)}}(Z));for(Z=0;Z<P.length;Z++)E.on(P[Z],
this.emit.bind(this,P[Z]));this._read=function(X){O("wrapped _read",X);Y&&(Y=!1,E.resume())};return this};"function"===typeof Symbol&&(d.prototype[Symbol.asyncIterator]=function(){void 0===r&&(r=y("./internal/streams/async_iterator"));return r(this)});Object.defineProperty(d.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(d.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});
Object.defineProperty(d.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(E){this._readableState&&(this._readableState.flowing=E)}});d._fromList=x;Object.defineProperty(d.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(d.from=function(E,z){void 0===K&&(K=y("./internal/streams/from"));return K(d,E,z)})}).call(this)}).call(this,y("_process"),"undefined"!==typeof global?
global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":37,"./_stream_duplex":38,"./internal/streams/async_iterator":43,"./internal/streams/buffer_list":44,"./internal/streams/destroy":45,"./internal/streams/from":47,"./internal/streams/state":49,"./internal/streams/stream":50,_process:27,buffer:15,events:17,inherits:20,"string_decoder/":70,util:14}],41:[function(y,J,D){function C(k,q){var F=this._transformState;F.transforming=!1;var v=F.writecb;if(null===v)return this.emit("error",
new p);F.writechunk=null;F.writecb=null;null!=q&&this.push(q);v(k);k=this._readableState;k.reading=!1;(k.needReadable||k.length<k.highWaterMark)&&this._read(k.highWaterMark)}function m(k){if(!(this instanceof m))return new m(k);h.call(this,k);this._transformState={afterTransform:C.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;k&&("function"===typeof k.transform&&(this._transform=k.transform),
"function"===typeof k.flush&&(this._flush=k.flush));this.on("prefinish",f)}function f(){var k=this;"function"!==typeof this._flush||this._readableState.destroyed?w(this,null,null):this._flush(function(q,F){w(k,q,F)})}function w(k,q,F){if(q)return k.emit("error",q);null!=F&&k.push(F);if(k._writableState.length)throw new u;if(k._transformState.transforming)throw new t;return k.push(null)}J.exports=m;J=y("../errors").codes;var d=J.ERR_METHOD_NOT_IMPLEMENTED,p=J.ERR_MULTIPLE_CALLBACK,t=J.ERR_TRANSFORM_ALREADY_TRANSFORMING,
u=J.ERR_TRANSFORM_WITH_LENGTH_0,h=y("./_stream_duplex");y("inherits")(m,h);m.prototype.push=function(k,q){this._transformState.needTransform=!1;return h.prototype.push.call(this,k,q)};m.prototype._transform=function(k,q,F){F(new d("_transform()"))};m.prototype._write=function(k,q,F){var v=this._transformState;v.writecb=F;v.writechunk=k;v.writeencoding=q;v.transforming||(k=this._readableState,(v.needTransform||k.needReadable||k.length<k.highWaterMark)&&this._read(k.highWaterMark))};m.prototype._read=
function(k){k=this._transformState;null===k.writechunk||k.transforming?k.needTransform=!0:(k.transforming=!0,this._transform(k.writechunk,k.writeencoding,k.afterTransform))};m.prototype._destroy=function(k,q){h.prototype._destroy.call(this,k,function(F){q(F)})}},{"../errors":37,"./_stream_duplex":38,inherits:20}],42:[function(y,J,D){(function(C,m){(function(){function f(b){var a=this;this.entry=this.next=null;this.finish=function(){var e=a.entry;for(a.entry=null;e;){var c=e.callback;b.pendingcb--;
c(void 0);e=e.next}b.corkedRequestsFree.next=a}}function w(){}function d(b,a,e){v=v||y("./_stream_duplex");b=b||{};"boolean"!==typeof e&&(e=a instanceof v);this.objectMode=!!b.objectMode;e&&(this.objectMode=this.objectMode||!!b.writableObjectMode);this.highWaterMark=G(this,b,"writableHighWaterMark",e);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==b.decodeStrings;this.defaultEncoding=b.defaultEncoding||"utf8";this.length=0;this.writing=
!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(c){var g=a._writableState,r=g.sync,K=g.writecb;if("function"!==typeof K)throw new N;g.writing=!1;g.writecb=null;g.length-=g.writelen;g.writelen=0;c?(--g.pendingcb,r?(C.nextTick(K,c),C.nextTick(F,a,g),a._writableState.errorEmitted=!0,W(a,c)):(K(c),a._writableState.errorEmitted=!0,W(a,c),F(a,g))):((c=k(g)||a.destroyed)||g.corked||g.bufferProcessing||!g.bufferedRequest||h(a,g),r?C.nextTick(u,a,g,c,K):u(a,g,c,K))};this.writecb=
null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==b.emitClose;this.autoDestroy=!!b.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new f(this)}function p(b){v=v||y("./_stream_duplex");var a=this instanceof v;if(!a&&!U.call(p,this))return new p(b);this._writableState=new d(b,this,a);this.writable=!0;b&&("function"===typeof b.write&&(this._write=b.write),"function"===typeof b.writev&&(this._writev=
b.writev),"function"===typeof b.destroy&&(this._destroy=b.destroy),"function"===typeof b.final&&(this._final=b.final));l.call(this)}function t(b,a,e,c,g,r,K){a.writelen=c;a.writecb=K;a.writing=!0;a.sync=!0;if(a.destroyed)a.onwrite(new T("write"));else e?b._writev(g,a.onwrite):b._write(g,r,a.onwrite);a.sync=!1}function u(b,a,e,c){!e&&0===a.length&&a.needDrain&&(a.needDrain=!1,b.emit("drain"));a.pendingcb--;c();F(b,a)}function h(b,a){a.bufferProcessing=!0;var e=a.bufferedRequest;if(b._writev&&e&&e.next){var c=
Array(a.bufferedRequestCount),g=a.corkedRequestsFree;g.entry=e;for(var r=0,K=!0;e;)c[r]=e,e.isBuf||(K=!1),e=e.next,r+=1;c.allBuffers=K;t(b,a,!0,a.length,c,"",g.finish);a.pendingcb++;a.lastBufferedRequest=null;g.next?(a.corkedRequestsFree=g.next,g.next=null):a.corkedRequestsFree=new f(a);a.bufferedRequestCount=0}else{for(;e&&(c=e.chunk,t(b,a,!1,a.objectMode?1:c.length,c,e.encoding,e.callback),e=e.next,a.bufferedRequestCount--,!a.writing););null===e&&(a.lastBufferedRequest=null)}a.bufferedRequest=e;
a.bufferProcessing=!1}function k(b){return b.ending&&0===b.length&&null===b.bufferedRequest&&!b.finished&&!b.writing}function q(b,a){b._final(function(e){a.pendingcb--;e&&W(b,e);a.prefinished=!0;b.emit("prefinish");F(b,a)})}function F(b,a){var e=k(a);e&&(a.prefinished||a.finalCalled||("function"!==typeof b._final||a.destroyed?(a.prefinished=!0,b.emit("prefinish")):(a.pendingcb++,a.finalCalled=!0,C.nextTick(q,b,a))),0===a.pendingcb&&(a.finished=!0,b.emit("finish"),a.autoDestroy&&(a=b._readableState,
(!a||a.autoDestroy&&a.endEmitted)&&b.destroy())));return e}J.exports=p;var v;p.WritableState=d;var B={deprecate:y("util-deprecate")},l=y("./internal/streams/stream"),A=y("buffer").Buffer,n=m.Uint8Array||function(){},x=y("./internal/streams/destroy"),G=y("./internal/streams/state").getHighWaterMark,H=y("../errors").codes,L=H.ERR_INVALID_ARG_TYPE,I=H.ERR_METHOD_NOT_IMPLEMENTED,N=H.ERR_MULTIPLE_CALLBACK,M=H.ERR_STREAM_CANNOT_PIPE,T=H.ERR_STREAM_DESTROYED,S=H.ERR_STREAM_NULL_VALUES,O=H.ERR_STREAM_WRITE_AFTER_END,
V=H.ERR_UNKNOWN_ENCODING,W=x.errorOrDestroy;y("inherits")(p,l);d.prototype.getBuffer=function(){for(var b=this.bufferedRequest,a=[];b;)a.push(b),b=b.next;return a};(function(){try{Object.defineProperty(d.prototype,"buffer",{get:B.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(b){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var U=Function.prototype[Symbol.hasInstance];
Object.defineProperty(p,Symbol.hasInstance,{value:function(b){return U.call(this,b)?!0:this!==p?!1:b&&b._writableState instanceof d}})}else U=function(b){return b instanceof this};p.prototype.pipe=function(){W(this,new M)};p.prototype.write=function(b,a,e){var c=this._writableState,g=!1,r;if(r=!c.objectMode)r=b,r=A.isBuffer(r)||r instanceof n;r&&!A.isBuffer(b)&&(b=A.from(b));"function"===typeof a&&(e=a,a=null);r?a="buffer":a||(a=c.defaultEncoding);"function"!==typeof e&&(e=w);if(c.ending)c=e,e=new O,
W(this,e),C.nextTick(c,e);else{var K;if(!(K=r)){K=b;var R=e,P;null===K?P=new S:"string"===typeof K||c.objectMode||(P=new L("chunk",["string","Buffer"],K));P?(W(this,P),C.nextTick(R,P),K=!1):K=!0}K&&(c.pendingcb++,g=r,g||(P=b,c.objectMode||!1===c.decodeStrings||"string"!==typeof P||(P=A.from(P,a)),b!==P&&(g=!0,a="buffer",b=P)),r=c.objectMode?1:b.length,c.length+=r,P=c.length<c.highWaterMark,P||(c.needDrain=!0),c.writing||c.corked?(r=c.lastBufferedRequest,c.lastBufferedRequest={chunk:b,encoding:a,isBuf:g,
callback:e,next:null},r?r.next=c.lastBufferedRequest:c.bufferedRequest=c.lastBufferedRequest,c.bufferedRequestCount+=1):t(this,c,!1,r,b,a,e),g=P)}return g};p.prototype.cork=function(){this._writableState.corked++};p.prototype.uncork=function(){var b=this._writableState;b.corked&&(b.corked--,b.writing||b.corked||b.bufferProcessing||!b.bufferedRequest||h(this,b))};p.prototype.setDefaultEncoding=function(b){"string"===typeof b&&(b=b.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((b+
"").toLowerCase())))throw new V(b);this._writableState.defaultEncoding=b;return this};Object.defineProperty(p.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});p.prototype._write=function(b,a,e){e(new I("_write()"))};p.prototype._writev=null;p.prototype.end=function(b,a,e){var c=this._writableState;
"function"===typeof b?(e=b,a=b=null):"function"===typeof a&&(e=a,a=null);null!==b&&void 0!==b&&this.write(b,a);c.corked&&(c.corked=1,this.uncork());if(!c.ending){b=e;c.ending=!0;F(this,c);if(b)if(c.finished)C.nextTick(b);else this.once("finish",b);c.ended=!0;this.writable=!1}return this};Object.defineProperty(p.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?
!1:this._writableState.destroyed},set:function(b){this._writableState&&(this._writableState.destroyed=b)}});p.prototype.destroy=x.destroy;p.prototype._undestroy=x.undestroy;p.prototype._destroy=function(b,a){a(b)}}).call(this)}).call(this,y("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":37,"./_stream_duplex":38,"./internal/streams/destroy":45,"./internal/streams/state":49,"./internal/streams/stream":50,_process:27,
buffer:15,inherits:20,"util-deprecate":74}],43:[function(y,J,D){(function(C){(function(){function m(x,G,H){G in x?Object.defineProperty(x,G,{value:H,enumerable:!0,configurable:!0,writable:!0}):x[G]=H;return x}function f(x,G){return{value:x,done:G}}function w(x){var G=x[h];if(null!==G){var H=x[l].read();null!==H&&(x[v]=null,x[h]=null,x[k]=null,G(f(H,!1)))}}function d(x){C.nextTick(w,x)}function p(x,G){return function(H,L){x.then(function(){if(G[F])H(f(void 0,!0));else G[B](H,L)},L)}}var t,u=y("./end-of-stream"),
h=Symbol("lastResolve"),k=Symbol("lastReject"),q=Symbol("error"),F=Symbol("ended"),v=Symbol("lastPromise"),B=Symbol("handlePromise"),l=Symbol("stream"),A=Object.getPrototypeOf(function(){}),n=Object.setPrototypeOf((t={get stream(){return this[l]},next:function(){var x=this,G=this[q];if(null!==G)return Promise.reject(G);if(this[F])return Promise.resolve(f(void 0,!0));if(this[l].destroyed)return new Promise(function(H,L){C.nextTick(function(){x[q]?L(x[q]):H(f(void 0,!0))})});if(G=this[v])G=new Promise(p(G,
this));else{G=this[l].read();if(null!==G)return Promise.resolve(f(G,!1));G=new Promise(this[B])}return this[v]=G}},m(t,Symbol.asyncIterator,function(){return this}),m(t,"return",function(){var x=this;return new Promise(function(G,H){x[l].destroy(null,function(L){L?H(L):G(f(void 0,!0))})})}),t),A);J.exports=function(x){var G,H=Object.create(n,(G={},m(G,l,{value:x,writable:!0}),m(G,h,{value:null,writable:!0}),m(G,k,{value:null,writable:!0}),m(G,q,{value:null,writable:!0}),m(G,F,{value:x._readableState.endEmitted,
writable:!0}),m(G,B,{value:function(L,I){var N=H[l].read();N?(H[v]=null,H[h]=null,H[k]=null,L(f(N,!1))):(H[h]=L,H[k]=I)},writable:!0}),G));H[v]=null;u(x,function(L){if(L&&"ERR_STREAM_PREMATURE_CLOSE"!==L.code){var I=H[k];null!==I&&(H[v]=null,H[h]=null,H[k]=null,I(L));H[q]=L}else L=H[h],null!==L&&(H[v]=null,H[h]=null,H[k]=null,L(f(void 0,!0))),H[F]=!0});x.on("readable",d.bind(null,H));return H}}).call(this)}).call(this,y("_process"))},{"./end-of-stream":46,_process:27}],44:[function(y,J,D){function C(u,
h){var k=Object.keys(u);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(u);h&&(q=q.filter(function(F){return Object.getOwnPropertyDescriptor(u,F).enumerable}));k.push.apply(k,q)}return k}function m(u){for(var h=1;h<arguments.length;h++){var k=null!=arguments[h]?arguments[h]:{};h%2?C(Object(k),!0).forEach(function(q){var F=k[q];q in u?Object.defineProperty(u,q,{value:F,enumerable:!0,configurable:!0,writable:!0}):u[q]=F}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,
Object.getOwnPropertyDescriptors(k)):C(Object(k)).forEach(function(q){Object.defineProperty(u,q,Object.getOwnPropertyDescriptor(k,q))})}return u}function f(u,h){for(var k=0;k<h.length;k++){var q=h[k];q.enumerable=q.enumerable||!1;q.configurable=!0;"value"in q&&(q.writable=!0);Object.defineProperty(u,q.key,q)}}function w(u,h,k){h&&f(u.prototype,h);k&&f(u,k);return u}var d=y("buffer").Buffer,p=y("util").inspect,t=p&&p.custom||"inspect";J.exports=function(){function u(){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");
this.tail=this.head=null;this.length=0}w(u,[{key:"push",value:function(h){h={data:h,next:null};0<this.length?this.tail.next=h:this.head=h;this.tail=h;++this.length}},{key:"unshift",value:function(h){h={data:h,next:this.head};0===this.length&&(this.tail=h);this.head=h;++this.length}},{key:"shift",value:function(){if(0!==this.length){var h=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return h}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=
0}},{key:"join",value:function(h){if(0===this.length)return"";for(var k=this.head,q=""+k.data;k=k.next;)q+=h+k.data;return q}},{key:"concat",value:function(h){if(0===this.length)return d.alloc(0);h=d.allocUnsafe(h>>>0);for(var k=this.head,q=0;k;)d.prototype.copy.call(k.data,h,q),q+=k.data.length,k=k.next;return h}},{key:"consume",value:function(h,k){h<this.head.data.length?(k=this.head.data.slice(0,h),this.head.data=this.head.data.slice(h)):k=h===this.head.data.length?this.shift():k?this._getString(h):
this._getBuffer(h);return k}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(h){var k=this.head,q=1,F=k.data;for(h-=F.length;k=k.next;){var v=k.data,B=h>v.length?v.length:h;F=B===v.length?F+v:F+v.slice(0,h);h-=B;if(0===h){B===v.length?(++q,this.head=k.next?k.next:this.tail=null):(this.head=k,k.data=v.slice(B));break}++q}this.length-=q;return F}},{key:"_getBuffer",value:function(h){var k=d.allocUnsafe(h),q=this.head,F=1;q.data.copy(k);for(h-=q.data.length;q=
q.next;){var v=q.data,B=h>v.length?v.length:h;v.copy(k,k.length-h,0,B);h-=B;if(0===h){B===v.length?(++F,this.head=q.next?q.next:this.tail=null):(this.head=q,q.data=v.slice(B));break}++F}this.length-=F;return k}},{key:t,value:function(h,k){return p(this,m({},k,{depth:0,customInspect:!1}))}}]);return u}()},{buffer:15,util:14}],45:[function(y,J,D){(function(C){(function(){function m(d,p){w(d,p);f(d)}function f(d){d._writableState&&!d._writableState.emitClose||d._readableState&&!d._readableState.emitClose||
d.emit("close")}function w(d,p){d.emit("error",p)}J.exports={destroy:function(d,p){var t=this,u=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||u)return p?p(d):d&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,C.nextTick(w,this,d)):C.nextTick(w,this,d)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(d||null,function(h){!p&&
h?t._writableState?t._writableState.errorEmitted?C.nextTick(f,t):(t._writableState.errorEmitted=!0,C.nextTick(m,t,h)):C.nextTick(m,t,h):p?(C.nextTick(f,t),p(h)):C.nextTick(f,t)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=
!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(d,p){var t=d._readableState,u=d._writableState;t&&t.autoDestroy||u&&u.autoDestroy?d.destroy(p):d.emit("error",p)}}}).call(this)}).call(this,y("_process"))},{_process:27}],46:[function(y,J,D){function C(d){var p=!1;return function(){if(!p){p=!0;for(var t=arguments.length,u=Array(t),h=0;h<t;h++)u[h]=arguments[h];d.apply(this,u)}}}function m(){}function f(d,p,t){if("function"===
typeof p)return f(d,null,p);p||={};t=C(t||m);var u=p.readable||!1!==p.readable&&d.readable,h=p.writable||!1!==p.writable&&d.writable,k=function(){d.writable||F()},q=d._writableState&&d._writableState.finished,F=function(){h=!1;q=!0;u||t.call(d)},v=d._readableState&&d._readableState.endEmitted,B=function(){u=!1;v=!0;h||t.call(d)},l=function(x){t.call(d,x)},A=function(){var x;if(u&&!v)return d._readableState&&d._readableState.ended||(x=new w),t.call(d,x);if(h&&!q)return d._writableState&&d._writableState.ended||
(x=new w),t.call(d,x)},n=function(){d.req.on("finish",F)};if(d.setHeader&&"function"===typeof d.abort)if(d.on("complete",F),d.on("abort",A),d.req)n();else d.on("request",n);else h&&!d._writableState&&(d.on("end",k),d.on("close",k));d.on("end",B);d.on("finish",F);if(!1!==p.error)d.on("error",l);d.on("close",A);return function(){d.removeListener("complete",F);d.removeListener("abort",A);d.removeListener("request",n);d.req&&d.req.removeListener("finish",F);d.removeListener("end",k);d.removeListener("close",
k);d.removeListener("finish",F);d.removeListener("end",B);d.removeListener("error",l);d.removeListener("close",A)}}var w=y("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;J.exports=f},{"../../../errors":37}],47:[function(y,J,D){J.exports=function(){throw Error("Readable.from is not available in the browser");}},{}],48:[function(y,J,D){function C(h){var k=!1;return function(){k||(k=!0,h.apply(void 0,arguments))}}function m(h){if(h)throw h;}function f(h,k,q,F){F=C(F);var v=!1;h.on("close",function(){v=
!0});void 0===p&&(p=y("./end-of-stream"));p(h,{readable:k,writable:q},function(l){if(l)return F(l);v=!0;F()});var B=!1;return function(l){if(!v&&!B){B=!0;if(h.setHeader&&"function"===typeof h.abort)return h.abort();if("function"===typeof h.destroy)return h.destroy();F(l||new u("pipe"))}}}function w(h){h()}function d(h,k){return h.pipe(k)}var p;D=y("../../../errors").codes;var t=D.ERR_MISSING_ARGS,u=D.ERR_STREAM_DESTROYED;J.exports=function(){for(var h=arguments.length,k=Array(h),q=0;q<h;q++)k[q]=
arguments[q];var F=k.length?"function"!==typeof k[k.length-1]?m:k.pop():m;Array.isArray(k[0])&&(k=k[0]);if(2>k.length)throw new t("streams");var v,B=k.map(function(l,A){var n=A<k.length-1;return f(l,n,0<A,function(x){v||=x;x&&B.forEach(w);n||(B.forEach(w),F(v))})});return k.reduce(d)}},{"../../../errors":37,"./end-of-stream":46}],49:[function(y,J,D){var C=y("../../../errors").codes.ERR_INVALID_OPT_VALUE;J.exports={getHighWaterMark:function(m,f,w,d){f=null!=f.highWaterMark?f.highWaterMark:d?f[w]:null;
if(null!=f){if(!isFinite(f)||Math.floor(f)!==f||0>f)throw new C(d?w:"highWaterMark",f);return Math.floor(f)}return m.objectMode?16:16384}}},{"../../../errors":37}],50:[function(y,J,D){J.exports=y("events").EventEmitter},{events:17}],51:[function(y,J,D){(function(C){(function(){var m=y("./lib/request"),f=y("./lib/response"),w=y("xtend"),d=y("builtin-status-codes"),p=y("url");D.request=function(t,u){t="string"===typeof t?p.parse(t):w(t);var h=-1===C.location.protocol.search(/^https?:$/)?"http:":"";
h=t.protocol||h;var k=t.hostname||t.host,q=t.port,F=t.path||"/";k&&-1!==k.indexOf(":")&&(k="["+k+"]");t.url=(k?h+"//"+k:"")+(q?":"+q:"")+F;t.method=(t.method||"GET").toUpperCase();t.headers=t.headers||{};t=new m(t);if(u)t.on("response",u);return t};D.get=function(t,u){t=D.request(t,u);t.end();return t};D.ClientRequest=m;D.IncomingMessage=f.IncomingMessage;D.Agent=function(){};D.Agent.defaultMaxSockets=4;D.globalAgent=new D.Agent;D.STATUS_CODES=d;D.METHODS="CHECKOUT CONNECT COPY DELETE GET HEAD LOCK M-SEARCH MERGE MKACTIVITY MKCOL MOVE NOTIFY OPTIONS PATCH POST PROPFIND PROPPATCH PURGE PUT REPORT SEARCH SUBSCRIBE TRACE UNLOCK UNSUBSCRIBE".split(" ")}).call(this)}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./lib/request":53,"./lib/response":54,"builtin-status-codes":16,url:72,xtend:76}],52:[function(y,J,D){(function(C){(function(){function m(){if(void 0!==d)return d;if(C.XMLHttpRequest){d=new C.XMLHttpRequest;try{d.open("GET",C.XDomainRequest?"/":"https://example.com")}catch(p){d=null}}else d=null;return d}function f(p){var t=m();if(!t)return!1;try{return t.responseType=p,t.responseType===p}catch(u){}return!1}
function w(p){return"function"===typeof p}D.fetch=w(C.fetch)&&w(C.ReadableStream);D.writableStream=w(C.WritableStream);D.abortController=w(C.AbortController);D.arraybuffer=D.fetch||f("arraybuffer");D.msstream=!D.fetch&&f("ms-stream");D.mozchunkedarraybuffer=!D.fetch&&f("moz-chunked-arraybuffer");D.overrideMimeType=D.fetch||(m()?w(m().overrideMimeType):!1);var d=null}).call(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],
53:[function(y,J,D){(function(C,m,f){(function(){var w=y("./capability"),d=y("inherits"),p=y("./response"),t=y("readable-stream"),u=p.IncomingMessage,h=p.readyStates;p=J.exports=function(q){var F=this;t.Writable.call(F);F._opts=q;F._body=[];F._headers={};q.auth&&F.setHeader("Authorization","Basic "+f.from(q.auth).toString("base64"));Object.keys(q.headers).forEach(function(l){F.setHeader(l,q.headers[l])});var v=!0;if("disable-fetch"===q.mode||"requestTimeout"in q&&!w.abortController){v=!1;var B=!0}else if("prefer-streaming"===
q.mode)B=!1;else if("allow-wrong-content-type"===q.mode)B=!w.overrideMimeType;else{if(q.mode&&"default"!==q.mode&&"prefer-fast"!==q.mode)throw Error("Invalid value for opts.mode");B=!0}F._mode=w.fetch&&v?"fetch":w.mozchunkedarraybuffer?"moz-chunked-arraybuffer":w.msstream?"ms-stream":w.arraybuffer&&B?"arraybuffer":"text";F._fetchTimer=null;F._socketTimeout=null;F._socketTimer=null;F.on("finish",function(){F._onFinish()})};d(p,t.Writable);p.prototype.setHeader=function(q,F){var v=q.toLowerCase();-1===
k.indexOf(v)&&(this._headers[v]={name:q,value:F})};p.prototype.getHeader=function(q){return(q=this._headers[q.toLowerCase()])?q.value:null};p.prototype.removeHeader=function(q){delete this._headers[q.toLowerCase()]};p.prototype._onFinish=function(){var q=this;if(!q._destroyed){var F=q._opts;"timeout"in F&&0!==F.timeout&&q.setTimeout(F.timeout);var v=q._headers,B=null;"GET"!==F.method&&"HEAD"!==F.method&&(B=new Blob(q._body,{type:(v["content-type"]||{}).value||""}));var l=[];Object.keys(v).forEach(function(G){var H=
v[G].name;G=v[G].value;Array.isArray(G)?G.forEach(function(L){l.push([H,L])}):l.push([H,G])});if("fetch"===q._mode){var A=null;if(w.abortController){var n=new AbortController;A=n.signal;q._fetchAbortController=n;"requestTimeout"in F&&0!==F.requestTimeout&&(q._fetchTimer=m.setTimeout(function(){q.emit("requestTimeout");q._fetchAbortController&&q._fetchAbortController.abort()},F.requestTimeout))}m.fetch(q._opts.url,{method:q._opts.method,headers:l,body:B||void 0,mode:"cors",credentials:F.withCredentials?
"include":"same-origin",signal:A}).then(function(G){q._fetchResponse=G;q._resetTimers(!1);q._connect()},function(G){q._resetTimers(!0);q._destroyed||q.emit("error",G)})}else{var x=q._xhr=new m.XMLHttpRequest;try{x.open(q._opts.method,q._opts.url,!0)}catch(G){C.nextTick(function(){q.emit("error",G)});return}"responseType"in x&&(x.responseType=q._mode);"withCredentials"in x&&(x.withCredentials=!!F.withCredentials);"text"===q._mode&&"overrideMimeType"in x&&x.overrideMimeType("text/plain; charset=x-user-defined");
"requestTimeout"in F&&(x.timeout=F.requestTimeout,x.ontimeout=function(){q.emit("requestTimeout")});l.forEach(function(G){x.setRequestHeader(G[0],G[1])});q._response=null;x.onreadystatechange=function(){switch(x.readyState){case h.LOADING:case h.DONE:q._onXHRProgress()}};"moz-chunked-arraybuffer"===q._mode&&(x.onprogress=function(){q._onXHRProgress()});x.onerror=function(){q._destroyed||(q._resetTimers(!0),q.emit("error",Error("XHR error")))};try{x.send(B)}catch(G){C.nextTick(function(){q.emit("error",
G)})}}}};p.prototype._onXHRProgress=function(){this._resetTimers(!1);try{var q=this._xhr.status;var F=null!==q&&0!==q}catch(v){F=!1}F&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress(this._resetTimers.bind(this)))};p.prototype._connect=function(){var q=this;q._destroyed||(q._response=new u(q._xhr,q._fetchResponse,q._mode,q._resetTimers.bind(q)),q._response.on("error",function(F){q.emit("error",F)}),q.emit("response",q._response))};p.prototype._write=function(q,F,v){this._body.push(q);
v()};p.prototype._resetTimers=function(q){var F=this;m.clearTimeout(F._socketTimer);F._socketTimer=null;q?(m.clearTimeout(F._fetchTimer),F._fetchTimer=null):F._socketTimeout&&(F._socketTimer=m.setTimeout(function(){F.emit("timeout")},F._socketTimeout))};p.prototype.abort=p.prototype.destroy=function(q){this._destroyed=!0;this._resetTimers(!0);this._response&&(this._response._destroyed=!0);this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort();q&&this.emit("error",
q)};p.prototype.end=function(q,F,v){"function"===typeof q&&(v=q,q=void 0);t.Writable.prototype.end.call(this,q,F,v)};p.prototype.setTimeout=function(q,F){if(F)this.once("timeout",F);this._socketTimeout=q;this._resetTimers(!1)};p.prototype.flushHeaders=function(){};p.prototype.setNoDelay=function(){};p.prototype.setSocketKeepAlive=function(){};var k="accept-charset accept-encoding access-control-request-headers access-control-request-method connection content-length cookie cookie2 date dnt expect host keep-alive origin referer te trailer transfer-encoding upgrade via".split(" ")}).call(this)}).call(this,
y("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},y("buffer").Buffer)},{"./capability":52,"./response":54,_process:27,buffer:15,inherits:20,"readable-stream":69}],54:[function(y,J,D){(function(C,m,f){(function(){var w=y("./capability"),d=y("inherits"),p=y("readable-stream"),t=D.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},u=D.IncomingMessage=function(h,k,q,F){var v=this;p.Readable.call(v);v._mode=q;v.headers=
{};v.rawHeaders=[];v.trailers={};v.rawTrailers=[];v.on("end",function(){C.nextTick(function(){v.emit("close")})});if("fetch"===q){v._fetchResponse=k;v.url=k.url;v.statusCode=k.status;v.statusMessage=k.statusText;k.headers.forEach(function(A,n){v.headers[n.toLowerCase()]=A;v.rawHeaders.push(n,A)});if(w.writableStream){h=new WritableStream({write:function(A){F(!1);return new Promise(function(n,x){v._destroyed?x():v.push(f.from(A))?n():v._resumeFetch=n})},close:function(){F(!0);v._destroyed||v.push(null)},
abort:function(A){F(!0);v._destroyed||v.emit("error",A)}});try{k.body.pipeTo(h).catch(function(A){F(!0);v._destroyed||v.emit("error",A)});return}catch(A){}}var B=k.body.getReader();function l(){B.read().then(function(A){v._destroyed||(F(A.done),A.done?v.push(null):(v.push(f.from(A.value)),l()))}).catch(function(A){F(!0);v._destroyed||v.emit("error",A)})}l()}else if(v._xhr=h,v._pos=0,v.url=h.responseURL,v.statusCode=h.status,v.statusMessage=h.statusText,h.getAllResponseHeaders().split(/\r?\n/).forEach(function(l){if(l=
l.match(/^([^:]+):\s*(.*)/)){var A=l[1].toLowerCase();"set-cookie"===A?(void 0===v.headers[A]&&(v.headers[A]=[]),v.headers[A].push(l[2])):v.headers[A]=void 0!==v.headers[A]?v.headers[A]+(", "+l[2]):l[2];v.rawHeaders.push(l[1],l[2])}}),v._charset="x-user-defined",!w.overrideMimeType){if(k=v.rawHeaders["mime-type"])if(k=k.match(/;\s*charset=([^;])(;|$)/))v._charset=k[1].toLowerCase();v._charset||(v._charset="utf-8")}};d(u,p.Readable);u.prototype._read=function(){var h=this._resumeFetch;h&&(this._resumeFetch=
null,h())};u.prototype._onXHRProgress=function(h){var k=this,q=k._xhr,F=null;switch(k._mode){case "text":F=q.responseText;if(F.length>k._pos){q=F.substr(k._pos);if("x-user-defined"===k._charset){for(var v=f.alloc(q.length),B=0;B<q.length;B++)v[B]=q.charCodeAt(B)&255;k.push(v)}else k.push(q,k._charset);k._pos=F.length}break;case "arraybuffer":if(q.readyState!==t.DONE||!q.response)break;F=q.response;k.push(f.from(new Uint8Array(F)));break;case "moz-chunked-arraybuffer":F=q.response;if(q.readyState!==
t.LOADING||!F)break;k.push(f.from(new Uint8Array(F)));break;case "ms-stream":if(F=q.response,q.readyState===t.LOADING){var l=new m.MSStreamReader;l.onprogress=function(){l.result.byteLength>k._pos&&(k.push(f.from(new Uint8Array(l.result.slice(k._pos)))),k._pos=l.result.byteLength)};l.onload=function(){h(!0);k.push(null)};l.readAsArrayBuffer(F)}}k._xhr.readyState===t.DONE&&"ms-stream"!==k._mode&&(h(!0),k.push(null))}}).call(this)}).call(this,y("_process"),"undefined"!==typeof global?global:"undefined"!==
typeof self?self:"undefined"!==typeof window?window:{},y("buffer").Buffer)},{"./capability":52,_process:27,buffer:15,inherits:20,"readable-stream":69}],55:[function(y,J,D){arguments[4][37][0].apply(D,arguments)},{dup:37}],56:[function(y,J,D){arguments[4][38][0].apply(D,arguments)},{"./_stream_readable":58,"./_stream_writable":60,_process:27,dup:38,inherits:20}],57:[function(y,J,D){arguments[4][39][0].apply(D,arguments)},{"./_stream_transform":59,dup:39,inherits:20}],58:[function(y,J,D){arguments[4][40][0].apply(D,
arguments)},{"../errors":55,"./_stream_duplex":56,"./internal/streams/async_iterator":61,"./internal/streams/buffer_list":62,"./internal/streams/destroy":63,"./internal/streams/from":65,"./internal/streams/state":67,"./internal/streams/stream":68,_process:27,buffer:15,dup:40,events:17,inherits:20,"string_decoder/":70,util:14}],59:[function(y,J,D){arguments[4][41][0].apply(D,arguments)},{"../errors":55,"./_stream_duplex":56,dup:41,inherits:20}],60:[function(y,J,D){arguments[4][42][0].apply(D,arguments)},
{"../errors":55,"./_stream_duplex":56,"./internal/streams/destroy":63,"./internal/streams/state":67,"./internal/streams/stream":68,_process:27,buffer:15,dup:42,inherits:20,"util-deprecate":74}],61:[function(y,J,D){arguments[4][43][0].apply(D,arguments)},{"./end-of-stream":64,_process:27,dup:43}],62:[function(y,J,D){arguments[4][44][0].apply(D,arguments)},{buffer:15,dup:44,util:14}],63:[function(y,J,D){arguments[4][45][0].apply(D,arguments)},{_process:27,dup:45}],64:[function(y,J,D){arguments[4][46][0].apply(D,
arguments)},{"../../../errors":55,dup:46}],65:[function(y,J,D){arguments[4][47][0].apply(D,arguments)},{dup:47}],66:[function(y,J,D){arguments[4][48][0].apply(D,arguments)},{"../../../errors":55,"./end-of-stream":64,dup:48}],67:[function(y,J,D){arguments[4][49][0].apply(D,arguments)},{"../../../errors":55,dup:49}],68:[function(y,J,D){arguments[4][50][0].apply(D,arguments)},{dup:50,events:17}],69:[function(y,J,D){D=J.exports=y("./lib/_stream_readable.js");D.Stream=D;D.Readable=D;D.Writable=y("./lib/_stream_writable.js");
D.Duplex=y("./lib/_stream_duplex.js");D.Transform=y("./lib/_stream_transform.js");D.PassThrough=y("./lib/_stream_passthrough.js");D.finished=y("./lib/internal/streams/end-of-stream.js");D.pipeline=y("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":56,"./lib/_stream_passthrough.js":57,"./lib/_stream_readable.js":58,"./lib/_stream_transform.js":59,"./lib/_stream_writable.js":60,"./lib/internal/streams/end-of-stream.js":64,"./lib/internal/streams/pipeline.js":66}],70:[function(y,J,D){function C(B){if(!B)return"utf8";
for(var l;;)switch(B){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return B;default:if(l)return;B=(""+B).toLowerCase();l=!0}}function m(B){var l=C(B);if("string"!==typeof l&&(F.isEncoding===v||!v(B)))throw Error("Unknown encoding: "+B);this.encoding=l||B;switch(this.encoding){case "utf16le":this.text=p;this.end=t;B=4;break;case "utf8":this.fillLast=d;B=
4;break;case "base64":this.text=u;this.end=h;B=3;break;default:this.write=k;this.end=q;return}this.lastTotal=this.lastNeed=0;this.lastChar=F.allocUnsafe(B)}function f(B){return 127>=B?0:6===B>>5?2:14===B>>4?3:30===B>>3?4:2===B>>6?-1:-2}function w(B,l,A){var n=l.length-1;if(n<A)return 0;var x=f(l[n]);if(0<=x)return 0<x&&(B.lastNeed=x-1),x;if(--n<A||-2===x)return 0;x=f(l[n]);if(0<=x)return 0<x&&(B.lastNeed=x-2),x;if(--n<A||-2===x)return 0;x=f(l[n]);return 0<=x?(0<x&&(2===x?x=0:B.lastNeed=x-3),x):0}
function d(B){var l=this.lastTotal-this.lastNeed;a:if(128!==(B[0]&192)){this.lastNeed=0;var A="\ufffd"}else{if(1<this.lastNeed&&1<B.length){if(128!==(B[1]&192)){this.lastNeed=1;A="\ufffd";break a}if(2<this.lastNeed&&2<B.length&&128!==(B[2]&192)){this.lastNeed=2;A="\ufffd";break a}}A=void 0}if(void 0!==A)return A;if(this.lastNeed<=B.length)return B.copy(this.lastChar,l,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);B.copy(this.lastChar,l,0,B.length);this.lastNeed-=B.length}
function p(B,l){if(0===(B.length-l)%2){if(l=B.toString("utf16le",l)){var A=l.charCodeAt(l.length-1);if(55296<=A&&56319>=A)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=B[B.length-2],this.lastChar[1]=B[B.length-1],l.slice(0,-1)}return l}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=B[B.length-1];return B.toString("utf16le",l,B.length-1)}function t(B){B=B&&B.length?this.write(B):"";return this.lastNeed?B+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):B}function u(B,
l){var A=(B.length-l)%3;if(0===A)return B.toString("base64",l);this.lastNeed=3-A;this.lastTotal=3;1===A?this.lastChar[0]=B[B.length-1]:(this.lastChar[0]=B[B.length-2],this.lastChar[1]=B[B.length-1]);return B.toString("base64",l,B.length-A)}function h(B){B=B&&B.length?this.write(B):"";return this.lastNeed?B+this.lastChar.toString("base64",0,3-this.lastNeed):B}function k(B){return B.toString(this.encoding)}function q(B){return B&&B.length?this.write(B):""}var F=y("safe-buffer").Buffer,v=F.isEncoding||
function(B){B=""+B;switch(B&&B.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};D.StringDecoder=m;m.prototype.write=function(B){if(0===B.length)return"";if(this.lastNeed){var l=this.fillLast(B);if(void 0===l)return"";var A=this.lastNeed;this.lastNeed=0}else A=0;return A<B.length?l?l+this.text(B,A):this.text(B,A):l||""};m.prototype.end=function(B){B=B&&B.length?
this.write(B):"";return this.lastNeed?B+"\ufffd":B};m.prototype.text=function(B,l){var A=w(this,B,l);if(!this.lastNeed)return B.toString("utf8",l);this.lastTotal=A;A=B.length-(A-this.lastNeed);B.copy(this.lastChar,0,A);return B.toString("utf8",l,A)};m.prototype.fillLast=function(B){if(this.lastNeed<=B.length)return B.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);B.copy(this.lastChar,this.lastTotal-this.lastNeed,0,B.length);
this.lastNeed-=B.length}},{"safe-buffer":34}],71:[function(y,J,D){(function(C,m){(function(){function f(h,k){this._id=h;this._clearFn=k}var w=y("process/browser.js").nextTick,d=Function.prototype.apply,p=Array.prototype.slice,t={},u=0;D.setTimeout=function(){return new f(d.call(setTimeout,window,arguments),clearTimeout)};D.setInterval=function(){return new f(d.call(setInterval,window,arguments),clearInterval)};D.clearTimeout=D.clearInterval=function(h){h.close()};f.prototype.unref=f.prototype.ref=
function(){};f.prototype.close=function(){this._clearFn.call(window,this._id)};D.enroll=function(h,k){clearTimeout(h._idleTimeoutId);h._idleTimeout=k};D.unenroll=function(h){clearTimeout(h._idleTimeoutId);h._idleTimeout=-1};D._unrefActive=D.active=function(h){clearTimeout(h._idleTimeoutId);var k=h._idleTimeout;0<=k&&(h._idleTimeoutId=setTimeout(function(){h._onTimeout&&h._onTimeout()},k))};D.setImmediate="function"===typeof C?C:function(h){var k=u++,q=2>arguments.length?!1:p.call(arguments,1);t[k]=
!0;w(function(){t[k]&&(q?h.apply(null,q):h.call(null),D.clearImmediate(k))});return k};D.clearImmediate="function"===typeof m?m:function(h){delete t[h]}}).call(this)}).call(this,y("timers").setImmediate,y("timers").clearImmediate)},{"process/browser.js":27,timers:71}],72:[function(y,J,D){function C(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function m(n,x,G){if(n&&w.isObject(n)&&n instanceof C)return n;
var H=new C;H.parse(n,x,G);return H}var f=y("punycode"),w=y("./util");D.parse=m;D.resolve=function(n,x){return m(n,!1,!0).resolve(x)};D.resolveObject=function(n,x){return n?m(n,!1,!0).resolveObject(x):x};D.format=function(n){w.isString(n)&&(n=m(n));return n instanceof C?n.format():C.prototype.format.call(n)};D.Url=C;var d=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,t=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/;J="{}|\\^`".split("").concat('<>"` \r\n\t'.split(""));var u=["'"].concat(J),h=["%","/","?",";","#"].concat(u),
k=["/","?","#"],q=/^[+a-z0-9A-Z_-]{0,63}$/,F=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},B={javascript:!0,"javascript:":!0},l={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=y("querystring");C.prototype.parse=function(n,x,G){if(!w.isString(n))throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var H=n.indexOf("?");H=-1!==H&&H<n.indexOf("#")?"?":"#";n=n.split(H);n[0]=n[0].replace(/\\/g,"/");n=n.join(H);
H=n.trim();if(!G&&1===n.split("#").length&&(n=t.exec(H)))return this.href=this.path=H,this.pathname=n[1],n[2]?(this.search=n[2],this.query=x?A.parse(this.search.substr(1)):this.search.substr(1)):x&&(this.search="",this.query={}),this;if(n=d.exec(H)){n=n[0];var L=n.toLowerCase();this.protocol=L;H=H.substr(n.length)}if(G||n||H.match(/^\/\/[^@\/]+@[^@\/]+/)){var I="//"===H.substr(0,2);!I||n&&B[n]||(H=H.substr(2),this.slashes=!0)}if(!B[n]&&(I||n&&!l[n])){I=-1;for(G=0;G<k.length;G++)n=H.indexOf(k[G]),
-1!==n&&(-1===I||n<I)&&(I=n);I=-1===I?H.lastIndexOf("@"):H.lastIndexOf("@",I);-1!==I&&(G=H.slice(0,I),H=H.slice(I+1),this.auth=decodeURIComponent(G));I=-1;for(G=0;G<h.length;G++)n=H.indexOf(h[G]),-1!==n&&(-1===I||n<I)&&(I=n);-1===I&&(I=H.length);this.host=H.slice(0,I);H=H.slice(I);this.parseHost();this.hostname=this.hostname||"";I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I){var N=this.hostname.split(/\./);G=0;for(n=N.length;G<n;G++){var M=N[G];if(M&&!M.match(q)){for(var T=
"",S=0,O=M.length;S<O;S++)T=127<M.charCodeAt(S)?T+"x":T+M[S];if(!T.match(q)){n=N.slice(0,G);G=N.slice(G+1);if(M=M.match(F))n.push(M[1]),G.unshift(M[2]);G.length&&(H="/"+G.join(".")+H);this.hostname=n.join(".");break}}}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase();I||(this.hostname=f.toASCII(this.hostname));G=this.port?":"+this.port:"";this.host=(this.hostname||"")+G;this.href+=this.host;I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==H[0]&&(H="/"+H))}if(!v[L])for(G=
0,n=u.length;G<n;G++)I=u[G],-1!==H.indexOf(I)&&(M=encodeURIComponent(I),M===I&&(M=escape(I)),H=H.split(I).join(M));G=H.indexOf("#");-1!==G&&(this.hash=H.substr(G),H=H.slice(0,G));G=H.indexOf("?");-1!==G?(this.search=H.substr(G),this.query=H.substr(G+1),x&&(this.query=A.parse(this.query)),H=H.slice(0,G)):x&&(this.search="",this.query={});H&&(this.pathname=H);l[L]&&this.hostname&&!this.pathname&&(this.pathname="/");if(this.pathname||this.search)G=this.pathname||"",this.path=G+(this.search||"");this.href=
this.format();return this};C.prototype.format=function(){var n=this.auth||"";n&&(n=encodeURIComponent(n),n=n.replace(/%3A/i,":"),n+="@");var x=this.protocol||"",G=this.pathname||"",H=this.hash||"",L=!1,I="";this.host?L=n+this.host:this.hostname&&(L=n+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(L+=":"+this.port));this.query&&w.isObject(this.query)&&Object.keys(this.query).length&&(I=A.stringify(this.query));n=this.search||I&&"?"+I||"";x&&":"!==x.substr(-1)&&(x+=
":");this.slashes||(!x||l[x])&&!1!==L?(L="//"+(L||""),G&&"/"!==G.charAt(0)&&(G="/"+G)):L||="";H&&"#"!==H.charAt(0)&&(H="#"+H);n&&"?"!==n.charAt(0)&&(n="?"+n);G=G.replace(/[?#]/g,function(N){return encodeURIComponent(N)});n=n.replace("#","%23");return x+L+G+n+H};C.prototype.resolve=function(n){return this.resolveObject(m(n,!1,!0)).format()};C.prototype.resolveObject=function(n){if(w.isString(n)){var x=new C;x.parse(n,!1,!0);n=x}x=new C;for(var G=Object.keys(this),H=0;H<G.length;H++){var L=G[H];x[L]=
this[L]}x.hash=n.hash;if(""===n.href)return x.href=x.format(),x;if(n.slashes&&!n.protocol){G=Object.keys(n);for(H=0;H<G.length;H++)L=G[H],"protocol"!==L&&(x[L]=n[L]);l[x.protocol]&&x.hostname&&!x.pathname&&(x.path=x.pathname="/");x.href=x.format();return x}if(n.protocol&&n.protocol!==x.protocol){if(!l[n.protocol]){G=Object.keys(n);for(H=0;H<G.length;H++)L=G[H],x[L]=n[L];x.href=x.format();return x}x.protocol=n.protocol;if(n.host||B[n.protocol])x.pathname=n.pathname;else{for(var I=(n.pathname||"").split("/");I.length&&
!(n.host=I.shift()););n.host||(n.host="");n.hostname||(n.hostname="");""!==I[0]&&I.unshift("");2>I.length&&I.unshift("");x.pathname=I.join("/")}x.search=n.search;x.query=n.query;x.host=n.host||"";x.auth=n.auth;x.hostname=n.hostname||n.host;x.port=n.port;if(x.pathname||x.search)x.path=(x.pathname||"")+(x.search||"");x.slashes=x.slashes||n.slashes;x.href=x.format();return x}G=x.pathname&&"/"===x.pathname.charAt(0);var N=n.host||n.pathname&&"/"===n.pathname.charAt(0),M=G=N||G||x.host&&n.pathname;H=x.pathname&&
x.pathname.split("/")||[];I=n.pathname&&n.pathname.split("/")||[];if(L=x.protocol&&!l[x.protocol])x.hostname="",x.port=null,x.host&&(""===H[0]?H[0]=x.host:H.unshift(x.host)),x.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(""===I[0]?I[0]=n.host:I.unshift(n.host)),n.host=null),G=G&&(""===I[0]||""===H[0]);if(N)x.host=n.host||""===n.host?n.host:x.host,x.hostname=n.hostname||""===n.hostname?n.hostname:x.hostname,x.search=n.search,x.query=n.query,H=I;else if(I.length)H||=[],H.pop(),H=H.concat(I),
x.search=n.search,x.query=n.query;else if(!w.isNullOrUndefined(n.search))return L&&(x.hostname=x.host=H.shift(),L=x.host&&0<x.host.indexOf("@")?x.host.split("@"):!1)&&(x.auth=L.shift(),x.host=x.hostname=L.shift()),x.search=n.search,x.query=n.query,w.isNull(x.pathname)&&w.isNull(x.search)||(x.path=(x.pathname?x.pathname:"")+(x.search?x.search:"")),x.href=x.format(),x;if(!H.length)return x.pathname=null,x.path=x.search?"/"+x.search:null,x.href=x.format(),x;N=H.slice(-1)[0];I=(x.host||n.host||1<H.length)&&
("."===N||".."===N)||""===N;for(var T=0,S=H.length;0<=S;S--)N=H[S],"."===N?H.splice(S,1):".."===N?(H.splice(S,1),T++):T&&(H.splice(S,1),T--);if(!G&&!M)for(;T--;T)H.unshift("..");!G||""===H[0]||H[0]&&"/"===H[0].charAt(0)||H.unshift("");I&&"/"!==H.join("/").substr(-1)&&H.push("");M=""===H[0]||H[0]&&"/"===H[0].charAt(0);L&&(x.hostname=x.host=M?"":H.length?H.shift():"",L=x.host&&0<x.host.indexOf("@")?x.host.split("@"):!1)&&(x.auth=L.shift(),x.host=x.hostname=L.shift());(G=G||x.host&&H.length)&&!M&&H.unshift("");
H.length?x.pathname=H.join("/"):(x.pathname=null,x.path=null);w.isNull(x.pathname)&&w.isNull(x.search)||(x.path=(x.pathname?x.pathname:"")+(x.search?x.search:""));x.auth=n.auth||x.auth;x.slashes=x.slashes||n.slashes;x.href=x.format();return x};C.prototype.parseHost=function(){var n=this.host,x=p.exec(n);x&&(x=x[0],":"!==x&&(this.port=x.substr(1)),n=n.substr(0,n.length-x.length));n&&(this.hostname=n)}},{"./util":73,punycode:28,querystring:31}],73:[function(y,J,D){J.exports={isString:function(C){return"string"===
typeof C},isObject:function(C){return"object"===typeof C&&null!==C},isNull:function(C){return null===C},isNullOrUndefined:function(C){return null==C}}},{}],74:[function(y,J,D){(function(C){(function(){function m(f){try{if(!C.localStorage)return!1}catch(w){return!1}f=C.localStorage[f];return null==f?!1:"true"===String(f).toLowerCase()}J.exports=function(f,w){if(m("noDeprecation"))return f;var d=!1;return function(){if(!d){if(m("throwDeprecation"))throw Error(w);m("traceDeprecation")?console.trace(w):
console.warn(w);d=!0}return f.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],75:[function(y,J,D){function C(){}var m=function(t){if(Object.keys)return Object.keys(t);var u=[],h;for(h in t)u.push(h);return u},f=function(t,u){if(t.forEach)return t.forEach(u);for(var h=0;h<t.length;h++)u(t[h],h,t)},w=function(){try{return Object.defineProperty({},"_",{}),function(t,u,h){Object.defineProperty(t,
u,{writable:!0,enumerable:!1,configurable:!0,value:h})}}catch(t){return function(u,h,k){u[h]=k}}}(),d="Array Boolean Date Error EvalError Function Infinity JSON Math NaN Number Object RangeError ReferenceError RegExp String SyntaxError TypeError URIError decodeURI decodeURIComponent encodeURI encodeURIComponent escape eval isFinite isNaN parseFloat parseInt undefined unescape".split(" ");C.prototype={};var p=D.Script=function(t){if(!(this instanceof p))return new p(t);this.code=t};p.prototype.runInContext=
function(t){if(!(t instanceof C))throw new TypeError("needs a 'context' argument.");var u=document.createElement("iframe");u.style||(u.style={});u.style.display="none";document.body.appendChild(u);var h=u.contentWindow,k=h.eval,q=h.execScript;!k&&q&&(q.call(h,"null"),k=h.eval);f(m(t),function(v){h[v]=t[v]});f(d,function(v){t[v]&&(h[v]=t[v])});var F=m(h);k=k.call(h,this.code);f(m(h),function(v){var B;if(!(B=v in t)){a:if(F.indexOf)B=F.indexOf(v);else{for(B=0;B<F.length;B++)if(F[B]===v)break a;B=-1}B=
-1===B}B&&(t[v]=h[v])});f(d,function(v){v in t||w(t,v,h[v])});document.body.removeChild(u);return k};p.prototype.runInThisContext=function(){return eval(this.code)};p.prototype.runInNewContext=function(t){var u=p.createContext(t),h=this.runInContext(u);t&&f(m(u),function(k){t[k]=u[k]});return h};f(m(p.prototype),function(t){D[t]=p[t]=function(u){var h=p(u);return h[t].apply(h,[].slice.call(arguments,1))}});D.isContext=function(t){return t instanceof C};D.createScript=function(t){return D.Script(t)};
D.createContext=p.createContext=function(t){var u=new C;"object"===typeof t&&f(m(t),function(h){u[h]=t[h]});return u}},{}],76:[function(y,J,D){J.exports=function(){for(var m={},f=0;f<arguments.length;f++){var w=arguments[f],d;for(d in w)C.call(w,d)&&(m[d]=w[d])}return m};var C=Object.prototype.hasOwnProperty},{}],77:[function(y,J,D){const {setTimeout:C}=y("timers");J.exports=class extends Map{constructor(m=1E3){super();this.timeout=m}set(m,f){this.has(m)&&clearTimeout(super.get(m).tid);super.set(m,
{tid:C(this.delete.bind(this,m),this.timeout).unref(),value:f})}get(m){return(m=super.get(m))?m.value:null}getOrSet(m,f){if(this.has(m))return this.get(m);let w=f();this.set(m,w);(async()=>{try{await w}catch(d){this.delete(m)}})();return w}delete(m){let f=super.get(m);f&&(clearTimeout(f.tid),super.delete(m))}clear(){for(let m of this.values())clearTimeout(m.tid);super.clear()}}},{timers:71}],78:[function(y,J,D){const C=y("./utils"),m=y("./formats"),f="mp4a mp3 vorbis aac opus flac".split(" "),w="mp4v;avc1;Sorenson H.283;MPEG-4 Visual;VP8;VP9;H.264".split(";"),
d=v=>v.bitrate||0,p=v=>w.findIndex(B=>v.codecs&&v.codecs.includes(B)),t=v=>v.audioBitrate||0,u=v=>f.findIndex(B=>v.codecs&&v.codecs.includes(B)),h=(v,B,l)=>{let A=0;for(let n of l)if(A=n(B)-n(v),0!==A)break;return A},k=(v,B)=>h(v,B,[l=>parseInt(l.qualityLabel),d,p]),q=(v,B)=>h(v,B,[t,u]);D.sortFormats=(v,B)=>h(v,B,[l=>+!!l.isHLS,l=>+!!l.isDashMPD,l=>+(0<l.contentLength),l=>+(l.hasVideo&&l.hasAudio),l=>+l.hasVideo,l=>parseInt(l.qualityLabel)||0,d,t,p,u]);D.chooseFormat=(v,B)=>{if("object"===typeof B.format){if(!B.format.url)throw Error("Invalid format given, did you use `ytdl.getInfo()`?");
return B.format}B.filter&&(v=D.filterFormats(v,B.filter));v.some(l=>l.isHLS)&&(v=v.filter(l=>l.isHLS||!l.isLive));B=B.quality||"highest";switch(B){case "highest":v=v[0];break;case "lowest":v=v[v.length-1];break;case "highestaudio":v=D.filterFormats(v,"audio");v.sort(q);const l=v[0];v=v.filter(G=>0===h(l,G,[t,u]));const A=v.map(G=>parseInt(G.qualityLabel)||0).sort((G,H)=>G-H)[0];v=v.find(G=>(parseInt(G.qualityLabel)||0)===A);break;case "lowestaudio":v=D.filterFormats(v,"audio");v.sort(q);v=v[v.length-
1];break;case "highestvideo":v=D.filterFormats(v,"video");v.sort(k);const n=v[0];v=v.filter(G=>0===k(n,G));const x=v.map(G=>G.audioBitrate||0).sort((G,H)=>G-H)[0];v=v.find(G=>(G.audioBitrate||0)===x);break;case "lowestvideo":v=D.filterFormats(v,"video");v.sort(k);v=v[v.length-1];break;default:v=F(B,v)}if(!v)throw Error(`No such format found: ${B}`);return v};const F=(v,B)=>{let l=A=>B.find(n=>`${n.itag}`===`${A}`);return Array.isArray(v)?l(v.find(A=>l(A))):l(v)};D.filterFormats=(v,B)=>{let l;switch(B){case "videoandaudio":case "audioandvideo":l=
A=>A.hasVideo&&A.hasAudio;break;case "video":l=A=>A.hasVideo;break;case "videoonly":l=A=>A.hasVideo&&!A.hasAudio;break;case "audio":l=A=>A.hasAudio;break;case "audioonly":l=A=>!A.hasVideo&&A.hasAudio;break;default:if("function"===typeof B)l=B;else throw TypeError(`Given filter (${B}) is not supported`);}return v.filter(A=>!!A.url&&l(A))};D.addFormatMeta=v=>{v=Object.assign({},m[v.itag],v);v.hasVideo=!!v.qualityLabel;v.hasAudio=!!v.audioBitrate;v.container=v.mimeType?v.mimeType.split(";")[0].split("/")[1]:
null;v.codecs=v.mimeType?C.between(v.mimeType,'codecs="','"'):null;v.videoCodec=v.hasVideo&&v.codecs?v.codecs.split(", ")[0]:null;v.audioCodec=v.hasAudio&&v.codecs?v.codecs.split(", ").slice(-1)[0]:null;v.isLive=/\bsource[/=]yt_live_broadcast\b/.test(v.url);v.isHLS=/\/manifest\/hls_(variant|playlist)\//.test(v.url);v.isDashMPD=/\/manifest\/dash\//.test(v.url);return v}},{"./formats":79,"./utils":85}],79:[function(y,J,D){J.exports={5:{mimeType:'video/flv; codecs="Sorenson H.283, mp3"',qualityLabel:"240p",
bitrate:25E4,audioBitrate:64},6:{mimeType:'video/flv; codecs="Sorenson H.263, mp3"',qualityLabel:"270p",bitrate:8E5,audioBitrate:64},13:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:null,bitrate:5E5,audioBitrate:null},17:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:"144p",bitrate:5E4,audioBitrate:24},18:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5E5,audioBitrate:96},22:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2E6,
audioBitrate:192},34:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5E5,audioBitrate:128},35:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"480p",bitrate:8E5,audioBitrate:128},36:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:"240p",bitrate:175E3,audioBitrate:32},37:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:3E6,audioBitrate:192},38:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"3072p",bitrate:35E5,audioBitrate:192},
43:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:5E5,audioBitrate:128},44:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"480p",bitrate:1E6,audioBitrate:128},45:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"720p",bitrate:2E6,audioBitrate:192},46:{mimeType:'audio/webm; codecs="vp8, vorbis"',qualityLabel:"1080p",bitrate:null,audioBitrate:192},82:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5E5,audioBitrate:96},83:{mimeType:'video/mp4; codecs="H.264, aac"',
qualityLabel:"240p",bitrate:5E5,audioBitrate:96},84:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2E6,audioBitrate:192},85:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:3E6,audioBitrate:192},91:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"144p",bitrate:1E5,audioBitrate:48},92:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"240p",bitrate:15E4,audioBitrate:48},93:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5E5,
audioBitrate:128},94:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"480p",bitrate:8E5,audioBitrate:128},95:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:15E5,audioBitrate:256},96:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:25E5,audioBitrate:256},100:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:null,audioBitrate:128},101:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:null,audioBitrate:192},
102:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"720p",bitrate:null,audioBitrate:192},120:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2E6,audioBitrate:128},127:{mimeType:'audio/ts; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:96},128:{mimeType:'audio/ts; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:96},132:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"240p",bitrate:15E4,audioBitrate:48},133:{mimeType:'video/mp4; codecs="H.264"',
qualityLabel:"240p",bitrate:2E5,audioBitrate:null},134:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"360p",bitrate:3E5,audioBitrate:null},135:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"480p",bitrate:5E5,audioBitrate:null},136:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"720p",bitrate:1E6,audioBitrate:null},137:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:25E5,audioBitrate:null},138:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"4320p",bitrate:135E5,
audioBitrate:null},139:{mimeType:'audio/mp4; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:48},140:{mimeType:'audio/m4a; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:128},141:{mimeType:'audio/mp4; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:256},151:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:5E4,audioBitrate:24},160:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"144p",bitrate:1E5,audioBitrate:null},171:{mimeType:'audio/webm; codecs="vorbis"',
qualityLabel:null,bitrate:null,audioBitrate:128},172:{mimeType:'audio/webm; codecs="vorbis"',qualityLabel:null,bitrate:null,audioBitrate:192},242:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p",bitrate:1E5,audioBitrate:null},243:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"360p",bitrate:25E4,audioBitrate:null},244:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"480p",bitrate:5E5,audioBitrate:null},247:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p",bitrate:7E5,audioBitrate:null},
248:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p",bitrate:15E5,audioBitrate:null},249:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:48},250:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:64},251:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:160},264:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1440p",bitrate:4E6,audioBitrate:null},266:{mimeType:'video/mp4; codecs="H.264"',
qualityLabel:"2160p",bitrate:125E5,audioBitrate:null},271:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p",bitrate:9E6,audioBitrate:null},272:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"4320p",bitrate:2E7,audioBitrate:null},278:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"144p 30fps",bitrate:8E4,audioBitrate:null},298:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"720p",bitrate:3E6,audioBitrate:null},299:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:55E5,
audioBitrate:null},300:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:1318E3,audioBitrate:48},302:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p HFR",bitrate:25E5,audioBitrate:null},303:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p HFR",bitrate:5E6,audioBitrate:null},308:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p HFR",bitrate:1E7,audioBitrate:null},313:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p",bitrate:13E6,audioBitrate:null},
315:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p HFR",bitrate:2E7,audioBitrate:null},330:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"144p HDR, HFR",bitrate:8E4,audioBitrate:null},331:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p HDR, HFR",bitrate:1E5,audioBitrate:null},332:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"360p HDR, HFR",bitrate:25E4,audioBitrate:null},333:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p HDR, HFR",bitrate:5E5,audioBitrate:null},
334:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p HDR, HFR",bitrate:1E6,audioBitrate:null},335:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p HDR, HFR",bitrate:15E5,audioBitrate:null},336:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p HDR, HFR",bitrate:5E6,audioBitrate:null},337:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p HDR, HFR",bitrate:12E6,audioBitrate:null}}},{}],80:[function(y,J,D){(function(C){(function(){const m=y("stream").PassThrough,f=y("./info"),
w=y("./utils"),d=y("./format-utils"),p=y("./url-utils"),t=y("./sig"),u=y("miniget"),h=y("m3u8stream"),{parseTimestamp:k}=y("m3u8stream"),q=(l,A)=>{const n=F(A);q.getInfo(l,A).then(x=>{B(n,x,A)},n.emit.bind(n,"error"));return n};J.exports=q;q.getBasicInfo=f.getBasicInfo;q.getInfo=f.getInfo;q.chooseFormat=d.chooseFormat;q.filterFormats=d.filterFormats;q.validateID=p.validateID;q.validateURL=p.validateURL;q.getURLVideoID=p.getURLVideoID;q.getVideoID=p.getVideoID;q.cache={sig:t.cache,info:f.cache,watch:f.watchPageCache,
cookie:f.cookieCache};q.version=y("../package.json").version;const F=l=>{const A=new m({highWaterMark:l&&l.highWaterMark||524288});A._destroy=()=>{A.destroyed=!0};return A},v=(l,A,n)=>{"abort request response error redirect retry reconnect".split(" ").forEach(x=>{l.prependListener(x,A.emit.bind(A,x))});l.pipe(A,{end:n})},B=(l,A,n)=>{n=n||{};let x=w.playError(A.player_response,["UNPLAYABLE","LIVE_STREAM_OFFLINE","LOGIN_REQUIRED"]);if(x)l.emit("error",x);else if(A.formats.length){try{var G=d.chooseFormat(A.formats,
n)}catch(S){l.emit("error",S);return}l.emit("info",A,G);if(!l.destroyed){var H=0,L=S=>{H+=S.length;l.emit("progress",S.length,H,T)},I=n.dlChunkSize||10485760,N=!0;if(G.isHLS||G.isDashMPD){var M=h(G.url,{chunkReadahead:+A.live_chunk_readahead,begin:n.begin||G.isLive&&Date.now(),liveBuffer:n.liveBuffer,requestOptions:n.requestOptions,parser:G.isDashMPD?"dash-mpd":"m3u8",id:G.itag});M.on("progress",(S,O)=>{l.emit("progress",S.size,S.num,O)});v(M,l,N)}else{const S=Object.assign({},n.requestOptions,{maxReconnects:6,
maxRetries:3,backoff:{inc:500,max:1E4}});if(0===I||G.hasAudio&&G.hasVideo)n.begin&&(G.url+=`&begin=${k(n.begin)}`),n.range&&(n.range.start||n.range.end)&&(S.headers=Object.assign({},S.headers,{Range:`bytes=${n.range.start||"0"}-${n.range.end||""}`})),M=u(G.url,S),M.on("response",O=>{l.destroyed||(T=T||parseInt(O.headers["content-length"]))}),M.on("data",L),v(M,l,N);else{let O=n.range&&n.range.start||0,V=O+I;const W=n.range&&n.range.end;var T=n.range?(W?W+1:parseInt(G.contentLength))-O:parseInt(G.contentLength);
const U=()=>{!W&&V>=T&&(V=0);W&&V>W&&(V=W);N=!V||V===W;S.headers=Object.assign({},S.headers,{Range:`bytes=${O}-${V||""}`});M=u(G.url,S);M.on("data",L);M.on("end",()=>{!l.destroyed&&V&&V!==W&&(O=V+1,V+=I,U())});v(M,l,N)};U()}}l._destroy=()=>{l.destroyed=!0;M.destroy();M.end()}}}else l.emit("error",Error("This video is unavailable"))};q.downloadFromInfo=(l,A)=>{const n=F(A);if(!l.full)throw Error("Cannot use `ytdl.downloadFromInfo()` when called with info from `ytdl.getBasicInfo()`");C(()=>{B(n,l,A)});
return n}}).call(this)}).call(this,y("timers").setImmediate)},{"../package.json":86,"./format-utils":78,"./info":82,"./sig":83,"./url-utils":84,"./utils":85,m3u8stream:22,miniget:26,stream:36,timers:71}],81:[function(y,J,D){const C=y("./utils"),m=y("querystring"),{parseTimestamp:f}=y("m3u8stream"),w={song:{name:"Music",url:"https://music.youtube.com/"}},d=u=>u?u.runs?u.runs[0].text:u.simpleText:null;D.getMedia=u=>{let h={},k=[];try{k=u.response.contents.twoColumnWatchNextResults.results.results.contents}catch(F){}u=
k.find(F=>F.videoSecondaryInfoRenderer);if(!u)return{};try{var q=(u.metadataRowContainer||u.videoSecondaryInfoRenderer.metadataRowContainer).metadataRowContainerRenderer.rows;for(let F of q)if(F.metadataRowRenderer){let v=d(F.metadataRowRenderer.title).toLowerCase(),B=F.metadataRowRenderer.contents[0];h[v]=d(B);let l=B.runs;l&&l[0].navigationEndpoint&&(h[`${v}_url`]=(new URL(l[0].navigationEndpoint.commandMetadata.webCommandMetadata.url,"https://www.youtube.com/watch?v=")).toString());v in w&&(h.category=
w[v].name,h.category_url=w[v].url)}else if(F.richMetadataRowRenderer){let v=F.richMetadataRowRenderer.contents,B=v.filter(A=>"RICH_METADATA_RENDERER_STYLE_BOX_ART"===A.richMetadataRenderer.style);for(let {richMetadataRenderer:A}of B){q=A;h.year=d(q.subtitle);let n=d(q.callToAction).split(" ")[1];h[n]=d(q.title);h[`${n}_url`]=(new URL(q.endpoint.commandMetadata.webCommandMetadata.url,"https://www.youtube.com/watch?v=")).toString();h.thumbnails=q.thumbnail.thumbnails}let l=v.filter(A=>"RICH_METADATA_RENDERER_STYLE_TOPIC"===
A.richMetadataRenderer.style);for(let {richMetadataRenderer:A}of l)q=A,h.category=d(q.title),h.category_url=(new URL(q.endpoint.commandMetadata.webCommandMetadata.url,"https://www.youtube.com/watch?v=")).toString()}}catch(F){}return h};const p=u=>!(!u||!u.find(h=>"Verified"===h.metadataBadgeRenderer.tooltip));D.getAuthor=u=>{let h,k=[],q,F=!1;try{let v=u.response.contents.twoColumnWatchNextResults.results.results.contents.find(B=>B.videoSecondaryInfoRenderer&&B.videoSecondaryInfoRenderer.owner&&B.videoSecondaryInfoRenderer.owner.videoOwnerRenderer).videoSecondaryInfoRenderer.owner.videoOwnerRenderer;
h=v.navigationEndpoint.browseEndpoint.browseId;k=v.thumbnail.thumbnails.map(B=>{B.url=(new URL(B.url,"https://www.youtube.com/watch?v=")).toString();return B});q=C.parseAbbreviatedNumber(d(v.subscriberCountText));F=p(v.badges)}catch(v){}try{let v=u.player_response.microformat&&u.player_response.microformat.playerMicroformatRenderer,B=v&&v.channelId||h||u.player_response.videoDetails.channelId,l={id:B,name:v?v.ownerChannelName:u.player_response.videoDetails.author,user:v?v.ownerProfileUrl.split("/").slice(-1)[0]:
null,channel_url:`https://www.youtube.com/channel/${B}`,external_channel_url:v?`https://www.youtube.com/channel/${v.externalChannelId}`:"",user_url:v?(new URL(v.ownerProfileUrl,"https://www.youtube.com/watch?v=")).toString():"",thumbnails:k,verified:F,subscriber_count:q};k.length&&C.deprecate(l,"avatar",l.thumbnails[0].url,"author.avatar","author.thumbnails[0].url");return l}catch(v){return{}}};const t=(u,h)=>{if(u)try{let k=d(u.viewCountText),q=d(u.shortViewCountText),F=h.find(x=>x.id===u.videoId);
/^\d/.test(q)||(q=F&&F.short_view_count_text||"");k=(/^\d/.test(k)?k:q).split(" ")[0];let v=u.shortBylineText.runs[0].navigationEndpoint.browseEndpoint,B=v.browseId,l=d(u.shortBylineText),A=(v.canonicalBaseUrl||"").split("/").slice(-1)[0],n={id:u.videoId,title:d(u.title),published:d(u.publishedTimeText),author:{id:B,name:l,user:A,channel_url:`https://www.youtube.com/channel/${B}`,user_url:`https://www.youtube.com/user/${A}`,thumbnails:u.channelThumbnail.thumbnails.map(x=>{x.url=(new URL(x.url,"https://www.youtube.com/watch?v=")).toString();
return x}),verified:p(u.ownerBadges),[Symbol.toPrimitive](){console.warn("`relatedVideo.author` will be removed in a near future release, use `relatedVideo.author.name` instead.");return n.author.name}},short_view_count_text:q.split(" ")[0],view_count:k.replace(/,/g,""),length_seconds:u.lengthText?Math.floor(f(d(u.lengthText))/1E3):h&&`${h.length_seconds}`,thumbnails:u.thumbnail.thumbnails,richThumbnails:u.richThumbnail?u.richThumbnail.movingThumbnailRenderer.movingThumbnailDetails.thumbnails:[],
isLive:!(!u.badges||!u.badges.find(x=>"LIVE NOW"===x.metadataBadgeRenderer.label))};C.deprecate(n,"author_thumbnail",n.author.thumbnails[0].url,"relatedVideo.author_thumbnail","relatedVideo.author.thumbnails[0].url");C.deprecate(n,"ucid",n.author.id,"relatedVideo.ucid","relatedVideo.author.id");C.deprecate(n,"video_thumbnail",n.thumbnails[0].url,"relatedVideo.video_thumbnail","relatedVideo.thumbnails[0].url");return n}catch(k){}};D.getRelatedVideos=u=>{let h=[];var k=[];try{h=u.response.webWatchNextResponseExtensionData.relatedVideoArgs.split(",").map(q=>
m.parse(q))}catch(q){}try{k=u.response.contents.twoColumnWatchNextResults.secondaryResults.secondaryResults.results}catch(q){return[]}u=[];for(let q of k||[])if(k=q.compactVideoRenderer)(k=t(k,h))&&u.push(k);else if((k=q.compactAutoplayRenderer||q.itemSectionRenderer)&&Array.isArray(k.contents))for(let F of k.contents)(k=t(F.compactVideoRenderer,h))&&u.push(k);return u};D.getLikes=u=>{try{let h=u.response.contents.twoColumnWatchNextResults.results.results.contents.find(k=>k.videoPrimaryInfoRenderer).videoPrimaryInfoRenderer.videoActions.menuRenderer.topLevelButtons.find(k=>
k.toggleButtonRenderer&&"LIKE"===k.toggleButtonRenderer.defaultIcon.iconType);return parseInt(h.toggleButtonRenderer.defaultText.accessibility.accessibilityData.label.replace(/\D+/g,""))}catch(h){return null}};D.getDislikes=u=>{try{let h=u.response.contents.twoColumnWatchNextResults.results.results.contents.find(k=>k.videoPrimaryInfoRenderer).videoPrimaryInfoRenderer.videoActions.menuRenderer.topLevelButtons.find(k=>k.toggleButtonRenderer&&"DISLIKE"===k.toggleButtonRenderer.defaultIcon.iconType);
return parseInt(h.toggleButtonRenderer.defaultText.accessibility.accessibilityData.label.replace(/\D+/g,""))}catch(h){return null}};D.cleanVideoDetails=(u,h)=>{u.thumbnails=u.thumbnail.thumbnails;delete u.thumbnail;C.deprecate(u,"thumbnail",{thumbnails:u.thumbnails},"videoDetails.thumbnail.thumbnails","videoDetails.thumbnails");u.description=u.shortDescription||d(u.description);delete u.shortDescription;C.deprecate(u,"shortDescription",u.description,"videoDetails.shortDescription","videoDetails.description");
u.lengthSeconds=h.player_response.microformat&&h.player_response.microformat.playerMicroformatRenderer.lengthSeconds||h.player_response.videoDetails.lengthSeconds;return u};D.getStoryboards=u=>{u=u.player_response.storyboards&&u.player_response.storyboards.playerStoryboardSpecRenderer&&u.player_response.storyboards.playerStoryboardSpecRenderer.spec&&u.player_response.storyboards.playerStoryboardSpecRenderer.spec.split("|");if(!u)return[];const h=new URL(u.shift());return u.map((k,q)=>{let [F,v,B,
l,A,n,x,G]=k.split("#");h.searchParams.set("sigh",G);B=parseInt(B,10);l=parseInt(l,10);A=parseInt(A,10);k=Math.ceil(B/(l*A));return{templateUrl:h.toString().replace("$L",q).replace("$N",x),thumbnailWidth:parseInt(F,10),thumbnailHeight:parseInt(v,10),thumbnailCount:B,interval:parseInt(n,10),columns:l,rows:A,storyboardCount:k}})};D.getChapters=u=>{u=(u=(u=u.response&&u.response.playerOverlays&&u.response.playerOverlays.playerOverlayRenderer)&&u.decoratedPlayerBarRenderer&&u.decoratedPlayerBarRenderer.decoratedPlayerBarRenderer&&
u.decoratedPlayerBarRenderer.decoratedPlayerBarRenderer.playerBar)&&u.multiMarkersPlayerBarRenderer&&u.multiMarkersPlayerBarRenderer.markersMap;return(u=Array.isArray(u)&&u.find(h=>h.value&&Array.isArray(h.value.chapters)))?u.value.chapters.map(h=>({title:d(h.chapterRenderer.title),start_time:h.chapterRenderer.timeRangeStartMillis/1E3})):[]}},{"./utils":85,m3u8stream:22,querystring:31}],82:[function(y,J,D){const C=y("querystring"),m=y("sax"),f=y("miniget"),w=y("./utils"),{setTimeout:d}=y("timers"),
p=y("./format-utils"),t=y("./url-utils"),u=y("./info-extras"),h=y("./sig");y=y("./cache");D.cache=new y;D.cookieCache=new y(864E5);D.watchPageCache=new y;let k="2.20210622.10.00";class q extends Error{}const F=["support.google.com/youtube/?p=age_restrictions","youtube.com/t/community_guidelines"];D.getBasicInfo=async(b,a)=>{const e=Object.assign({},f.defaultOptions,a.requestOptions);a.requestOptions=Object.assign({},a.requestOptions,{});a.requestOptions.headers=Object.assign({},{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.101 Safari/537.36"},
a.requestOptions.headers);a=await x([b,a],g=>{var r=w.playError(g.player_response,["ERROR"],q);let K=v(g.player_response);if(r||K)throw r||K;if(r=g&&g.player_response)(r=g.player_response.streamingData)||(r=(r=g.player_response.playabilityStatus)&&"UNPLAYABLE"===r.status&&r.errorScreen&&r.errorScreen.playerLegacyDesktopYpcOfferRenderer),r||(r=(g=g.player_response.playabilityStatus)&&"LIVE_STREAM_OFFLINE"===g.status);return r},e,[S,T,O]);Object.assign(a,{formats:V(a.player_response),related_videos:u.getRelatedVideos(a)});
const c=u.getMedia(a);b={author:u.getAuthor(a),media:c,likes:u.getLikes(a),dislikes:u.getDislikes(a),age_restricted:!!(c&&c.notice_url&&F.some(g=>c.notice_url.includes(g))),video_url:"https://www.youtube.com/watch?v="+b,storyboards:u.getStoryboards(a),chapters:u.getChapters(a)};a.videoDetails=u.cleanVideoDetails(Object.assign({},a.player_response&&a.player_response.microformat&&a.player_response.microformat.playerMicroformatRenderer,a.player_response&&a.player_response.videoDetails,b),a);return a};
const v=b=>(b=b&&b.playabilityStatus)&&"LOGIN_REQUIRED"===b.status&&b.messages&&b.messages.filter(a=>/This is a private video/.test(a)).length?new q(b.reason||b.messages&&b.messages[0]):null,B=(b,a)=>`${"https://www.youtube.com/watch?v="+b}&hl=${a.lang||"en"}`,l=(b,a)=>{const e=B(b,a);return D.watchPageCache.getOrSet(e,()=>w.exposedMiniget(e,a).text())},A=b=>(b=/<script\s+src="([^"]+)"(?:\s+type="text\/javascript")?\s+name="player_ias\/base"\s*>|"jsUrl":"([^"]+)"/.exec(b))?b[1]||b[2]:null,n=(b,a,
e,c)=>D.cookieCache.getOrSet(e,async()=>{let g=(await l(b,a)).match(/(["'])ID_TOKEN\1[:,]\s?"([^"]+)"/);if(!g&&c)throw new q("Cookie header used in request, but unable to find YouTube identity token");return g&&g[2]}),x=async(b,a,e,c)=>{let g;for(let r of c)try{const K=await H(r,b.concat([g]),e);K.player_response&&(K.player_response.videoDetails=G(g&&g.player_response&&g.player_response.videoDetails,K.player_response.videoDetails),K.player_response=G(g&&g.player_response,K.player_response));g=G(g,
K);if(a(g,!1))break}catch(K){if(K instanceof q||r===c[c.length-1])throw K;}return g},G=(b,a)=>{if(!b||!a)return b||a;for(let [e,c]of Object.entries(a))null!==c&&void 0!==c&&(b[e]=c);return b},H=async(b,a,e)=>{let c=0,g;for(;c<=e.maxRetries;)try{g=await b(...a);break}catch(r){if(r instanceof q||r instanceof f.MinigetError&&500>r.statusCode||c>=e.maxRetries)throw r;let K=Math.min(++c*e.backoff.inc,e.backoff.max);await new Promise(R=>d(R,K))}return g},L=/^[)\]}'\s]+/,I=(b,a,e)=>{if(e&&"object"!==typeof e)try{return e=
e.replace(L,""),JSON.parse(e)}catch(c){throw Error(`Error parsing ${a} in ${b}: ${c.message}`);}else return e},N=(b,a,e,c,g,r)=>{e=w.between(e,c,g);if(!e)throw Error(`Could not find ${a} in ${b}`);return I(b,a,w.cutAfterJSON(`${r}${e}`))},M=(b,a)=>I(b,"player_response",a&&(a.args&&a.args.player_response||a.player_response||a.playerResponse||a.embedded_player_response)),T=async(b,a)=>{const e=Object.assign({headers:{}},a.requestOptions);var c=e.headers.Cookie||e.headers.cookie;e.headers=Object.assign({"x-youtube-client-name":"1",
"x-youtube-client-version":k,"x-youtube-identity-token":D.cookieCache.get(c||"browser")||""},e.headers);var g=async(r,K)=>{e.headers["x-youtube-identity-token"]||(e.headers["x-youtube-identity-token"]=await n(b,a,r,K))};c&&await g(c,!0);c=`${B(b,a)}&pbj=1`;c=await w.exposedMiniget(c,a,e).text();c=I("watch.json","body",c);"now"===c.reload&&await g("browser",!1);if("now"===c.reload||!Array.isArray(c))throw Error("Unable to retrieve video metadata in watch.json");g=c.reduce((r,K)=>Object.assign(K,r),
{});g.player_response=M("watch.json",g);g.html5player=g.player&&g.player.assets&&g.player.assets.js;return g},S=async(b,a)=>{b=await l(b,a);a={page:"watch"};try{k=w.between(b,'{"key":"cver","value":"','"}'),a.player_response=N("watch.html","player_response",b,/\bytInitialPlayerResponse\s*=\s*\{/i,"\x3c/script>","{")}catch(e){let c=N("watch.html","player_response",b,/\bytplayer\.config\s*=\s*{/,"\x3c/script>","{");a.player_response=M("watch.html",c)}a.response=N("watch.html","response",b,/\bytInitialData("\])?\s*=\s*\{/i,
"\x3c/script>","{");a.html5player=A(b);return a},O=async(b,a)=>{const e=new URL("https://www.youtube.com/get_video_info");e.searchParams.set("video_id",b);e.searchParams.set("c","TVHTML5");e.searchParams.set("cver",`7${k.substr(1)}`);e.searchParams.set("eurl","https://youtube.googleapis.com/v/"+b);e.searchParams.set("ps","default");e.searchParams.set("gl","US");e.searchParams.set("hl",a.lang||"en");e.searchParams.set("html5","1");b=await w.exposedMiniget(e.toString(),a).text();b=C.parse(b);b.player_response=
M("get_video_info",b);return b},V=b=>{let a=[];b&&b.streamingData&&(a=a.concat(b.streamingData.formats||[]).concat(b.streamingData.adaptiveFormats||[]));return a};D.getInfo=async(b,a)=>{let e=await D.getBasicInfo(b,a);const c=e.player_response&&e.player_response.streamingData&&(e.player_response.streamingData.dashManifestUrl||e.player_response.streamingData.hlsManifestUrl);let g=[];if(e.formats.length){var r;(r=e.html5player||A(await l(b,a)))||(b=w.exposedMiniget(`${"https://www.youtube.com/embed/"+
b}?hl=${a.lang||"en"}`,a).text(),r=A(await b));e.html5player=r;if(!e.html5player)throw Error("Unable to find html5player file");b=(new URL(e.html5player,"https://www.youtube.com/watch?v=")).toString();g.push(h.decipherFormats(e.formats,b,a))}c&&e.player_response.streamingData.dashManifestUrl&&g.push(W(e.player_response.streamingData.dashManifestUrl,a));c&&e.player_response.streamingData.hlsManifestUrl&&g.push(U(e.player_response.streamingData.hlsManifestUrl,a));a=await Promise.all(g);e.formats=Object.values(Object.assign({},
...a));e.formats=e.formats.map(p.addFormatMeta);e.formats.sort(p.sortFormats);e.full=!0;return e};const W=(b,a)=>new Promise((e,c)=>{let g={};const r=m.parser(!1);r.onerror=c;let K;r.onopentag=P=>{if("ADAPTATIONSET"===P.name)K=P.attributes;else if("REPRESENTATION"===P.name){const E=parseInt(P.attributes.ID);isNaN(E)||(g[b]=Object.assign({itag:E,url:b,bitrate:parseInt(P.attributes.BANDWIDTH),mimeType:`${K.MIMETYPE}; codecs="${P.attributes.CODECS}"`},P.attributes.HEIGHT?{width:parseInt(P.attributes.WIDTH),
height:parseInt(P.attributes.HEIGHT),fps:parseInt(P.attributes.FRAMERATE)}:{audioSampleRate:P.attributes.AUDIOSAMPLINGRATE}))}};r.onend=()=>{e(g)};const R=w.exposedMiniget((new URL(b,"https://www.youtube.com/watch?v=")).toString(),a);R.setEncoding("utf8");R.on("error",c);R.on("data",P=>{r.write(P)});R.on("end",r.close.bind(r))}),U=async(b,a)=>{b=new URL(b,"https://www.youtube.com/watch?v=");let e={};(await w.exposedMiniget(b.toString(),a).text()).split("\n").filter(c=>/^https?:\/\//.test(c)).forEach(c=>
{const g=parseInt(c.match(/\/itag\/(\d+)\//)[1]);e[c]={itag:g,url:c}});return e};for(let b of["getBasicInfo","getInfo"]){const a=D[b];D[b]=async(e,c={})=>{w.checkForUpdates();let g=await t.getVideoID(e);e=[b,g,c.lang].join("-");return D.cache.getOrSet(e,()=>a(g,c))}}D.validateID=t.validateID;D.validateURL=t.validateURL;D.getURLVideoID=t.getURLVideoID;D.getVideoID=t.getVideoID},{"./cache":77,"./format-utils":78,"./info-extras":81,"./sig":83,"./url-utils":84,"./utils":85,miniget:26,querystring:31,sax:35,
timers:71}],83:[function(y,J,D){const C=y("querystring");J=y("./cache");const m=y("./utils"),f=y("vm");D.cache=new J;D.getFunctions=(w,d)=>D.cache.getOrSet(w,async()=>{var p=await m.exposedMiniget(w,d).text();p=D.extractFunctions(p);if(!p||!p.length)throw Error("Could not extract functions");D.cache.set(w,p);return p});D.extractFunctions=w=>{const d=[];(()=>{const p=m.between(w,'a.set("alr","yes");c&&(c=',"(decodeURIC");if(p&&p.length){var t=`${p}=function(a)`,u=w.indexOf(t);if(0<=u){u=w.slice(u+
t.length);t=`var ${t}${m.cutAfterJSON(u)}`;if(u=m.between(t,'a=a.split("");',".")){var h=`var ${u}={`,k=w.indexOf(h);0>k?u="":(h=w.slice(k+h.length-1),u=`var ${u}=${m.cutAfterJSON(h)}`)}else u="";t=`${u};${t};${p}(sig);`;d.push(t)}}})();(()=>{var p=m.between(w,'&&(b=a.get("n"))&&(b=',"(b)");p.includes("[")&&(p=m.between(w,`${p.split("[")[0]}=[`,"]"));if(p&&p.length){const u=`${p}=function(a)`;var t=w.indexOf(u);0<=t&&(t=w.slice(t+u.length),p=`var ${u}${m.cutAfterJSON(t)};${p}(ncode);`,d.push(p))}})();
return d};D.setDownloadURL=(w,d,p)=>{const t=k=>{k=C.parse(k);if(!k.s||!d)return k.url;const q=new URL(decodeURIComponent(k.url));q.searchParams.set(k.sp?k.sp:"signature",d.runInNewContext({sig:decodeURIComponent(k.s)}));return q.toString()},u=k=>{const q=new URL(decodeURIComponent(k)),F=q.searchParams.get("n");if(!F||!p)return k;q.searchParams.set("n",p.runInNewContext({ncode:F}));return q.toString()},h=w.url||w.signatureCipher||w.cipher;w.url=w.url?u(h):u(t(h));delete w.signatureCipher;delete w.cipher};
D.decipherFormats=async(w,d,p)=>{let t={};d=await D.getFunctions(d,p);const u=d.length?new f.Script(d[0]):null,h=1<d.length?new f.Script(d[1]):null;w.forEach(k=>{D.setDownloadURL(k,u,h);t[k.url]=k});return t}},{"./cache":77,"./utils":85,querystring:31,vm:75}],84:[function(y,J,D){const C=new Set(["youtube.com","www.youtube.com","m.youtube.com","music.youtube.com","gaming.youtube.com"]),m=/^https?:\/\/(youtu\.be\/|(www\.)?youtube\.com\/(embed|v|shorts)\/)/;D.getURLVideoID=d=>{const p=new URL(d);var t=
p.searchParams.get("v");if(m.test(d)&&!t)t=p.pathname.split("/"),t="youtu.be"===p.host?t[1]:t[2];else if(p.hostname&&!C.has(p.hostname))throw Error("Not a YouTube domain");if(!t)throw Error(`No video id found: ${d}`);t=t.substring(0,11);if(!D.validateID(t))throw TypeError(`Video id (${t}) does not match expected `+`format (${w.toString()})`);return t};const f=/^https?:\/\//;D.getVideoID=d=>{if(D.validateID(d))return d;if(f.test(d))return D.getURLVideoID(d);throw Error(`No video id found: ${d}`);};
const w=/^[a-zA-Z0-9-_]{11}$/;D.validateID=d=>w.test(d);D.validateURL=d=>{try{return D.getURLVideoID(d),!0}catch(p){return!1}}},{}],85:[function(y,J,D){(function(C){(function(){const m=y("miniget");D.between=(w,d,p)=>{let t;if(d instanceof RegExp){d=w.match(d);if(!d)return"";t=d.index+d[0].length}else{t=w.indexOf(d);if(-1===t)return"";t+=d.length}w=w.slice(t);t=w.indexOf(p);return-1===t?"":w=w.slice(0,t)};D.parseAbbreviatedNumber=w=>{if(w=w.replace(",",".").replace(" ","").match(/([\d,.]+)([MK]?)/)){let [,
d,p]=w;d=parseFloat(d);return Math.round("M"===p?1E6*d:"K"===p?1E3*d:d)}return null};D.cutAfterJSON=w=>{let d,p;"["===w[0]?(d="[",p="]"):"{"===w[0]&&(d="{",p="}");if(!d)throw Error(`Can't cut unsupported JSON (need to begin with [ or { ) but got: ${w[0]}`);let t=!1,u=!1,h=0,k;for(k=0;k<w.length;k++)if('"'!==w[k]||u){if(u="\\"===w[k]&&!u,!t&&(w[k]===d?h++:w[k]===p&&h--,0===h))return w.substr(0,k+1)}else t=!t;throw Error("Can't cut unsupported JSON (no matching closing bracket found)");};D.playError=
(w,d,p=Error)=>(w=w&&w.playabilityStatus)&&d.includes(w.status)?new p(w.reason||w.messages&&w.messages[0]):null;D.exposedMiniget=(w,d={},p)=>{w=m(w,p||d.requestOptions);"function"===typeof d.requestCallback&&d.requestCallback(w);return w};D.deprecate=(w,d,p,t,u)=>{Object.defineProperty(w,d,{get:()=>{console.warn(`\`${t}\` will be removed in a near future release, `+`use \`${u}\` instead.`);return p}})};const f=y("../package.json");D.lastUpdateCheck=0;D.checkForUpdates=()=>!C.env.YTDL_NO_UPDATE&&!f.version.startsWith("0.0.0-")&&
432E5<=Date.now()-D.lastUpdateCheck?(D.lastUpdateCheck=Date.now(),m("https://api.github.com/repos/fent/node-ytdl-core/releases/latest",{headers:{"User-Agent":"ytdl-core"}}).text().then(w=>{JSON.parse(w).tag_name!==`v${f.version}`&&console.warn('\u001b[33mWARNING:\u001b[0m ytdl-core is out of date! Update with "npm install ytdl-core@latest".')},w=>{console.warn("Error checking for updates:",w.message);console.warn("You can disable this check by setting the `YTDL_NO_UPDATE` env variable.")})):null}).call(this)}).call(this,
y("_process"))},{"../package.json":86,_process:27,miniget:26}],86:[function(y,J,D){J.exports={name:"ytdl-core",description:"YouTube video downloader in pure javascript.",keywords:["youtube","video","download"],version:"4.10.1",repository:{type:"git",url:"git://github.com/fent/node-ytdl-core.git"},author:"fent <fentbox@gmail.com> (https://github.com/fent)",contributors:["Tobias Kutscha (https://github.com/TimeForANinja)","Andrew Kelley (https://github.com/andrewrk)","Mauricio Allende (https://github.com/mallendeo)",
"Rodrigo Altamirano (https://github.com/raltamirano)","Jim Buck (https://github.com/JimmyBoh)"],main:"./lib/index.js",types:"./typings/index.d.ts",files:["lib","typings"],scripts:{test:"nyc --reporter=lcov --reporter=text-summary npm run test:unit","test:unit":"mocha --ignore test/irl-test.js test/*-test.js --timeout 4000","test:irl":"mocha --timeout 16000 test/irl-test.js",lint:"eslint ./","lint:fix":"eslint --fix ./","lint:typings":"tslint typings/index.d.ts","lint:typings:fix":"tslint --fix typings/index.d.ts"},
dependencies:{m3u8stream:"^0.8.6",miniget:"^4.0.0",sax:"^1.1.3"},devDependencies:{"@types/node":"^13.1.0","assert-diff":"^3.0.1",dtslint:"^3.6.14",eslint:"^6.8.0",mocha:"^7.0.0","muk-require":"^1.2.0",nock:"^13.0.4",nyc:"^15.0.0",sinon:"^9.0.0","stream-equal":"~1.1.0",typescript:"^3.9.7"},engines:{node:">=10"},license:"MIT"}},{}]},{},[1])(1)});
