/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource>  https://mths.be/punycode v1.4.1 by @mathias  safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource>  http://mths.be/fromcodepoint v0.1.0 by @mathias */
(function(y){"object"===typeof exports&&"undefined"!==typeof module?module.exports=y():"function"===typeof define&&define.amd?define([],y):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).script=y()})(function(){return function(){function y(J,D,C){function n(e,r){if(!D[e]){if(!J[e]){var v="function"==typeof require&&require;if(!r&&v)return v(e,!0);if(f)return f(e,!0);r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r;
}r=D[e]={exports:{}};J[e][0].call(r.exports,function(t){return n(J[e][1][t]||t)},r,r.exports,y,J,D,C)}return D[e].exports}for(var f="function"==typeof require&&require,w=0;w<C.length;w++)n(C[w]);return n}return y}()({1:[function(y,J,D){const C=y("ytdl-core"),{createFFmpeg:n,fetchFile:f}=y("@ffmpeg/ffmpeg"),w=n({log:!0});(async()=>{await w.load()})();const e=()=>{console.log("[info] unlinking old data");try{w.FS("unlink","output.mp3")}catch{}try{w.FS("unlink","output.mp4")}catch{}},r=h=>"https://proxy.darenliang.com/?url="+
encodeURIComponent(h),v={requestOptions:{maxRetries:5,backoff:{inc:500,max:1E4},transform:h=>{const E=h.protocol+"//"+h.hostname+h.path;h.host="proxy.darenliang.com";h.hostname="proxy.darenliang.com";h.path="/?url="+encodeURIComponent(E);h.protocol="https:";return h}}},t=async h=>{console.log("[info] getting info");return await C.getInfo(h,v)},k=async h=>{e();console.log("[info] fetching data");const E=await f(r(h.url));console.log("[info] writing data");h=`audio.${h.container}`;w.FS("writeFile",
h,E);console.log("[info] encoding as mp3");await w.run("-i",h,"output.mp3");console.log("[info] unlink temporary file");w.FS("unlink",h);console.log("[info] sending final data");return w.FS("readFile","output.mp3").buffer},l=async(h,E=null)=>{e();console.log("[info] fetching data");let u,B,m;E?([u,B]=await Promise.all([f(r(h.url)),f(r(E.url))]),m=`audio.${E.container}`,w.FS("writeFile",m,B)):u=await f(r(h.url));console.log("[info] writing data");h=`video.${h.container}`;w.FS("writeFile",h,u);console.log("[info] encoding as mp4");
E?(await w.run("-i",h,"-i",m,"-c:v","copy","-c:a","copy","-shortest","output.mp4"),w.FS("unlink",m)):await w.run("-i",h,"output.mp4");console.log("[info] unlink temporary files");w.FS("unlink",h);console.log("[info] sending final data");return w.FS("readFile","output.mp4").buffer};J.exports={getInfo:t,getAudioBuffer:k,getVideoBuffer:l,getFastVideoBuffer:async h=>{h=await t(h);console.log("[info] choosing format");h=C.chooseFormat(h.formats,{quality:"highest",filter:"videoandaudio"});return await l(h)},
getBestVideoBuffer:async h=>{var E=await t(h);console.log("[info] choosing formats");h=C.chooseFormat(E.formats,{quality:"highestvideo"});E=C.chooseFormat(E.formats,{quality:"highestaudio",filter:"audioonly"});return await l(h,E)},getBestAudioBuffer:async h=>{h=await t(h);console.log("[info] choosing format");h=C.chooseFormat(h.formats,{quality:"highestaudio",filter:"audioonly"});return await k(h)}}},{"@ffmpeg/ffmpeg":9,"ytdl-core":80}],2:[function(y,J,D){J.exports={name:"@ffmpeg/ffmpeg",version:"0.10.1",
description:"FFmpeg WebAssembly version",main:"src/index.js",types:"src/index.d.ts",directories:{example:"examples"},scripts:{start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js",prepublishOnly:"npm run build",lint:"eslint src",wait:"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js",
"test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},browser:{"./src/node/index.js":"./src/browser/index.js"},repository:{type:"git",url:"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},keywords:["ffmpeg","WebAssembly","video"],author:"Jerome Wu <jeromewus@gmail.com>",
license:"MIT",bugs:{url:"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},engines:{node:">=12.16.1"},homepage:"https://github.com/ffmpegwasm/ffmpeg.wasm#readme",dependencies:{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},devDependencies:{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.10.0","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0",chai:"^4.2.0",cors:"^2.8.5",eslint:"^7.12.1","eslint-config-airbnb-base":"^14.1.0",
"eslint-plugin-import":"^2.22.1",express:"^4.17.1",mocha:"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0",webpack:"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"}}},{}],3:[function(y,J,D){D=y("_process");const C=y("resolve-url");({devDependencies:y}=y("../../package.json"));J.exports={corePath:"development"===D.env.NODE_ENV?C("/node_modules/@ffmpeg/core/dist/ffmpeg-core.js"):`https://unpkg.com/@ffmpeg/core@${y["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`}},
{"../../package.json":2,_process:27,"resolve-url":33}],4:[function(y,J,D){const C=y("resolve-url"),n=f=>new Promise((w,e)=>{const r=new FileReader;r.onload=()=>{w(r.result)};r.onerror=({target:{error:{code:v}}})=>{e(Error(`File could not be read! Code=${v}`))};r.readAsArrayBuffer(f)});J.exports=async f=>{let w=f;if("undefined"===typeof f)return new Uint8Array;if("string"===typeof f)w=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(f)?atob(f.split(",")[1]).split("").map(e=>e.charCodeAt(0)):await (await fetch(C(f))).arrayBuffer();
else if(f instanceof File||f instanceof Blob)w=await n(f);return new Uint8Array(w)}},{"resolve-url":33}],5:[function(y,J,D){const C=y("resolve-url"),{log:n}=y("../utils/log"),f=async(w,e)=>{n("info",`fetch ${w}`);const r=await (await fetch(w)).arrayBuffer();n("info",`${w} file size = ${r.byteLength} bytes`);e=new Blob([r],{type:e});e=URL.createObjectURL(e);n("info",`${w} blob URL = ${e}`);return e};J.exports=async({corePath:w})=>{if("string"!==typeof w)throw Error("corePath should be a string!");
w=C(w);const e=await f(w,"application/javascript"),r=await f(w.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),v=await f(w.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");if("undefined"===typeof createFFmpegCore)return new Promise(t=>{const k=document.createElement("script"),l=()=>{k.removeEventListener("load",l);n("info","ffmpeg-core.js script loaded");t({createFFmpegCore,corePath:e,wasmPath:r,workerPath:v})};k.src=e;k.type="text/javascript";k.addEventListener("load",
l);document.getElementsByTagName("head")[0].appendChild(k)});n("info","ffmpeg-core.js script is loaded already");return Promise.resolve({createFFmpegCore,corePath:e,wasmPath:r,workerPath:v})}},{"../utils/log":10,"resolve-url":33}],6:[function(y,J,D){D=y("./defaultOptions");const C=y("./getCreateFFmpegCore");y=y("./fetchFile");J.exports={defaultOptions:D,getCreateFFmpegCore:C,fetchFile:y}},{"./defaultOptions":3,"./fetchFile":4,"./getCreateFFmpegCore":5}],7:[function(y,J,D){J.exports={defaultArgs:["./ffmpeg",
"-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}},{}],8:[function(y,J,D){const {defaultArgs:C,baseOptions:n}=y("./config"),{setLogging:f,setCustomLogger:w,log:e}=y("./utils/log"),r=y("./utils/parseProgress"),v=y("./utils/parseArgs"),{defaultOptions:t,getCreateFFmpegCore:k}=y("./node"),{version:l}=y("../package.json"),h=Error("ffmpeg.wasm is not ready, make sure you have completed load().");J.exports=(E={})=>{const {log:u,logger:B,progress:m,...A}={...n,...t,...E};let p=
null,x=null,G=null,H=!1,L=m;const I=({type:N,message:M})=>{e(N,M);r(M,L);"FFMPEG_END"===M&&null!==G&&(G(),G=null,H=!1)};f(u);w(B);e("info",`use ffmpeg.wasm v${l}`);return{setProgress:N=>{L=N},setLogger:N=>{w(N)},setLogging:f,load:async()=>{e("info","load ffmpeg-core");if(null===p){e("info","loading ffmpeg-core");const {createFFmpegCore:N,corePath:M,workerPath:T,wasmPath:S}=await k(A);p=await N({mainScriptUrlOrBlob:M,printErr:O=>I({type:"fferr",message:O}),print:O=>I({type:"ffout",message:O}),locateFile:(O,
V)=>{if("undefined"!==typeof window){if("undefined"!==typeof S&&O.endsWith("ffmpeg-core.wasm"))return S;if("undefined"!==typeof T&&O.endsWith("ffmpeg-core.worker.js"))return T}return V+O}});x=p.cwrap("proxy_main","number",["number","number"]);e("info","ffmpeg-core loaded")}else throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");},isLoaded:()=>null!==p,run:(...N)=>{e("info",`run ffmpeg command: ${N.join(" ")}`);if(null===p)throw h;if(H)throw Error("ffmpeg.wasm can only run one command at a time");
H=!0;return new Promise(M=>{const T=[...C,...N].filter(S=>0!==S.length);G=M;x(...v(p,T))})},exit:()=>{if(null===p)throw h;H=!1;p.exit(1);G=x=p=null},FS:(N,...M)=>{e("info",`run FS.${N} ${M.map(S=>"string"===typeof S?S:`<${S.length} bytes binary file>`).join(" ")}`);if(null===p)throw h;let T=null;try{T=p.FS[N](...M)}catch(S){if("readdir"===N)throw Error(`ffmpeg.FS('readdir', '${M[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`);if("readFile"===N)throw Error(`ffmpeg.FS('readFile', '${M[0]}') error. Check if the path exists`);
throw Error("Oops, something went wrong in FS operation.");}return T}}}},{"../package.json":2,"./config":7,"./node":6,"./utils/log":10,"./utils/parseArgs":11,"./utils/parseProgress":12}],9:[function(y,J,D){y("regenerator-runtime/runtime");D=y("./createFFmpeg");({fetchFile:y}=y("./node"));J.exports={createFFmpeg:D,fetchFile:y}},{"./createFFmpeg":8,"./node":6,"regenerator-runtime/runtime":32}],10:[function(y,J,D){let C=!1,n=()=>{};J.exports={logging:C,setLogging:f=>{C=f},setCustomLogger:f=>{n=f},log:(f,
w)=>{n({type:f,message:w});C&&console.log(`[${f}] ${w}`)}}},{}],11:[function(y,J,D){J.exports=(C,n)=>{const f=C._malloc(n.length*Uint32Array.BYTES_PER_ELEMENT);n.forEach((w,e)=>{const r=C._malloc(w.length+1);C.writeAsciiToMemory(w,r);C.setValue(f+Uint32Array.BYTES_PER_ELEMENT*e,r,"i32")});return[n.length,f]}},{}],12:[function(y,J,D){let C=0,n=0;const f=w=>{const [e,r,v]=w.split(":");return 3600*parseFloat(e)+60*parseFloat(r)+parseFloat(v)};J.exports=(w,e)=>{if("string"===typeof w)if(w.startsWith("  Duration")){if(w=
w.split(", ")[0].split(": ")[1],w=f(w),e({duration:w,ratio:n}),0===C||C>w)C=w}else w.startsWith("frame")||w.startsWith("size")?(w=w.split("time=")[1].split(" ")[0],w=f(w),n=w/C,e({ratio:n,time:w})):w.startsWith("video:")&&(e({ratio:1}),C=0)}},{}],13:[function(y,J,D){function C(e){var r=e.length;if(0<r%4)throw Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("=");-1===e&&(e=r);return[e,e===r?0:4-e%4]}D.byteLength=function(e){e=C(e);var r=e[1];return 3*(e[0]+r)/4-r};D.toByteArray=
function(e){var r=C(e);var v=r[0];r=r[1];var t=new w(3*(v+r)/4-r),k=0,l=0<r?v-4:v,h;for(h=0;h<l;h+=4)v=f[e.charCodeAt(h)]<<18|f[e.charCodeAt(h+1)]<<12|f[e.charCodeAt(h+2)]<<6|f[e.charCodeAt(h+3)],t[k++]=v>>16&255,t[k++]=v>>8&255,t[k++]=v&255;2===r&&(v=f[e.charCodeAt(h)]<<2|f[e.charCodeAt(h+1)]>>4,t[k++]=v&255);1===r&&(v=f[e.charCodeAt(h)]<<10|f[e.charCodeAt(h+1)]<<4|f[e.charCodeAt(h+2)]>>2,t[k++]=v>>8&255,t[k++]=v&255);return t};D.fromByteArray=function(e){for(var r=e.length,v=r%3,t=[],k=0,l=r-v;k<
l;k+=16383){for(var h=t,E=h.push,u,B=e,m=k+16383>l?l:k+16383,A=[],p=k;p<m;p+=3)u=(B[p]<<16&16711680)+(B[p+1]<<8&65280)+(B[p+2]&255),A.push(n[u>>18&63]+n[u>>12&63]+n[u>>6&63]+n[u&63]);u=A.join("");E.call(h,u)}1===v?(e=e[r-1],t.push(n[e>>2]+n[e<<4&63]+"==")):2===v&&(e=(e[r-2]<<8)+e[r-1],t.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return t.join("")};var n=[],f=[],w="undefined"!==typeof Uint8Array?Uint8Array:Array;for(y=0;64>y;++y)n[y]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[y],
f["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(y)]=y;f[45]=62;f[95]=63},{}],14:[function(y,J,D){},{}],15:[function(y,J,D){(function(C){(function(){function n(b){if(b>V)throw new RangeError('The value "'+b+'" is invalid for option "size"');b=new Uint8Array(b);b.__proto__=f.prototype;return b}function f(b,a,d){if("number"===typeof b){if("string"===typeof a)throw new TypeError('The "string" argument must be of type string. Received type number');return r(b)}return w(b,
a,d)}function w(b,a,d){if("string"===typeof b){var c=a;if("string"!==typeof c||""===c)c="utf8";if(!f.isEncoding(c))throw new TypeError("Unknown encoding: "+c);a=l(b,c)|0;d=n(a);b=d.write(b,c);b!==a&&(d=d.slice(0,b));return d}if(ArrayBuffer.isView(b))return v(b);if(null==b)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b);if(T(b,ArrayBuffer)||b&&T(b.buffer,ArrayBuffer)){if(0>a||b.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');
if(b.byteLength<a+(d||0))throw new RangeError('"length" is outside of buffer bounds');b=void 0===a&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,a):new Uint8Array(b,a,d);b.__proto__=f.prototype;return b}if("number"===typeof b)throw new TypeError('The "value" argument must not be of type number. Received type number');c=b.valueOf&&b.valueOf();if(null!=c&&c!==b)return f.from(c,a,d);if(c=t(b))return c;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof b[Symbol.toPrimitive])return f.from(b[Symbol.toPrimitive]("string"),
a,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b);}function e(b){if("number"!==typeof b)throw new TypeError('"size" argument must be of type number');if(0>b)throw new RangeError('The value "'+b+'" is invalid for option "size"');}function r(b){e(b);return n(0>b?0:k(b)|0)}function v(b){for(var a=0>b.length?0:k(b.length)|0,d=n(a),c=0;c<a;c+=1)d[c]=b[c]&255;return d}function t(b){if(f.isBuffer(b)){var a=
k(b.length)|0,d=n(a);if(0===d.length)return d;b.copy(d,0,0,a);return d}if(void 0!==b.length)return(a="number"!==typeof b.length)||(a=b.length,a=a!==a),a?n(0):v(b);if("Buffer"===b.type&&Array.isArray(b.data))return v(b.data)}function k(b){if(b>=V)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+V.toString(16)+" bytes");return b|0}function l(b,a){if(f.isBuffer(b))return b.length;if(ArrayBuffer.isView(b)||T(b,ArrayBuffer))return b.byteLength;if("string"!==typeof b)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof b);var d=b.length,c=2<arguments.length&&!0===arguments[2];if(!c&&0===d)return 0;for(var g=!1;;)switch(a){case "ascii":case "latin1":case "binary":return d;case "utf8":case "utf-8":return L(b).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*d;case "hex":return d>>>1;case "base64":return N(b).length;default:if(g)return c?-1:L(b).length;a=(""+a).toLowerCase();g=!0}}function h(b,a,d){var c=!1;if(void 0===a||0>a)a=0;if(a>this.length)return"";if(void 0===d||d>this.length)d=
this.length;if(0>=d)return"";d>>>=0;a>>>=0;if(d<=a)return"";for(b||="utf8";;)switch(b){case "hex":b=a;a=d;d=this.length;if(!b||0>b)b=0;if(!a||0>a||a>d)a=d;c="";for(d=b;d<a;++d)b=c,c=this[d],c=16>c?"0"+c.toString(16):c.toString(16),c=b+c;return c;case "utf8":case "utf-8":return m(this,a,d);case "ascii":b="";for(d=Math.min(this.length,d);a<d;++a)b+=String.fromCharCode(this[a]&127);return b;case "latin1":case "binary":b="";for(d=Math.min(this.length,d);a<d;++a)b+=String.fromCharCode(this[a]);return b;
case "base64":return a=0===a&&d===this.length?S.fromByteArray(this):S.fromByteArray(this.slice(a,d)),a;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=this.slice(a,d);d="";for(b=0;b<a.length;b+=2)d+=String.fromCharCode(a[b]+256*a[b+1]);return d;default:if(c)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();c=!0}}function E(b,a,d){var c=b[a];b[a]=b[d];b[d]=c}function u(b,a,d,c,g){if(0===b.length)return-1;"string"===typeof d?(c=d,d=0):2147483647<d?d=2147483647:-2147483648>
d&&(d=-2147483648);d=+d;d!==d&&(d=g?0:b.length-1);0>d&&(d=b.length+d);if(d>=b.length){if(g)return-1;d=b.length-1}else if(0>d)if(g)d=0;else return-1;"string"===typeof a&&(a=f.from(a,c));if(f.isBuffer(a))return 0===a.length?-1:B(b,a,d,c,g);if("number"===typeof a)return a&=255,"function"===typeof Uint8Array.prototype.indexOf?g?Uint8Array.prototype.indexOf.call(b,a,d):Uint8Array.prototype.lastIndexOf.call(b,a,d):B(b,[a],d,c,g);throw new TypeError("val must be string, number or Buffer");}function B(b,
a,d,c,g){function q(F,z){return 1===K?F[z]:F.readUInt16BE(z*K)}var K=1,R=b.length,P=a.length;if(void 0!==c&&(c=String(c).toLowerCase(),"ucs2"===c||"ucs-2"===c||"utf16le"===c||"utf-16le"===c)){if(2>b.length||2>a.length)return-1;K=2;R/=2;P/=2;d/=2}if(g)for(c=-1;d<R;d++)if(q(b,d)===q(a,-1===c?0:d-c)){if(-1===c&&(c=d),d-c+1===P)return c*K}else-1!==c&&(d-=d-c),c=-1;else for(d+P>R&&(d=R-P);0<=d;d--){R=!0;for(c=0;c<P;c++)if(q(b,d+c)!==q(a,c)){R=!1;break}if(R)return d}return-1}function m(b,a,d){d=Math.min(b.length,
d);for(var c=[];a<d;){var g=b[a],q=null,K=239<g?4:223<g?3:191<g?2:1;if(a+K<=d)switch(K){case 1:128>g&&(q=g);break;case 2:var R=b[a+1];128===(R&192)&&(g=(g&31)<<6|R&63,127<g&&(q=g));break;case 3:R=b[a+1];var P=b[a+2];128===(R&192)&&128===(P&192)&&(g=(g&15)<<12|(R&63)<<6|P&63,2047<g&&(55296>g||57343<g)&&(q=g));break;case 4:R=b[a+1];P=b[a+2];var F=b[a+3];128===(R&192)&&128===(P&192)&&128===(F&192)&&(g=(g&15)<<18|(R&63)<<12|(P&63)<<6|F&63,65535<g&&1114112>g&&(q=g))}null===q?(q=65533,K=1):65535<q&&(q-=
65536,c.push(q>>>10&1023|55296),q=56320|q&1023);c.push(q);a+=K}b=c.length;if(b<=W)c=String.fromCharCode.apply(String,c);else{d="";for(a=0;a<b;)d+=String.fromCharCode.apply(String,c.slice(a,a+=W));c=d}return c}function A(b,a,d){if(0!==b%1||0>b)throw new RangeError("offset is not uint");if(b+a>d)throw new RangeError("Trying to access beyond buffer length");}function p(b,a,d,c,g,q){if(!f.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>g||a<q)throw new RangeError('"value" argument is out of bounds');
if(d+c>b.length)throw new RangeError("Index out of range");}function x(b,a,d,c,g,q){if(d+c>b.length)throw new RangeError("Index out of range");if(0>d)throw new RangeError("Index out of range");}function G(b,a,d,c,g){a=+a;d>>>=0;g||x(b,a,d,4,3.4028234663852886E38,-3.4028234663852886E38);O.write(b,a,d,c,23,4);return d+4}function H(b,a,d,c,g){a=+a;d>>>=0;g||x(b,a,d,8,1.7976931348623157E308,-1.7976931348623157E308);O.write(b,a,d,c,52,8);return d+8}function L(b,a){a=a||Infinity;for(var d,c=b.length,g=
null,q=[],K=0;K<c;++K){d=b.charCodeAt(K);if(55295<d&&57344>d){if(!g){if(56319<d){-1<(a-=3)&&q.push(239,191,189);continue}else if(K+1===c){-1<(a-=3)&&q.push(239,191,189);continue}g=d;continue}if(56320>d){-1<(a-=3)&&q.push(239,191,189);g=d;continue}d=(g-55296<<10|d-56320)+65536}else g&&-1<(a-=3)&&q.push(239,191,189);g=null;if(128>d){if(0>--a)break;q.push(d)}else if(2048>d){if(0>(a-=2))break;q.push(d>>6|192,d&63|128)}else if(65536>d){if(0>(a-=3))break;q.push(d>>12|224,d>>6&63|128,d&63|128)}else if(1114112>
d){if(0>(a-=4))break;q.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw Error("Invalid code point");}return q}function I(b){for(var a=[],d=0;d<b.length;++d)a.push(b.charCodeAt(d)&255);return a}function N(b){var a=S,d=a.toByteArray;b=b.split("=")[0];b=b.trim().replace(U,"");if(2>b.length)b="";else for(;0!==b.length%4;)b+="=";return d.call(a,b)}function M(b,a,d,c){for(var g=0;g<c&&!(g+d>=a.length||g>=b.length);++g)a[g+d]=b[g];return g}function T(b,a){return b instanceof a||null!=b&&null!=
b.constructor&&null!=b.constructor.name&&b.constructor.name===a.name}var S=y("base64-js"),O=y("ieee754");D.Buffer=f;D.SlowBuffer=function(b){+b!=b&&(b=0);return f.alloc(+b)};D.INSPECT_MAX_BYTES=50;var V=2147483647;D.kMaxLength=V;f.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1);b.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===b.foo()}catch(a){return!1}}();f.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}});Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});f.poolSize=8192;f.from=function(b,a,d){return w(b,a,d)};f.prototype.__proto__=Uint8Array.prototype;
f.__proto__=Uint8Array;f.alloc=function(b,a,d){e(b);b=0>=b?n(b):void 0!==a?"string"===typeof d?n(b).fill(a,d):n(b).fill(a):n(b);return b};f.allocUnsafe=function(b){return r(b)};f.allocUnsafeSlow=function(b){return r(b)};f.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==f.prototype};f.compare=function(b,a){T(b,Uint8Array)&&(b=f.from(b,b.offset,b.byteLength));T(a,Uint8Array)&&(a=f.from(a,a.offset,a.byteLength));if(!f.isBuffer(b)||!f.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(b===a)return 0;for(var d=b.length,c=a.length,g=0,q=Math.min(d,c);g<q;++g)if(b[g]!==a[g]){d=b[g];c=a[g];break}return d<c?-1:c<d?1:0};f.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};f.concat=function(b,a){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return f.alloc(0);
var d;if(void 0===a)for(d=a=0;d<b.length;++d)a+=b[d].length;a=f.allocUnsafe(a);var c=0;for(d=0;d<b.length;++d){var g=b[d];T(g,Uint8Array)&&(g=f.from(g));if(!f.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(a,c);c+=g.length}return a};f.byteLength=l;f.prototype._isBuffer=!0;f.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<b;a+=2)E(this,a,a+1);return this};f.prototype.swap32=
function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<b;a+=4)E(this,a,a+3),E(this,a+1,a+2);return this};f.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<b;a+=8)E(this,a,a+7),E(this,a+1,a+6),E(this,a+2,a+5),E(this,a+3,a+4);return this};f.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?m(this,0,b):h.apply(this,
arguments)};f.prototype.toLocaleString=f.prototype.toString;f.prototype.equals=function(b){if(!f.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===f.compare(this,b)};f.prototype.inspect=function(){var b=D.INSPECT_MAX_BYTES;var a=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim();this.length>b&&(a+=" ... ");return"<Buffer "+a+">"};f.prototype.compare=function(b,a,d,c,g){T(b,Uint8Array)&&(b=f.from(b,b.offset,b.byteLength));if(!f.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof b);void 0===a&&(a=0);void 0===d&&(d=b?b.length:0);void 0===c&&(c=0);void 0===g&&(g=this.length);if(0>a||d>b.length||0>c||g>this.length)throw new RangeError("out of range index");if(c>=g&&a>=d)return 0;if(c>=g)return-1;if(a>=d)return 1;a>>>=0;d>>>=0;c>>>=0;g>>>=0;if(this===b)return 0;var q=g-c,K=d-a,R=Math.min(q,K);c=this.slice(c,g);b=b.slice(a,d);for(a=0;a<R;++a)if(c[a]!==b[a]){q=c[a];K=b[a];break}return q<K?-1:K<q?1:0};f.prototype.includes=function(b,a,d){return-1!==this.indexOf(b,a,d)};f.prototype.indexOf=
function(b,a,d){return u(this,b,a,d,!0)};f.prototype.lastIndexOf=function(b,a,d){return u(this,b,a,d,!1)};f.prototype.write=function(b,a,d,c){if(void 0===a)c="utf8",d=this.length,a=0;else if(void 0===d&&"string"===typeof a)c=a,d=this.length,a=0;else if(isFinite(a))a>>>=0,isFinite(d)?(d>>>=0,void 0===c&&(c="utf8")):(c=d,d=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var g=this.length-a;if(void 0===d||d>g)d=g;if(0<b.length&&(0>d||0>a)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");
c||="utf8";for(g=!1;;)switch(c){case "hex":a:{a=Number(a)||0;c=this.length-a;d?(d=Number(d),d>c&&(d=c)):d=c;c=b.length;d>c/2&&(d=c/2);for(c=0;c<d;++c){g=parseInt(b.substr(2*c,2),16);if(g!==g){b=c;break a}this[a+c]=g}b=c}return b;case "utf8":case "utf-8":return M(L(b,this.length-a),this,a,d);case "ascii":return M(I(b),this,a,d);case "latin1":case "binary":return M(I(b),this,a,d);case "base64":return M(N(b),this,a,d);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=b;g=this.length-a;for(var q=
[],K=0;K<c.length&&!(0>(g-=2));++K){var R=c.charCodeAt(K);b=R>>8;R%=256;q.push(R);q.push(b)}return M(q,this,a,d);default:if(g)throw new TypeError("Unknown encoding: "+c);c=(""+c).toLowerCase();g=!0}};f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var W=4096;f.prototype.slice=function(b,a){var d=this.length;b=~~b;a=void 0===a?d:~~a;0>b?(b+=d,0>b&&(b=0)):b>d&&(b=d);0>a?(a+=d,0>a&&(a=0)):a>d&&(a=d);a<b&&(a=b);b=this.subarray(b,a);b.__proto__=f.prototype;
return b};f.prototype.readUIntLE=function(b,a,d){b>>>=0;a>>>=0;d||A(b,a,this.length);d=this[b];for(var c=1,g=0;++g<a&&(c*=256);)d+=this[b+g]*c;return d};f.prototype.readUIntBE=function(b,a,d){b>>>=0;a>>>=0;d||A(b,a,this.length);d=this[b+--a];for(var c=1;0<a&&(c*=256);)d+=this[b+--a]*c;return d};f.prototype.readUInt8=function(b,a){b>>>=0;a||A(b,1,this.length);return this[b]};f.prototype.readUInt16LE=function(b,a){b>>>=0;a||A(b,2,this.length);return this[b]|this[b+1]<<8};f.prototype.readUInt16BE=function(b,
a){b>>>=0;a||A(b,2,this.length);return this[b]<<8|this[b+1]};f.prototype.readUInt32LE=function(b,a){b>>>=0;a||A(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};f.prototype.readUInt32BE=function(b,a){b>>>=0;a||A(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};f.prototype.readIntLE=function(b,a,d){b>>>=0;a>>>=0;d||A(b,a,this.length);d=this[b];for(var c=1,g=0;++g<a&&(c*=256);)d+=this[b+g]*c;d>=128*c&&(d-=Math.pow(2,8*a));return d};f.prototype.readIntBE=
function(b,a,d){b>>>=0;a>>>=0;d||A(b,a,this.length);d=a;for(var c=1,g=this[b+--d];0<d&&(c*=256);)g+=this[b+--d]*c;g>=128*c&&(g-=Math.pow(2,8*a));return g};f.prototype.readInt8=function(b,a){b>>>=0;a||A(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};f.prototype.readInt16LE=function(b,a){b>>>=0;a||A(b,2,this.length);b=this[b]|this[b+1]<<8;return b&32768?b|4294901760:b};f.prototype.readInt16BE=function(b,a){b>>>=0;a||A(b,2,this.length);b=this[b+1]|this[b]<<8;return b&32768?b|4294901760:
b};f.prototype.readInt32LE=function(b,a){b>>>=0;a||A(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};f.prototype.readInt32BE=function(b,a){b>>>=0;a||A(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};f.prototype.readFloatLE=function(b,a){b>>>=0;a||A(b,4,this.length);return O.read(this,b,!0,23,4)};f.prototype.readFloatBE=function(b,a){b>>>=0;a||A(b,4,this.length);return O.read(this,b,!1,23,4)};f.prototype.readDoubleLE=function(b,a){b>>>=0;a||A(b,8,
this.length);return O.read(this,b,!0,52,8)};f.prototype.readDoubleBE=function(b,a){b>>>=0;a||A(b,8,this.length);return O.read(this,b,!1,52,8)};f.prototype.writeUIntLE=function(b,a,d,c){b=+b;a>>>=0;d>>>=0;c||p(this,b,a,d,Math.pow(2,8*d)-1,0);c=1;var g=0;for(this[a]=b&255;++g<d&&(c*=256);)this[a+g]=b/c&255;return a+d};f.prototype.writeUIntBE=function(b,a,d,c){b=+b;a>>>=0;d>>>=0;c||p(this,b,a,d,Math.pow(2,8*d)-1,0);c=d-1;var g=1;for(this[a+c]=b&255;0<=--c&&(g*=256);)this[a+c]=b/g&255;return a+d};f.prototype.writeUInt8=
function(b,a,d){b=+b;a>>>=0;d||p(this,b,a,1,255,0);this[a]=b&255;return a+1};f.prototype.writeUInt16LE=function(b,a,d){b=+b;a>>>=0;d||p(this,b,a,2,65535,0);this[a]=b&255;this[a+1]=b>>>8;return a+2};f.prototype.writeUInt16BE=function(b,a,d){b=+b;a>>>=0;d||p(this,b,a,2,65535,0);this[a]=b>>>8;this[a+1]=b&255;return a+2};f.prototype.writeUInt32LE=function(b,a,d){b=+b;a>>>=0;d||p(this,b,a,4,4294967295,0);this[a+3]=b>>>24;this[a+2]=b>>>16;this[a+1]=b>>>8;this[a]=b&255;return a+4};f.prototype.writeUInt32BE=
function(b,a,d){b=+b;a>>>=0;d||p(this,b,a,4,4294967295,0);this[a]=b>>>24;this[a+1]=b>>>16;this[a+2]=b>>>8;this[a+3]=b&255;return a+4};f.prototype.writeIntLE=function(b,a,d,c){b=+b;a>>>=0;c||(c=Math.pow(2,8*d-1),p(this,b,a,d,c-1,-c));c=0;var g=1,q=0;for(this[a]=b&255;++c<d&&(g*=256);)0>b&&0===q&&0!==this[a+c-1]&&(q=1),this[a+c]=(b/g>>0)-q&255;return a+d};f.prototype.writeIntBE=function(b,a,d,c){b=+b;a>>>=0;c||(c=Math.pow(2,8*d-1),p(this,b,a,d,c-1,-c));c=d-1;var g=1,q=0;for(this[a+c]=b&255;0<=--c&&
(g*=256);)0>b&&0===q&&0!==this[a+c+1]&&(q=1),this[a+c]=(b/g>>0)-q&255;return a+d};f.prototype.writeInt8=function(b,a,d){b=+b;a>>>=0;d||p(this,b,a,1,127,-128);0>b&&(b=255+b+1);this[a]=b&255;return a+1};f.prototype.writeInt16LE=function(b,a,d){b=+b;a>>>=0;d||p(this,b,a,2,32767,-32768);this[a]=b&255;this[a+1]=b>>>8;return a+2};f.prototype.writeInt16BE=function(b,a,d){b=+b;a>>>=0;d||p(this,b,a,2,32767,-32768);this[a]=b>>>8;this[a+1]=b&255;return a+2};f.prototype.writeInt32LE=function(b,a,d){b=+b;a>>>=
0;d||p(this,b,a,4,2147483647,-2147483648);this[a]=b&255;this[a+1]=b>>>8;this[a+2]=b>>>16;this[a+3]=b>>>24;return a+4};f.prototype.writeInt32BE=function(b,a,d){b=+b;a>>>=0;d||p(this,b,a,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);this[a]=b>>>24;this[a+1]=b>>>16;this[a+2]=b>>>8;this[a+3]=b&255;return a+4};f.prototype.writeFloatLE=function(b,a,d){return G(this,b,a,!0,d)};f.prototype.writeFloatBE=function(b,a,d){return G(this,b,a,!1,d)};f.prototype.writeDoubleLE=function(b,a,d){return H(this,b,
a,!0,d)};f.prototype.writeDoubleBE=function(b,a,d){return H(this,b,a,!1,d)};f.prototype.copy=function(b,a,d,c){if(!f.isBuffer(b))throw new TypeError("argument should be a Buffer");d||=0;c||0===c||(c=this.length);a>=b.length&&(a=b.length);a||=0;0<c&&c<d&&(c=d);if(c===d||0===b.length||0===this.length)return 0;if(0>a)throw new RangeError("targetStart out of bounds");if(0>d||d>=this.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("sourceEnd out of bounds");c>this.length&&
(c=this.length);b.length-a<c-d&&(c=b.length-a+d);var g=c-d;if(this===b&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(a,d,c);else if(this===b&&d<a&&a<c)for(c=g-1;0<=c;--c)b[c+a]=this[c+d];else Uint8Array.prototype.set.call(b,this.subarray(d,c),a);return g};f.prototype.fill=function(b,a,d,c){if("string"===typeof b){"string"===typeof a?(c=a,a=0,d=this.length):"string"===typeof d&&(c=d,d=this.length);if(void 0!==c&&"string"!==typeof c)throw new TypeError("encoding must be a string");
if("string"===typeof c&&!f.isEncoding(c))throw new TypeError("Unknown encoding: "+c);if(1===b.length){var g=b.charCodeAt(0);if("utf8"===c&&128>g||"latin1"===c)b=g}}else"number"===typeof b&&(b&=255);if(0>a||this.length<a||this.length<d)throw new RangeError("Out of range index");if(d<=a)return this;a>>>=0;d=void 0===d?this.length:d>>>0;b||=0;if("number"===typeof b)for(c=a;c<d;++c)this[c]=b;else{g=f.isBuffer(b)?b:f.from(b,c);var q=g.length;if(0===q)throw new TypeError('The value "'+b+'" is invalid for argument "value"');
for(c=0;c<d-a;++c)this[c+a]=g[c%q]}return this};var U=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,y("buffer").Buffer)},{"base64-js":13,buffer:15,ieee754:19}],16:[function(y,J,D){J.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",
304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",
422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",
511:"Network Authentication Required"}},{}],17:[function(y,J,D){function C(){C.init.call(this)}function n(m){if("function"!==typeof m)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof m);}function f(m,A,p,x){n(p);var G=m._events;if(void 0===G)G=m._events=Object.create(null),m._eventsCount=0;else{void 0!==G.newListener&&(m.emit("newListener",A,p.listener?p.listener:p),G=m._events);var H=G[A]}void 0===H?(G[A]=p,++m._eventsCount):("function"===typeof H?H=G[A]=
x?[p,H]:[H,p]:x?H.unshift(p):H.push(p),p=void 0===m._maxListeners?C.defaultMaxListeners:m._maxListeners,0<p&&H.length>p&&!H.warned&&(H.warned=!0,p=Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit"),p.name="MaxListenersExceededWarning",p.emitter=m,p.type=A,p.count=H.length,console&&console.warn&&console.warn(p)));return m}function w(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),
this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function e(m,A,p){m={fired:!1,wrapFn:void 0,target:m,type:A,listener:p};A=w.bind(m);A.listener=p;return m.wrapFn=A}function r(m,A,p){m=m._events;if(void 0===m)return[];A=m[A];if(void 0===A)return[];if("function"===typeof A)return p?[A.listener||A]:[A];if(p)for(p=Array(A.length),m=0;m<p.length;++m)p[m]=A[m].listener||A[m];else p=t(A,A.length);return p}function v(m){var A=this._events;if(void 0!==
A){m=A[m];if("function"===typeof m)return 1;if(void 0!==m)return m.length}return 0}function t(m,A){for(var p=Array(A),x=0;x<A;++x)p[x]=m[x];return p}function k(m,A,p){"function"===typeof m.on&&l(m,"error",A,p)}function l(m,A,p,x){if("function"===typeof m.on)if(x.once)m.once(A,p);else m.on(A,p);else if("function"===typeof m.addEventListener)m.addEventListener(A,function L(H){x.once&&m.removeEventListener(A,L);p(H)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+
typeof m);}var h=(y="object"===typeof Reflect?Reflect:null)&&"function"===typeof y.apply?y.apply:function(m,A,p){return Function.prototype.apply.call(m,A,p)};var E=y&&"function"===typeof y.ownKeys?y.ownKeys:Object.getOwnPropertySymbols?function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:function(m){return Object.getOwnPropertyNames(m)};var u=Number.isNaN||function(m){return m!==m};J.exports=C;J.exports.once=function(m,A){return new Promise(function(p,x){function G(L){m.removeListener(A,
H);x(L)}function H(){"function"===typeof m.removeListener&&m.removeListener("error",G);p([].slice.call(arguments))}l(m,A,H,{once:!0});"error"!==A&&k(m,G,{once:!0})})};C.EventEmitter=C;C.prototype._events=void 0;C.prototype._eventsCount=0;C.prototype._maxListeners=void 0;var B=10;Object.defineProperty(C,"defaultMaxListeners",{enumerable:!0,get:function(){return B},set:function(m){if("number"!==typeof m||0>m||u(m))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+
m+".");B=m}});C.init=function(){if(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)this._events=Object.create(null),this._eventsCount=0;this._maxListeners=this._maxListeners||void 0};C.prototype.setMaxListeners=function(m){if("number"!==typeof m||0>m||u(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");this._maxListeners=m;return this};C.prototype.getMaxListeners=function(){return void 0===this._maxListeners?C.defaultMaxListeners:
this._maxListeners};C.prototype.emit=function(m){for(var A=[],p=1;p<arguments.length;p++)A.push(arguments[p]);p="error"===m;var x=this._events;if(void 0!==x)p=p&&void 0===x.error;else if(!p)return!1;if(p){var G;0<A.length&&(G=A[0]);if(G instanceof Error)throw G;A=Error("Unhandled error."+(G?" ("+G.message+")":""));A.context=G;throw A;}p=x[m];if(void 0===p)return!1;if("function"===typeof p)h(p,this,A);else for(G=p.length,x=t(p,G),p=0;p<G;++p)h(x[p],this,A);return!0};C.prototype.addListener=function(m,
A){return f(this,m,A,!1)};C.prototype.on=C.prototype.addListener;C.prototype.prependListener=function(m,A){return f(this,m,A,!0)};C.prototype.once=function(m,A){n(A);this.on(m,e(this,m,A));return this};C.prototype.prependOnceListener=function(m,A){n(A);this.prependListener(m,e(this,m,A));return this};C.prototype.removeListener=function(m,A){var p;n(A);var x=this._events;if(void 0===x)return this;var G=x[m];if(void 0===G)return this;if(G===A||G.listener===A)0===--this._eventsCount?this._events=Object.create(null):
(delete x[m],x.removeListener&&this.emit("removeListener",m,G.listener||A));else if("function"!==typeof G){var H=-1;for(p=G.length-1;0<=p;p--)if(G[p]===A||G[p].listener===A){var L=G[p].listener;H=p;break}if(0>H)return this;if(0===H)G.shift();else{for(;H+1<G.length;H++)G[H]=G[H+1];G.pop()}1===G.length&&(x[m]=G[0]);void 0!==x.removeListener&&this.emit("removeListener",m,L||A)}return this};C.prototype.off=C.prototype.removeListener;C.prototype.removeAllListeners=function(m){var A=this._events;if(void 0===
A)return this;if(void 0===A.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==A[m]&&(0===--this._eventsCount?this._events=Object.create(null):delete A[m]),this;if(0===arguments.length){var p=Object.keys(A);for(A=0;A<p.length;++A){var x=p[A];"removeListener"!==x&&this.removeAllListeners(x)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}p=A[m];if("function"===typeof p)this.removeListener(m,
p);else if(void 0!==p)for(A=p.length-1;0<=A;A--)this.removeListener(m,p[A]);return this};C.prototype.listeners=function(m){return r(this,m,!0)};C.prototype.rawListeners=function(m){return r(this,m,!1)};C.listenerCount=function(m,A){return"function"===typeof m.listenerCount?m.listenerCount(A):v.call(m,A)};C.prototype.listenerCount=v;C.prototype.eventNames=function(){return 0<this._eventsCount?E(this._events):[]}},{}],18:[function(y,J,D){function C(e){"string"===typeof e&&(e=f.parse(e));e.protocol||
(e.protocol="https:");if("https:"!==e.protocol)throw Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}var n=y("http"),f=y("url");y=J.exports;for(var w in n)n.hasOwnProperty(w)&&(y[w]=n[w]);y.request=function(e,r){e=C(e);return n.request.call(this,e,r)};y.get=function(e,r){e=C(e);return n.get.call(this,e,r)}},{http:51,url:72}],19:[function(y,J,D){D.read=function(C,n,f,w,e){var r=8*e-w-1;var v=(1<<r)-1,t=v>>1,k=-7;e=f?e-1:0;var l=f?-1:1,h=C[n+e];e+=l;f=h&(1<<-k)-1;h>>=-k;
for(k+=r;0<k;f=256*f+C[n+e],e+=l,k-=8);r=f&(1<<-k)-1;f>>=-k;for(k+=w;0<k;r=256*r+C[n+e],e+=l,k-=8);if(0===f)f=1-t;else{if(f===v)return r?NaN:Infinity*(h?-1:1);r+=Math.pow(2,w);f-=t}return(h?-1:1)*r*Math.pow(2,f-w)};D.write=function(C,n,f,w,e,r){var v,t=8*r-e-1,k=(1<<t)-1,l=k>>1,h=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;r=w?0:r-1;var E=w?1:-1,u=0>n||0===n&&0>1/n?1:0;n=Math.abs(n);isNaN(n)||Infinity===n?(n=isNaN(n)?1:0,w=k):(w=Math.floor(Math.log(n)/Math.LN2),1>n*(v=Math.pow(2,-w))&&(w--,v*=2),n=1<=
w+l?n+h/v:n+h*Math.pow(2,1-l),2<=n*v&&(w++,v/=2),w+l>=k?(n=0,w=k):1<=w+l?(n=(n*v-1)*Math.pow(2,e),w+=l):(n=n*Math.pow(2,l-1)*Math.pow(2,e),w=0));for(;8<=e;C[f+r]=n&255,r+=E,n/=256,e-=8);w=w<<e|n;for(t+=e;0<t;C[f+r]=w&255,r+=E,w/=256,t-=8);C[f+r-E]|=128*u}},{}],20:[function(y,J,D){J.exports="function"===typeof Object.create?function(C,n){n&&(C.super_=n,C.prototype=Object.create(n.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}))}:function(C,n){if(n){C.super_=n;var f=function(){};
f.prototype=n.prototype;C.prototype=new f;C.prototype.constructor=C}}},{}],21:[function(y,J,D){J=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(D,"__esModule",{value:!0});const C=y("stream"),n=J(y("sax")),f=y("./parse-time");class w extends C.Writable{constructor(e){super();this._parser=n.default.createStream(!1,{lowercase:!0});this._parser.on("error",this.destroy.bind(this));let r,v=0,t=0,k,l,h,E,u,B=[],m=!1,A=!1,p,x,G;const H=I=>{const N={RepresentationID:e,
Number:t,Time:v};return I.replace(/\$(\w+)\$/g,(M,T)=>`${N[T]}`)};this._parser.on("opentag",I=>{switch(I.name){case "mpd":v=I.attributes.availabilitystarttime?(new Date(I.attributes.availabilitystarttime)).getTime():0;p="dynamic"!==I.attributes.type;break;case "period":t=0;l=1E3;h=E=0;u=[];x=0;G=f.durationStr(I.attributes.start)||0;break;case "segmentlist":t=parseInt(I.attributes.startnumber)||t;l=parseInt(I.attributes.timescale)||l;E=parseInt(I.attributes.duration)||E;h=parseInt(I.attributes.presentationtimeoffset)||
h;break;case "segmenttemplate":k=I.attributes;t=parseInt(I.attributes.startnumber)||t;l=parseInt(I.attributes.timescale)||l;break;case "segmenttimeline":case "baseurl":r=I.name;break;case "s":B.push({duration:parseInt(I.attributes.d),repeat:parseInt(I.attributes.r),time:parseInt(I.attributes.t)});break;case "adaptationset":case "representation":x++;e||(e=I.attributes.id);if(m=I.attributes.id===`${e}`)G&&(v+=G),h&&(v-=h/l*1E3),this.emit("starttime",v);break;case "initialization":m&&this.emit("item",
{url:u.filter(M=>!!M).join("")+I.attributes.sourceurl,seq:t,init:!0,duration:0});break;case "segmenturl":if(m){A=!0;var N=B.shift();N=((null===N||void 0===N?void 0:N.duration)||E)/l*1E3;this.emit("item",{url:u.filter(M=>!!M).join("")+I.attributes.media,seq:t++,duration:N});v+=N}}});const L=()=>{p&&this.emit("endlist");m?this.emit("end"):this.destroy(Error(`Representation '${e}' not found`))};this._parser.on("closetag",I=>{switch(I){case "adaptationset":case "representation":x--;if(k&&B.length){A=
!0;k.initialization&&this.emit("item",{url:u.filter(N=>!!N).join("")+H(k.initialization),seq:t,init:!0,duration:0});for(let {duration:N,repeat:M,time:T}of B)for(N=N/l*1E3,M=M||1,v=T||v,I=0;I<M;I++)this.emit("item",{url:u.filter(S=>!!S).join("")+H(k.media),seq:t++,duration:N}),v+=N}A&&(this.emit("endearly"),L(),this._parser.removeAllListeners(),this.removeAllListeners("finish"))}});this._parser.on("text",I=>{"baseurl"===r&&(u[x]=I,r=null)});this.on("finish",L)}_write(e,r,v){this._parser.write(e);v()}}
D.default=w},{"./parse-time":24,sax:35,stream:36}],22:[function(y,J,D){var C=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{"default":v}};const n=y("stream"),f=C(y("miniget"));D=C(y("./m3u8-parser"));C=C(y("./dash-mpd-parser"));const w=y("./queue"),e=y("./parse-time"),r={m3u8:D.default,"dash-mpd":C.default};y=(v,t={})=>{const k=new n.PassThrough({highWaterMark:t.highWaterMark}),l=t.chunkReadahead||3,h=t.liveBuffer||2E4,E=t.requestOptions,u=r[t.parser||(/\.mpd$/.test(v)?"dash-mpd":
"m3u8")];if(!u)throw TypeError(`parser '${t.parser}' not supported`);let B=0;"undefined"!==typeof t.begin&&(B="string"===typeof t.begin?e.humanStr(t.begin):Math.max(t.begin-h,0));const m=c=>{for(let g of"abort request response redirect retry reconnect".split(" "))c.on(g,k.emit.bind(k,g))};let A;const p=new w.Queue((c,g)=>{A=c;let q=0;c.on("data",K=>q+=K.length);c.pipe(k,{end:!1});c.on("end",()=>g(null,q))},{concurrency:1});let x=0,G=0;const H=new w.Queue((c,g)=>{var q=Object.assign({},E);c.range&&
(q.headers=Object.assign({},q.headers,{Range:`bytes=${c.range.start}-${c.range.end}`}));q=f.default((new URL(c.url,v)).toString(),q);q.on("error",g);m(q);p.push(q,(K,R)=>{G+=+R;k.emit("progress",{num:++x,size:R,duration:c.duration,url:c.url},H.total,G);g(null)})},{concurrency:l}),L=c=>{k.emit("error",c);k.end()};let I,N,M,T=!0,S=!1,O=!1,V;const W=c=>{A=null;c?L(c):!T&&!S&&!O&&H.tasks.length+H.active<=I?(c=Math.max(0,N-(Date.now()-V)),T=!0,M=setTimeout(d,c)):!S&&!O||H.tasks.length||H.active||k.end()};
let U,b,a=0;const d=()=>{V=Date.now();U=f.default(v,E);U.on("error",L);m(U);const c=U.pipe(new u(t.id));c.on("starttime",P=>{a||(a=P,"string"===typeof t.begin&&0<=B&&(B+=a))});c.on("endlist",()=>{O=!0});c.on("endearly",U.unpipe.bind(U,c));let g=[];const q=P=>{if(!P.init){if(P.seq<=b)return;b=P.seq}B=P.time;H.push(P,W);g.push(P)};let K=[],R=0;c.on("item",P=>{P=Object.assign({time:a},P);if(B<=P.time)q(P);else for(K.push(P),R+=P.duration;1<K.length&&R-K[0].duration>h;){const F=K.shift();R-=F.duration}a+=
P.duration});c.on("end",()=>{U=null;!g.length&&K.length&&K.forEach(P=>{q(P)});I=Math.max(1,Math.ceil(.01*g.length));N=g.reduce((P,F)=>F.duration+P,0);T=!1;W(null)})};d();k.end=()=>{S=!0;p.die();H.die();clearTimeout(M);null===U||void 0===U?void 0:U.destroy();null===A||void 0===A?void 0:A.destroy();n.PassThrough.prototype.end.call(k,null);return k};return k};y.parseTimestamp=e.humanStr;J.exports=y},{"./dash-mpd-parser":21,"./m3u8-parser":23,"./parse-time":24,"./queue":25,miniget:26,stream:36}],23:[function(y,
J,D){Object.defineProperty(D,"__esModule",{value:!0});y=y("stream");class C extends y.Writable{constructor(){super();this._lastLine="";this._seq=0;this._nextItemRange=this._nextItemDuration=null;this._lastItemRangeEnd=0;this.on("finish",()=>{this._parseLine(this._lastLine);this.emit("end")})}_parseAttrList(n){let f={},w=/([A-Z0-9-]+)=(?:"([^"]*?)"|([^,]*?))/g,e;for(;null!==(e=w.exec(n));)f[e[1]]=e[2]||e[3];return f}_parseRange(n){if(!n)return null;var f=n.split("@");n=f[1]?parseInt(f[1]):this._lastItemRangeEnd+
1;f=n+parseInt(f[0])-1;n={start:n,end:f};this._lastItemRangeEnd=n.end;return n}_parseLine(n){var f=n.match(/^#(EXT[A-Z0-9-]+)(?::(.*))?/);if(f)switch(n=f[2]||"",f[1]){case "EXT-X-PROGRAM-DATE-TIME":this.emit("starttime",(new Date(n)).getTime());break;case "EXT-X-MEDIA-SEQUENCE":this._seq=parseInt(n);break;case "EXT-X-MAP":f=this._parseAttrList(n);if(!f.URI){this.destroy(Error("`EXT-X-MAP` found without required attribute `URI`"));break}this.emit("item",{url:f.URI,seq:this._seq,init:!0,duration:0,
range:this._parseRange(f.BYTERANGE)});break;case "EXT-X-BYTERANGE":this._nextItemRange=this._parseRange(n);break;case "EXTINF":this._nextItemDuration=Math.round(1E3*parseFloat(n.split(",")[0]));break;case "EXT-X-ENDLIST":this.emit("endlist")}else!/^#/.test(n)&&n.trim()&&(this.emit("item",{url:n.trim(),seq:this._seq++,duration:this._nextItemDuration,range:this._nextItemRange}),this._nextItemRange=null)}_write(n,f,w){let e=n.toString("utf8").split("\n");this._lastLine&&(e[0]=this._lastLine+e[0]);e.forEach((r,
v)=>{this.destroyed||(v<e.length-1?this._parseLine(r):this._lastLine=r)});w()}}D.default=C},{stream:36}],24:[function(y,J,D){Object.defineProperty(D,"__esModule",{value:!0});D.durationStr=D.humanStr=void 0;const C=/^\d+$/,n=/^(?:(?:(\d+):)?(\d{1,2}):)?(\d{1,2})(?:\.(\d{3}))?$/,f={ms:1,s:1E3,m:6E4,h:36E5};D.humanStr=w=>{if("number"===typeof w)return w;if(C.test(w))return+w;var e=n.exec(w);if(e)return+(e[1]||0)*f.h+ +(e[2]||0)*f.m+ +e[3]*f.s+ +(e[4]||0);e=0;const r=/(-?\d+)(ms|s|m|h)/g;let v;for(;null!==
(v=r.exec(w));)e+=+v[1]*f[v[2]];return e};D.durationStr=w=>{let e=0;const r=/(\d+(?:\.\d+)?)(S|M|H)/g;let v;for(;null!==(v=r.exec(w));)e+=+v[1]*f[v[2].toLowerCase()];return e}},{}],25:[function(y,J,D){Object.defineProperty(D,"__esModule",{value:!0});D.Queue=void 0;class C{constructor(n,f={}){this._worker=n;this._concurrency=f.concurrency||1;this.tasks=[];this.active=this.total=0}push(n,f){this.tasks.push({item:n,callback:f});this.total++;this._next()}_next(){if(!(this.active>=this._concurrency)&&
this.tasks.length){var {item:n,callback:f}=this.tasks.shift(),w=!1;this.active++;this._worker(n,(e,r)=>{w||(this.active--,w=!0,null===f||void 0===f?void 0:f(e,r),this._next())})}}die(){this.tasks=[]}}D.Queue=C},{}],26:[function(y,J,D){(function(C){(function(){function n(h,E={}){var u;const B=Object.assign({},n.defaultOptions,E),m=new e.PassThrough({highWaterMark:B.highWaterMark});m.destroyed=m.aborted=!1;let A,p,x,G=0,H=0,L,I=0,N,M=!1,T=0,S,O=0;if(null===(u=B.headers)||void 0===u?0:u.Range)if(u=/bytes=(\d+)-(\d+)?/.exec(`${B.headers.Range}`))T=
parseInt(u[1],10),S=parseInt(u[2],10);B.acceptEncoding&&(B.headers=Object.assign({"Accept-Encoding":Object.keys(B.acceptEncoding).join(", ")},B.headers));const V=c=>"HEAD"!==E.method&&M&&O!==N&&I++<B.maxReconnects?(x=null,H=0,L=setTimeout(b,Math.min(B.backoff.inc,B.backoff.max)),m.emit("reconnect",I,c),!0):!1,W=c=>m.destroyed?!1:x&&0<O?V(c.err):(!c.err||"ENOTFOUND"===c.err.message)&&H++<B.maxRetries?(L=setTimeout(b,c.retryAfter||Math.min(H*B.backoff.inc,B.backoff.max)),m.emit("retry",H,c.err),!0):
!1,U=(c,g)=>{for(let q of g)c.on(q,m.emit.bind(m,q))},b=()=>{let c={},g;try{let z="string"===typeof h?new URL(h):h;c=Object.assign({},{host:z.host,hostname:z.hostname,path:z.pathname+z.search+z.hash,port:z.port,protocol:z.protocol});z.username&&(c.auth=`${z.username}:${z.password}`);g=r[String(c.protocol)]}catch(z){}if(g){Object.assign(c,B);M&&0<O&&(c.headers=Object.assign({},c.headers,{Range:`bytes=${O+T}-${S||""}`}));if(B.transform){try{c=B.transform(c)}catch(z){m.emit("error",z);return}if(!c||
c.protocol)if(g=r[String(null===c||void 0===c?void 0:c.protocol)],!g){m.emit("error",new n.MinigetError("Invalid URL object from `transform` function"));return}}var q=z=>{m.destroyed||m.readableEnded||(R(),W({err:z})?A.removeListener("close",K):m.emit("error",z))},K=()=>{R();W({})},R=()=>{A.removeListener("close",K);null===p||void 0===p?void 0:p.removeListener("data",P);null===x||void 0===x?void 0:x.removeListener("end",F)},P=z=>{O+=z.length},F=()=>{R();V()||m.end()};A=g.request(c,z=>{if(!m.destroyed)if(v.has(z.statusCode)){if(G++>=
B.maxRedirects)m.emit("error",new n.MinigetError("Too many redirects"));else{if(z.headers.location)h=z.headers.location;else{z=new n.MinigetError("Redirect status code given with no location",z.statusCode);m.emit("error",z);R();return}setTimeout(b,1E3*parseInt(z.headers["retry-after"]||"0",10));m.emit("redirect",h)}R()}else if(t.has(z.statusCode))W({retryAfter:parseInt(z.headers["retry-after"]||"0",10)})||(z=new n.MinigetError(`Status code: ${z.statusCode}`,z.statusCode),m.emit("error",z)),R();else if(z.statusCode&&
(200>z.statusCode||400<=z.statusCode)){var Q=new n.MinigetError(`Status code: ${z.statusCode}`,z.statusCode);500<=z.statusCode?q(Q):m.emit("error",Q);R()}else{x=z;if(B.acceptEncoding&&z.headers["content-encoding"])for(Q of z.headers["content-encoding"].split(", ").reverse()){let Y=B.acceptEncoding[Q];Y&&(x=x.pipe(Y()),x.on("error",q))}N||(N=parseInt(`${z.headers["content-length"]}`,10),M="bytes"===z.headers["accept-ranges"]&&0<N&&0<B.maxReconnects);z.on("data",P);x.on("end",F);x.pipe(m,{end:!M});
p=z;m.emit("response",z);z.on("error",q);U(z,l)}});A.on("error",q);A.on("close",K);U(A,k);m.destroyed&&d(...a);m.emit("request",A);A.end()}else m.emit("error",new n.MinigetError(`Invalid URL: ${h}`))};m.abort=c=>{console.warn("`MinigetStream#abort()` has been deprecated in favor of `MinigetStream#destroy()`");m.aborted=!0;m.emit("abort");m.destroy(c)};let a;const d=c=>{A.destroy(c);null===x||void 0===x?void 0:x.unpipe(m);null===x||void 0===x?void 0:x.destroy();clearTimeout(L)};m._destroy=(...c)=>
{m.destroyed=!0;A?d(...c):a=c};m.text=()=>new Promise((c,g)=>{let q="";m.setEncoding("utf8");m.on("data",K=>q+=K);m.on("end",()=>c(q));m.on("error",g)});C.nextTick(b);return m}var f=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{"default":h}};const w=f(y("http"));f=f(y("https"));const e=y("stream"),r={"http:":w.default,"https:":f.default},v=new Set([301,302,303,307,308]),t=new Set([429,503]),k="connect continue information socket timeout upgrade".split(" "),l=["aborted"];n.MinigetError=
class extends Error{constructor(h,E){super(h);this.statusCode=E}};n.defaultOptions={maxRedirects:10,maxRetries:2,maxReconnects:0,backoff:{inc:100,max:1E4}};J.exports=n}).call(this)}).call(this,y("_process"))},{_process:27,http:51,https:18,stream:36}],27:[function(y,J,D){function C(){throw Error("setTimeout has not been defined");}function n(){throw Error("clearTimeout has not been defined");}function f(m){if(k===setTimeout)return setTimeout(m,0);if((k===C||!k)&&setTimeout)return k=setTimeout,setTimeout(m,
0);try{return k(m,0)}catch(A){try{return k.call(null,m,0)}catch(p){return k.call(this,m,0)}}}function w(m){if(l===clearTimeout)return clearTimeout(m);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(m);try{return l(m)}catch(A){try{return l.call(null,m)}catch(p){return l.call(this,m)}}}function e(){E&&u&&(E=!1,u.length?h=u.concat(h):B=-1,h.length&&r())}function r(){if(!E){var m=f(e);E=!0;for(var A=h.length;A;){u=h;for(h=[];++B<A;)u&&u[B].run();B=-1;A=h.length}u=null;E=!1;w(m)}}function v(m,
A){this.fun=m;this.array=A}function t(){}y=J.exports={};try{var k="function"===typeof setTimeout?setTimeout:C}catch(m){k=C}try{var l="function"===typeof clearTimeout?clearTimeout:n}catch(m){l=n}var h=[],E=!1,u,B=-1;y.nextTick=function(m){var A=Array(arguments.length-1);if(1<arguments.length)for(var p=1;p<arguments.length;p++)A[p-1]=arguments[p];h.push(new v(m,A));1!==h.length||E||f(r)};v.prototype.run=function(){this.fun.apply(null,this.array)};y.title="browser";y.browser=!0;y.env={};y.argv=[];y.version=
"";y.versions={};y.on=t;y.addListener=t;y.once=t;y.off=t;y.removeListener=t;y.removeAllListeners=t;y.emit=t;y.prependListener=t;y.prependOnceListener=t;y.listeners=function(m){return[]};y.binding=function(m){throw Error("process.binding is not supported");};y.cwd=function(){return"/"};y.chdir=function(m){throw Error("process.chdir is not supported");};y.umask=function(){return 0}},{}],28:[function(y,J,D){(function(C){(function(){(function(n){function f(L){throw new RangeError(p[L]);}function w(L,
I){for(var N=L.length,M=[];N--;)M[N]=I(L[N]);return M}function e(L,I){var N=L.split("@"),M="";1<N.length&&(M=N[0]+"@",L=N[1]);L=L.replace(A,".");L=L.split(".");I=w(L,I).join(".");return M+I}function r(L){for(var I=[],N=0,M=L.length,T,S;N<M;)T=L.charCodeAt(N++),55296<=T&&56319>=T&&N<M?(S=L.charCodeAt(N++),56320==(S&64512)?I.push(((T&1023)<<10)+(S&1023)+65536):(I.push(T),N--)):I.push(T);return I}function v(L){return w(L,function(I){var N="";65535<I&&(I-=65536,N+=G(I>>>10&1023|55296),I=56320|I&1023);
return N+=G(I)}).join("")}function t(L,I,N){var M=0;L=N?x(L/700):L>>1;for(L+=x(L/I);455<L;M+=36)L=x(L/35);return x(M+36*L/(L+38))}function k(L){var I=[],N=L.length,M=0,T=128,S=72,O,V;var W=L.lastIndexOf("-");0>W&&(W=0);for(O=0;O<W;++O)128<=L.charCodeAt(O)&&f("not-basic"),I.push(L.charCodeAt(O));for(W=0<W?W+1:0;W<N;){O=M;var U=1;for(V=36;;V+=36){W>=N&&f("invalid-input");var b=L.charCodeAt(W++);b=10>b-48?b-22:26>b-65?b-65:26>b-97?b-97:36;(36<=b||b>x((2147483647-M)/U))&&f("overflow");M+=b*U;var a=V<=
S?1:V>=S+26?26:V-S;if(b<a)break;b=36-a;U>x(2147483647/b)&&f("overflow");U*=b}U=I.length+1;S=t(M-O,U,0==O);x(M/U)>2147483647-T&&f("overflow");T+=x(M/U);M%=U;I.splice(M++,0,T)}return v(I)}function l(L){var I,N,M,T=[];L=r(L);var S=L.length;var O=128;var V=0;var W=72;for(M=0;M<S;++M){var U=L[M];128>U&&T.push(G(U))}for((I=N=T.length)&&T.push("-");I<S;){var b=2147483647;for(M=0;M<S;++M)U=L[M],U>=O&&U<b&&(b=U);var a=I+1;b-O>x((2147483647-V)/a)&&f("overflow");V+=(b-O)*a;O=b;for(M=0;M<S;++M)if(U=L[M],U<O&&
2147483647<++V&&f("overflow"),U==O){var d=V;for(b=36;;b+=36){U=b<=W?1:b>=W+26?26:b-W;if(d<U)break;var c=d-U;d=36-U;var g=T;U+=c%d;g.push.call(g,G(U+22+75*(26>U)-0));d=x(c/d)}T.push(G(d+22+75*(26>d)-0));W=t(V,a,I==N);V=0;++I}++V;++O}return T.join("")}var h="object"==typeof D&&D&&!D.nodeType&&D,E="object"==typeof J&&J&&!J.nodeType&&J,u="object"==typeof C&&C;if(u.global===u||u.window===u||u.self===u)n=u;var B=/^xn--/,m=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process",
"not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=Math.floor,G=String.fromCharCode,H;u={version:"1.4.1",ucs2:{decode:r,encode:v},decode:k,encode:l,toASCII:function(L){return e(L,function(I){return m.test(I)?"xn--"+l(I):I})},toUnicode:function(L){return e(L,function(I){return B.test(I)?k(I.slice(4).toLowerCase()):I})}};if(h&&E)if(J.exports==h)E.exports=u;else for(H in u)u.hasOwnProperty(H)&&(h[H]=u[H]);else n.punycode=u})(this)}).call(this)}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],29:[function(y,J,D){J.exports=function(n,f,w,e){w=w||"=";var r={};if("string"!==typeof n||0===n.length)return r;var v=/\+/g;n=n.split(f||"&");f=1E3;e&&"number"===typeof e.maxKeys&&(f=e.maxKeys);e=n.length;0<f&&e>f&&(e=f);for(f=0;f<e;++f){var t=n[f].replace(v,"%20"),k=t.indexOf(w);if(0<=k){var l=t.substr(0,k);t=t.substr(k+1)}else l=t,t="";l=decodeURIComponent(l);t=decodeURIComponent(t);Object.prototype.hasOwnProperty.call(r,
l)?C(r[l])?r[l].push(t):r[l]=[r[l],t]:r[l]=t}return r};var C=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)}},{}],30:[function(y,J,D){function C(e,r){if(e.map)return e.map(r);for(var v=[],t=0;t<e.length;t++)v.push(r(e[t],t));return v}var n=function(e){switch(typeof e){case "string":return e;case "boolean":return e?"true":"false";case "number":return isFinite(e)?e:"";default:return""}};J.exports=function(e,r,v,t){r=r||"&";v=v||"=";null===e&&(e=void 0);return"object"===
typeof e?C(w(e),function(k){var l=encodeURIComponent(n(k))+v;return f(e[k])?C(e[k],function(h){return l+encodeURIComponent(n(h))}).join(r):l+encodeURIComponent(n(e[k]))}).join(r):t?encodeURIComponent(n(t))+v+encodeURIComponent(n(e)):""};var f=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},w=Object.keys||function(e){var r=[],v;for(v in e)Object.prototype.hasOwnProperty.call(e,v)&&r.push(v);return r}},{}],31:[function(y,J,D){D.decode=D.parse=y("./decode");D.encode=
D.stringify=y("./encode")},{"./decode":29,"./encode":30}],32:[function(y,J,D){y=function(C){function n(b,a,d){Object.defineProperty(b,a,{value:d,enumerable:!0,configurable:!0,writable:!0});return b[a]}function f(b,a,d,c){a=Object.create((a&&a.prototype instanceof e?a:e).prototype);c=new B(c||[]);a._invoke=l(b,d,c);return a}function w(b,a,d){try{return{type:"normal",arg:b.call(a,d)}}catch(c){return{type:"throw",arg:c}}}function e(){}function r(){}function v(){}function t(b){["next","throw","return"].forEach(function(a){n(b,
a,function(d){return this._invoke(a,d)})})}function k(b,a){function d(g,q,K,R){g=w(b[g],b,q);if("throw"===g.type)R(g.arg);else{var P=g.arg;return(g=P.value)&&"object"===typeof g&&x.call(g,"__await")?a.resolve(g.__await).then(function(F){d("next",F,K,R)},function(F){d("throw",F,K,R)}):a.resolve(g).then(function(F){P.value=F;K(P)},function(F){return d("throw",F,K,R)})}}var c;this._invoke=function(g,q){function K(){return new a(function(R,P){d(g,q,R,P)})}return c=c?c.then(K,K):K()}}function l(b,a,d){var c=
M;return function(g,q){if(c===S)throw Error("Generator is already running");if(c===O){if("throw"===g)throw q;return A()}d.method=g;for(d.arg=q;;){if(g=d.delegate)if(g=h(g,d)){if(g===V)continue;return g}if("next"===d.method)d.sent=d._sent=d.arg;else if("throw"===d.method){if(c===M)throw c=O,d.arg;d.dispatchException(d.arg)}else"return"===d.method&&d.abrupt("return",d.arg);c=S;g=w(b,a,d);if("normal"===g.type){c=d.done?O:T;if(g.arg===V)continue;return{value:g.arg,done:d.done}}"throw"===g.type&&(c=O,
d.method="throw",d.arg=g.arg)}}}function h(b,a){var d=b.iterator[a.method];if(d===G){a.delegate=null;if("throw"===a.method){if(b.iterator["return"]&&(a.method="return",a.arg=G,h(b,a),"throw"===a.method))return V;a.method="throw";a.arg=new TypeError("The iterator does not provide a 'throw' method")}return V}d=w(d,b.iterator,a.arg);if("throw"===d.type)return a.method="throw",a.arg=d.arg,a.delegate=null,V;d=d.arg;if(!d)return a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=
null,V;if(d.done)a[b.resultName]=d.value,a.next=b.nextLoc,"return"!==a.method&&(a.method="next",a.arg=G);else return d;a.delegate=null;return V}function E(b){var a={tryLoc:b[0]};1 in b&&(a.catchLoc=b[1]);2 in b&&(a.finallyLoc=b[2],a.afterLoc=b[3]);this.tryEntries.push(a)}function u(b){var a=b.completion||{};a.type="normal";delete a.arg;b.completion=a}function B(b){this.tryEntries=[{tryLoc:"root"}];b.forEach(E,this);this.reset(!0)}function m(b){if(b){var a=b[L];if(a)return a.call(b);if("function"===
typeof b.next)return b;if(!isNaN(b.length)){var d=-1;a=function g(){for(;++d<b.length;)if(x.call(b,d))return g.value=b[d],g.done=!1,g;g.value=G;g.done=!0;return g};return a.next=a}}return{next:A}}function A(){return{value:G,done:!0}}var p=Object.prototype,x=p.hasOwnProperty,G,H="function"===typeof Symbol?Symbol:{},L=H.iterator||"@@iterator",I=H.asyncIterator||"@@asyncIterator",N=H.toStringTag||"@@toStringTag";try{n({},"")}catch(b){n=function(a,d,c){return a[d]=c}}C.wrap=f;var M="suspendedStart",T=
"suspendedYield",S="executing",O="completed",V={};H={};n(H,L,function(){return this});var W=Object.getPrototypeOf;(W=W&&W(W(m([]))))&&W!==p&&x.call(W,L)&&(H=W);var U=v.prototype=e.prototype=Object.create(H);r.prototype=v;n(U,"constructor",v);n(v,"constructor",r);r.displayName=n(v,N,"GeneratorFunction");C.isGeneratorFunction=function(b){return(b="function"===typeof b&&b.constructor)?b===r||"GeneratorFunction"===(b.displayName||b.name):!1};C.mark=function(b){Object.setPrototypeOf?Object.setPrototypeOf(b,
v):(b.__proto__=v,n(b,N,"GeneratorFunction"));b.prototype=Object.create(U);return b};C.awrap=function(b){return{__await:b}};t(k.prototype);n(k.prototype,I,function(){return this});C.AsyncIterator=k;C.async=function(b,a,d,c,g){void 0===g&&(g=Promise);var q=new k(f(b,a,d,c),g);return C.isGeneratorFunction(a)?q:q.next().then(function(K){return K.done?K.value:q.next()})};t(U);n(U,N,"Generator");n(U,L,function(){return this});n(U,"toString",function(){return"[object Generator]"});C.keys=function(b){var a=
[],d;for(d in b)a.push(d);a.reverse();return function g(){for(;a.length;){var q=a.pop();if(q in b)return g.value=q,g.done=!1,g}g.done=!0;return g}};C.values=m;B.prototype={constructor:B,reset:function(b){this.next=this.prev=0;this.sent=this._sent=G;this.done=!1;this.delegate=null;this.method="next";this.arg=G;this.tryEntries.forEach(u);if(!b)for(var a in this)"t"===a.charAt(0)&&x.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=G)},stop:function(){this.done=!0;var b=this.tryEntries[0].completion;if("throw"===
b.type)throw b.arg;return this.rval},dispatchException:function(b){function a(P,F){q.type="throw";q.arg=b;d.next=P;F&&(d.method="next",d.arg=G);return!!F}if(this.done)throw b;for(var d=this,c=this.tryEntries.length-1;0<=c;--c){var g=this.tryEntries[c],q=g.completion;if("root"===g.tryLoc)return a("end");if(g.tryLoc<=this.prev){var K=x.call(g,"catchLoc"),R=x.call(g,"finallyLoc");if(K&&R){if(this.prev<g.catchLoc)return a(g.catchLoc,!0);if(this.prev<g.finallyLoc)return a(g.finallyLoc)}else if(K){if(this.prev<
g.catchLoc)return a(g.catchLoc,!0)}else if(R){if(this.prev<g.finallyLoc)return a(g.finallyLoc)}else throw Error("try statement without catch or finally");}}},abrupt:function(b,a){for(var d=this.tryEntries.length-1;0<=d;--d){var c=this.tryEntries[d];if(c.tryLoc<=this.prev&&x.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var g=c;break}}g&&("break"===b||"continue"===b)&&g.tryLoc<=a&&a<=g.finallyLoc&&(g=null);d=g?g.completion:{};d.type=b;d.arg=a;return g?(this.method="next",this.next=g.finallyLoc,V):
this.complete(d)},complete:function(b,a){if("throw"===b.type)throw b.arg;"break"===b.type||"continue"===b.type?this.next=b.arg:"return"===b.type?(this.rval=this.arg=b.arg,this.method="return",this.next="end"):"normal"===b.type&&a&&(this.next=a);return V},finish:function(b){for(var a=this.tryEntries.length-1;0<=a;--a){var d=this.tryEntries[a];if(d.finallyLoc===b)return this.complete(d.completion,d.afterLoc),u(d),V}},"catch":function(b){for(var a=this.tryEntries.length-1;0<=a;--a){var d=this.tryEntries[a];
if(d.tryLoc===b){b=d.completion;if("throw"===b.type){var c=b.arg;u(d)}return c}}throw Error("illegal catch attempt");},delegateYield:function(b,a,d){this.delegate={iterator:m(b),resultName:a,nextLoc:d};"next"===this.method&&(this.arg=G);return V}};return C}("object"===typeof J?J.exports:{});try{regeneratorRuntime=y}catch(C){"object"===typeof globalThis?globalThis.regeneratorRuntime=y:Function("r","regeneratorRuntime = r")(y)}},{}],33:[function(y,J,D){void function(C,n){"object"===typeof D?J.exports=
n():C.resolveUrl=n()}(this,function(){return function(){var C=arguments.length;if(0===C)throw Error("resolveUrl requires at least one argument; got none.");var n=document.createElement("base");n.href=arguments[0];if(1===C)return n.href;var f=document.getElementsByTagName("head")[0];f.insertBefore(n,f.firstChild);for(var w=document.createElement("a"),e,r=1;r<C;r++)w.href=arguments[r],e=w.href,n.href=e;f.removeChild(n);return e}})},{}],34:[function(y,J,D){function C(e,r){for(var v in e)r[v]=e[v]}function n(e,
r,v){return w(e,r,v)}var f=y("buffer"),w=f.Buffer;w.from&&w.alloc&&w.allocUnsafe&&w.allocUnsafeSlow?J.exports=f:(C(f,D),D.Buffer=n);n.prototype=Object.create(w.prototype);C(w,n);n.from=function(e,r,v){if("number"===typeof e)throw new TypeError("Argument must not be a number");return w(e,r,v)};n.alloc=function(e,r,v){if("number"!==typeof e)throw new TypeError("Argument must be a number");e=w(e);void 0!==r?"string"===typeof v?e.fill(r,v):e.fill(r):e.fill(0);return e};n.allocUnsafe=function(e){if("number"!==
typeof e)throw new TypeError("Argument must be a number");return w(e)};n.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return f.SlowBuffer(e)}},{buffer:15}],35:[function(y,J,D){(function(C){(function(){(function(n){function f(c,g){if(!(this instanceof f))return new f(c,g);for(var q=0,K=H.length;q<K;q++)this[H[q]]="";this.q=this.c="";this.bufferCheckPosition=n.MAX_BUFFER_LENGTH;this.opt=g||{};this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags;
this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase";this.tags=[];this.closed=this.closedRoot=this.sawRoot=!1;this.tag=this.error=null;this.strict=!!c;this.noscript=!(!c&&!this.opt.noscript);this.state=a.BEGIN;this.ENTITIES=(this.strictEntities=this.opt.strictEntities)?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES);this.attribList=[];this.opt.xmlns&&(this.ns=Object.create(O));if(this.trackPosition=!1!==this.opt.position)this.position=this.line=this.column=0;this.onready&&this.onready(void 0)}
function w(c,g){if(!(this instanceof w))return new w(c,g);L.apply(this);this._parser=new f(c,g);this.readable=this.writable=!0;var q=this;this._parser.onend=function(){q.emit("end")};this._parser.onerror=function(K){q.emit("error",K);q._parser.error=null};this._decoder=null;I.forEach(function(K){Object.defineProperty(q,"on"+K,{get:function(){return q._parser["on"+K]},set:function(R){if(!R)return q.removeAllListeners(K),q._parser["on"+K]=R;q.on(K,R)},enumerable:!0,configurable:!1})})}function e(c){return" "===
c||"\n"===c||"\r"===c||"\t"===c}function r(c){return'"'===c||"'"===c}function v(c,g,q){c.textNode&&t(c);c[g]&&c[g](q)}function t(c){c.textNode=k(c.opt,c.textNode);c.textNode&&c.ontext&&c.ontext(c.textNode);c.textNode=""}function k(c,g){c.trim&&(g=g.trim());c.normalize&&(g=g.replace(/\s+/g," "));return g}function l(c,g){t(c);c.trackPosition&&(g+="\nLine: "+c.line+"\nColumn: "+c.column+"\nChar: "+c.c);g=Error(g);c.error=g;c.onerror&&c.onerror(g);return c}function h(c){c.sawRoot&&!c.closedRoot&&E(c,
"Unclosed root tag");c.state!==a.BEGIN&&c.state!==a.BEGIN_WHITESPACE&&c.state!==a.TEXT&&l(c,"Unexpected end");t(c);c.c="";c.closed=!0;c.onend&&c.onend(void 0);f.call(c,c.strict,c.opt);return c}function E(c,g){if("object"!==typeof c||!(c instanceof f))throw Error("bad call to strictFail");c.strict&&l(c,g)}function u(c,g){var q=0>c.indexOf(":")?["",c]:c.split(":"),K=q[0];q=q[1];g&&"xmlns"===c&&(K="xmlns",q="");return{prefix:K,local:q}}function B(c){c.strict||(c.attribName=c.attribName[c.looseCase]());
if(-1===c.attribList.indexOf(c.attribName)&&!c.tag.attributes.hasOwnProperty(c.attribName))if(c.opt.xmlns){var g=u(c.attribName,!0),q=g.local;if("xmlns"===g.prefix)if("xml"===q&&c.attribValue!==T)E(c,"xml: prefix must be bound to "+T+"\nActual: "+c.attribValue);else if("xmlns"===q&&c.attribValue!==S)E(c,"xmlns: prefix must be bound to "+S+"\nActual: "+c.attribValue);else{g=c.tag;var K=c.tags[c.tags.length-1]||c;g.ns===K.ns&&(g.ns=Object.create(K.ns));g.ns[q]=c.attribValue}c.attribList.push([c.attribName,
c.attribValue])}else c.tag.attributes[c.attribName]=c.attribValue,v(c,"onattribute",{name:c.attribName,value:c.attribValue});c.attribName=c.attribValue=""}function m(c,g){if(c.opt.xmlns){var q=c.tag,K=u(c.tagName);q.prefix=K.prefix;q.local=K.local;q.uri=q.ns[K.prefix]||"";q.prefix&&!q.uri&&(E(c,"Unbound namespace prefix: "+JSON.stringify(c.tagName)),q.uri=K.prefix);K=c.tags[c.tags.length-1]||c;q.ns&&K.ns!==q.ns&&Object.keys(q.ns).forEach(function(Z){v(c,"onopennamespace",{prefix:Z,uri:q.ns[Z]})});
K=0;for(var R=c.attribList.length;K<R;K++){var P=c.attribList[K],F=P[0],z=P[1],Q=u(F,!0);P=Q.prefix;var Y=""===P?"":q.ns[P]||"";z={name:F,value:z,prefix:P,local:Q.local,uri:Y};P&&"xmlns"!==P&&!Y&&(E(c,"Unbound namespace prefix: "+JSON.stringify(P)),z.uri=P);c.tag.attributes[F]=z;v(c,"onattribute",z)}c.attribList.length=0}c.tag.isSelfClosing=!!g;c.sawRoot=!0;c.tags.push(c.tag);v(c,"onopentag",c.tag);g||(c.noscript||"script"!==c.tagName.toLowerCase()?c.state=a.TEXT:c.state=a.SCRIPT,c.tag=null,c.tagName=
"");c.attribName=c.attribValue="";c.attribList.length=0}function A(c){if(c.tagName){if(c.script){if("script"!==c.tagName){c.script+="</"+c.tagName+">";c.tagName="";c.state=a.SCRIPT;return}v(c,"onscript",c.script);c.script=""}var g=c.tags.length,q=c.tagName;c.strict||(q=q[c.looseCase]());for(var K=q;g--;)if(c.tags[g].name!==K)E(c,"Unexpected close tag");else break;if(0>g)E(c,"Unmatched closing tag: "+c.tagName),c.textNode+="</"+c.tagName+">";else{c.tagName=q;for(q=c.tags.length;q-- >g;){var R=c.tag=
c.tags.pop();c.tagName=c.tag.name;v(c,"onclosetag",c.tagName);for(var P in R.ns);K=c.tags[c.tags.length-1]||c;c.opt.xmlns&&R.ns!==K.ns&&Object.keys(R.ns).forEach(function(F){v(c,"onclosenamespace",{prefix:F,uri:R.ns[F]})})}0===g&&(c.closedRoot=!0);c.tagName=c.attribValue=c.attribName="";c.attribList.length=0}}else E(c,"Weird empty close tag."),c.textNode+="</>";c.state=a.TEXT}function p(c){var g=c.entity,q=g.toLowerCase(),K="";if(c.ENTITIES[g])return c.ENTITIES[g];if(c.ENTITIES[q])return c.ENTITIES[q];
g=q;if("#"===g.charAt(0))if("x"===g.charAt(1)){g=g.slice(2);var R=parseInt(g,16);K=R.toString(16)}else g=g.slice(1),R=parseInt(g,10),K=R.toString(10);g=g.replace(/^0+/,"");return isNaN(R)||K.toLowerCase()!==g?(E(c,"Invalid character entity"),"&"+c.entity+";"):String.fromCodePoint(R)}function x(c,g){"<"===g?(c.state=a.OPEN_WAKA,c.startTagPosition=c.position):e(g)||(E(c,"Non-whitespace before first tag."),c.textNode=g,c.state=a.TEXT)}function G(c,g){var q="";g<c.length&&(q=c.charAt(g));return q}n.parser=
function(c,g){return new f(c,g)};n.SAXParser=f;n.SAXStream=w;n.createStream=function(c,g){return new w(c,g)};n.MAX_BUFFER_LENGTH=65536;var H="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" ");n.EVENTS="text processinginstruction sgmldeclaration doctype comment opentagstart attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" ");Object.create||(Object.create=function(c){function g(){}
g.prototype=c;return new g});Object.keys||(Object.keys=function(c){var g=[],q;for(q in c)c.hasOwnProperty(q)&&g.push(q);return g});f.prototype={end:function(){h(this)},write:function(c){if(this.error)throw this.error;if(this.closed)return l(this,"Cannot write after close. Assign an onready handler.");if(null===c)return h(this);"object"===typeof c&&(c=c.toString());for(var g=0,q;;){this.c=q=G(c,g++);if(!q)break;this.trackPosition&&(this.position++,"\n"===q?(this.line++,this.column=0):this.column++);
switch(this.state){case a.BEGIN:this.state=a.BEGIN_WHITESPACE;if("\ufeff"===q)continue;x(this,q);continue;case a.BEGIN_WHITESPACE:x(this,q);continue;case a.TEXT:if(this.sawRoot&&!this.closedRoot){for(var K=g-1;q&&"<"!==q&&"&"!==q;)(q=G(c,g++))&&this.trackPosition&&(this.position++,"\n"===q?(this.line++,this.column=0):this.column++);this.textNode+=c.substring(K,g-1)}"<"!==q||this.sawRoot&&this.closedRoot&&!this.strict?(e(q)||this.sawRoot&&!this.closedRoot||E(this,"Text data outside of root node."),
"&"===q?this.state=a.TEXT_ENTITY:this.textNode+=q):(this.state=a.OPEN_WAKA,this.startTagPosition=this.position);continue;case a.SCRIPT:"<"===q?this.state=a.SCRIPT_ENDING:this.script+=q;continue;case a.SCRIPT_ENDING:"/"===q?this.state=a.CLOSE_TAG:(this.script+="<"+q,this.state=a.SCRIPT);continue;case a.OPEN_WAKA:"!"===q?(this.state=a.SGML_DECL,this.sgmlDecl=""):e(q)||(V.test(q)?(this.state=a.OPEN_TAG,this.tagName=q):"/"===q?(this.state=a.CLOSE_TAG,this.tagName=""):"?"===q?(this.state=a.PROC_INST,this.procInstName=
this.procInstBody=""):(E(this,"Unencoded <"),this.startTagPosition+1<this.position&&(q=Array(this.position-this.startTagPosition).join(" ")+q),this.textNode+="<"+q,this.state=a.TEXT));continue;case a.SGML_DECL:(this.sgmlDecl+q).toUpperCase()===N?(v(this,"onopencdata"),this.state=a.CDATA,this.cdata=this.sgmlDecl=""):"--"===this.sgmlDecl+q?(this.state=a.COMMENT,this.sgmlDecl=this.comment=""):(this.sgmlDecl+q).toUpperCase()===M?(this.state=a.DOCTYPE,(this.doctype||this.sawRoot)&&E(this,"Inappropriately located doctype declaration"),
this.sgmlDecl=this.doctype=""):">"===q?(v(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=a.TEXT):(r(q)&&(this.state=a.SGML_DECL_QUOTED),this.sgmlDecl+=q);continue;case a.SGML_DECL_QUOTED:q===this.q&&(this.state=a.SGML_DECL,this.q="");this.sgmlDecl+=q;continue;case a.DOCTYPE:">"===q?(this.state=a.TEXT,v(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=q,"["===q?this.state=a.DOCTYPE_DTD:r(q)&&(this.state=a.DOCTYPE_QUOTED,this.q=q));continue;case a.DOCTYPE_QUOTED:this.doctype+=
q;q===this.q&&(this.q="",this.state=a.DOCTYPE);continue;case a.DOCTYPE_DTD:this.doctype+=q;"]"===q?this.state=a.DOCTYPE:r(q)&&(this.state=a.DOCTYPE_DTD_QUOTED,this.q=q);continue;case a.DOCTYPE_DTD_QUOTED:this.doctype+=q;q===this.q&&(this.state=a.DOCTYPE_DTD,this.q="");continue;case a.COMMENT:"-"===q?this.state=a.COMMENT_ENDING:this.comment+=q;continue;case a.COMMENT_ENDING:"-"===q?(this.state=a.COMMENT_ENDED,(this.comment=k(this.opt,this.comment))&&v(this,"oncomment",this.comment),this.comment=""):
(this.comment+="-"+q,this.state=a.COMMENT);continue;case a.COMMENT_ENDED:">"!==q?(E(this,"Malformed comment"),this.comment+="--"+q,this.state=a.COMMENT):this.state=a.TEXT;continue;case a.CDATA:"]"===q?this.state=a.CDATA_ENDING:this.cdata+=q;continue;case a.CDATA_ENDING:"]"===q?this.state=a.CDATA_ENDING_2:(this.cdata+="]"+q,this.state=a.CDATA);continue;case a.CDATA_ENDING_2:">"===q?(this.cdata&&v(this,"oncdata",this.cdata),v(this,"onclosecdata"),this.cdata="",this.state=a.TEXT):"]"===q?this.cdata+=
"]":(this.cdata+="]]"+q,this.state=a.CDATA);continue;case a.PROC_INST:"?"===q?this.state=a.PROC_INST_ENDING:e(q)?this.state=a.PROC_INST_BODY:this.procInstName+=q;continue;case a.PROC_INST_BODY:if(!this.procInstBody&&e(q))continue;else"?"===q?this.state=a.PROC_INST_ENDING:this.procInstBody+=q;continue;case a.PROC_INST_ENDING:">"===q?(v(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=a.TEXT):(this.procInstBody+="?"+q,
this.state=a.PROC_INST_BODY);continue;case a.OPEN_TAG:if(W.test(q))this.tagName+=q;else{this.strict||(this.tagName=this.tagName[this.looseCase]());K=this.tags[this.tags.length-1]||this;var R=this.tag={name:this.tagName,attributes:{}};this.opt.xmlns&&(R.ns=K.ns);this.attribList.length=0;v(this,"onopentagstart",R);">"===q?m(this):"/"===q?this.state=a.OPEN_TAG_SLASH:(e(q)||E(this,"Invalid character in tag name"),this.state=a.ATTRIB)}continue;case a.OPEN_TAG_SLASH:">"===q?(m(this,!0),A(this)):(E(this,
"Forward-slash in opening tag not followed by >"),this.state=a.ATTRIB);continue;case a.ATTRIB:if(e(q))continue;else">"===q?m(this):"/"===q?this.state=a.OPEN_TAG_SLASH:V.test(q)?(this.attribName=q,this.attribValue="",this.state=a.ATTRIB_NAME):E(this,"Invalid attribute name");continue;case a.ATTRIB_NAME:"="===q?this.state=a.ATTRIB_VALUE:">"===q?(E(this,"Attribute without value"),this.attribValue=this.attribName,B(this),m(this)):e(q)?this.state=a.ATTRIB_NAME_SAW_WHITE:W.test(q)?this.attribName+=q:E(this,
"Invalid attribute name");continue;case a.ATTRIB_NAME_SAW_WHITE:if("="===q)this.state=a.ATTRIB_VALUE;else if(e(q))continue;else E(this,"Attribute without value"),this.attribValue=this.tag.attributes[this.attribName]="",v(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===q?m(this):V.test(q)?(this.attribName=q,this.state=a.ATTRIB_NAME):(E(this,"Invalid attribute name"),this.state=a.ATTRIB);continue;case a.ATTRIB_VALUE:if(e(q))continue;else r(q)?(this.q=q,this.state=a.ATTRIB_VALUE_QUOTED):
(E(this,"Unquoted attribute value"),this.state=a.ATTRIB_VALUE_UNQUOTED,this.attribValue=q);continue;case a.ATTRIB_VALUE_QUOTED:if(q!==this.q){"&"===q?this.state=a.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=q;continue}B(this);this.q="";this.state=a.ATTRIB_VALUE_CLOSED;continue;case a.ATTRIB_VALUE_CLOSED:e(q)?this.state=a.ATTRIB:">"===q?m(this):"/"===q?this.state=a.OPEN_TAG_SLASH:V.test(q)?(E(this,"No whitespace between attributes"),this.attribName=q,this.attribValue="",this.state=a.ATTRIB_NAME):E(this,
"Invalid attribute name");continue;case a.ATTRIB_VALUE_UNQUOTED:if(">"!==q&&!e(q)){"&"===q?this.state=a.ATTRIB_VALUE_ENTITY_U:this.attribValue+=q;continue}B(this);">"===q?m(this):this.state=a.ATTRIB;continue;case a.CLOSE_TAG:if(this.tagName)">"===q?A(this):W.test(q)?this.tagName+=q:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=a.SCRIPT):(e(q)||E(this,"Invalid tagname in closing tag"),this.state=a.CLOSE_TAG_SAW_WHITE);else if(e(q))continue;else V.test(q)?this.tagName=q:this.script?
(this.script+="</"+q,this.state=a.SCRIPT):E(this,"Invalid tagname in closing tag.");continue;case a.CLOSE_TAG_SAW_WHITE:if(e(q))continue;">"===q?A(this):E(this,"Invalid characters in closing tag");continue;case a.TEXT_ENTITY:case a.ATTRIB_VALUE_ENTITY_Q:case a.ATTRIB_VALUE_ENTITY_U:switch(this.state){case a.TEXT_ENTITY:var P=a.TEXT;var F="textNode";break;case a.ATTRIB_VALUE_ENTITY_Q:P=a.ATTRIB_VALUE_QUOTED;F="attribValue";break;case a.ATTRIB_VALUE_ENTITY_U:P=a.ATTRIB_VALUE_UNQUOTED,F="attribValue"}";"===
q?(this[F]+=p(this),this.entity="",this.state=P):(this.entity.length?b:U).test(q)?this.entity+=q:(E(this,"Invalid character in entity name"),this[F]+="&"+this.entity+q,this.entity="",this.state=P);continue;default:throw Error(this,"Unknown state: "+this.state);}}if(this.position>=this.bufferCheckPosition){c=Math.max(n.MAX_BUFFER_LENGTH,10);q=g=0;for(P=H.length;q<P;q++){F=this[H[q]].length;if(F>c)switch(H[q]){case "textNode":t(this);break;case "cdata":v(this,"oncdata",this.cdata);this.cdata="";break;
case "script":v(this,"onscript",this.script);this.script="";break;default:l(this,"Max buffer length exceeded: "+H[q])}g=Math.max(g,F)}this.bufferCheckPosition=n.MAX_BUFFER_LENGTH-g+this.position}return this},resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){t(this);""!==this.cdata&&(v(this,"oncdata",this.cdata),this.cdata="");""!==this.script&&(v(this,"onscript",this.script),this.script="")}};try{var L=y("stream").Stream}catch(c){L=function(){}}var I=
n.EVENTS.filter(function(c){return"error"!==c&&"end"!==c});w.prototype=Object.create(L.prototype,{constructor:{value:w}});w.prototype.write=function(c){"function"===typeof C&&"function"===typeof C.isBuffer&&C.isBuffer(c)&&(this._decoder||(this._decoder=new (y("string_decoder").StringDecoder)("utf8")),c=this._decoder.write(c));this._parser.write(c.toString());this.emit("data",c);return!0};w.prototype.end=function(c){c&&c.length&&this.write(c);this._parser.end();return!0};w.prototype.on=function(c,
g){var q=this;q._parser["on"+c]||-1===I.indexOf(c)||(q._parser["on"+c]=function(){var K=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);K.splice(0,0,c);q.emit.apply(q,K)});return L.prototype.on.call(q,c,g)};var N="[CDATA[",M="DOCTYPE",T="http://www.w3.org/XML/1998/namespace",S="http://www.w3.org/2000/xmlns/",O={xml:T,xmlns:S},V=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
W=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,U=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,b=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,
a=0;n.STATE={BEGIN:a++,BEGIN_WHITESPACE:a++,TEXT:a++,TEXT_ENTITY:a++,OPEN_WAKA:a++,SGML_DECL:a++,SGML_DECL_QUOTED:a++,DOCTYPE:a++,DOCTYPE_QUOTED:a++,DOCTYPE_DTD:a++,DOCTYPE_DTD_QUOTED:a++,COMMENT_STARTING:a++,COMMENT:a++,COMMENT_ENDING:a++,COMMENT_ENDED:a++,CDATA:a++,CDATA_ENDING:a++,CDATA_ENDING_2:a++,PROC_INST:a++,PROC_INST_BODY:a++,PROC_INST_ENDING:a++,OPEN_TAG:a++,OPEN_TAG_SLASH:a++,ATTRIB:a++,ATTRIB_NAME:a++,ATTRIB_NAME_SAW_WHITE:a++,ATTRIB_VALUE:a++,ATTRIB_VALUE_QUOTED:a++,ATTRIB_VALUE_CLOSED:a++,
ATTRIB_VALUE_UNQUOTED:a++,ATTRIB_VALUE_ENTITY_Q:a++,ATTRIB_VALUE_ENTITY_U:a++,CLOSE_TAG:a++,CLOSE_TAG_SAW_WHITE:a++,SCRIPT:a++,SCRIPT_ENDING:a++};n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,
THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,
laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,
Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,
lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,
ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(n.ENTITIES).forEach(function(c){var g=n.ENTITIES[c];g="number"===typeof g?String.fromCharCode(g):g;n.ENTITIES[c]=g});for(var d in n.STATE)n.STATE[n.STATE[d]]=d;a=n.STATE;String.fromCodePoint||function(){var c=String.fromCharCode,g=Math.floor,q=function(){var K=[],R=-1,
P=arguments.length;if(!P)return"";for(var F="";++R<P;){var z=Number(arguments[R]);if(!isFinite(z)||0>z||1114111<z||g(z)!==z)throw RangeError("Invalid code point: "+z);if(65535>=z)K.push(z);else{z-=65536;var Q=(z>>10)+55296;z=z%1024+56320;K.push(Q,z)}if(R+1===P||16384<K.length)F+=c.apply(null,K),K.length=0}return F};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:q,configurable:!0,writable:!0}):String.fromCodePoint=q}()})("undefined"===typeof D?this.sax={}:D)}).call(this)}).call(this,
y("buffer").Buffer)},{buffer:15,stream:36,string_decoder:70}],36:[function(y,J,D){function C(){n.call(this)}J.exports=C;var n=y("events").EventEmitter;y("inherits")(C,n);C.Readable=y("readable-stream/lib/_stream_readable.js");C.Writable=y("readable-stream/lib/_stream_writable.js");C.Duplex=y("readable-stream/lib/_stream_duplex.js");C.Transform=y("readable-stream/lib/_stream_transform.js");C.PassThrough=y("readable-stream/lib/_stream_passthrough.js");C.finished=y("readable-stream/lib/internal/streams/end-of-stream.js");
C.pipeline=y("readable-stream/lib/internal/streams/pipeline.js");C.Stream=C;C.prototype.pipe=function(f,w){function e(u){f.writable&&!1===f.write(u)&&h.pause&&h.pause()}function r(){h.readable&&h.resume&&h.resume()}function v(){E||(E=!0,f.end())}function t(){E||(E=!0,"function"===typeof f.destroy&&f.destroy())}function k(u){l();if(0===n.listenerCount(this,"error"))throw u;}function l(){h.removeListener("data",e);f.removeListener("drain",r);h.removeListener("end",v);h.removeListener("close",t);h.removeListener("error",
k);f.removeListener("error",k);h.removeListener("end",l);h.removeListener("close",l);f.removeListener("close",l)}var h=this;h.on("data",e);f.on("drain",r);f._isStdio||w&&!1===w.end||(h.on("end",v),h.on("close",t));var E=!1;h.on("error",k);f.on("error",k);h.on("end",l);h.on("close",l);f.on("close",l);f.emit("pipe",h);return f}},{events:17,inherits:20,"readable-stream/lib/_stream_duplex.js":38,"readable-stream/lib/_stream_passthrough.js":39,"readable-stream/lib/_stream_readable.js":40,"readable-stream/lib/_stream_transform.js":41,
"readable-stream/lib/_stream_writable.js":42,"readable-stream/lib/internal/streams/end-of-stream.js":46,"readable-stream/lib/internal/streams/pipeline.js":48}],37:[function(y,J,D){function C(e,r){e.prototype=Object.create(r.prototype);e.prototype.constructor=e;e.__proto__=r}function n(e,r,v){v||=Error;var t=function(k){function l(h,E,u){var B=k.call;h="string"===typeof r?r:r(h,E,u);return B.call(k,this,h)||this}C(l,k);return l}(v);t.prototype.name=v.name;t.prototype.code=e;w[e]=t}function f(e,r){if(Array.isArray(e)){var v=
e.length;e=e.map(function(t){return String(t)});return 2<v?"one of ".concat(r," ").concat(e.slice(0,v-1).join(", "),", or ")+e[v-1]:2===v?"one of ".concat(r," ").concat(e[0]," or ").concat(e[1]):"of ".concat(r," ").concat(e[0])}return"of ".concat(r," ").concat(String(e))}var w={};n("ERR_INVALID_OPT_VALUE",function(e,r){return'The value "'+r+'" is invalid for option "'+e+'"'},TypeError);n("ERR_INVALID_ARG_TYPE",function(e,r,v){var t;if(t="string"===typeof r)t="not "===r.substr(0,4);t?(t="must not be",
r=r.replace(/^not /,"")):t="must be";var k=void 0;if(void 0===k||k>e.length)k=e.length;" argument"===e.substring(k-9,k)?e="The ".concat(e," ").concat(t," ").concat(f(r,"type")):(k=void 0,"number"!==typeof k&&(k=0),k=k+1>e.length?!1:-1!==e.indexOf(".",k),k=k?"property":"argument",e='The "'.concat(e,'" ').concat(k," ").concat(t," ").concat(f(r,"type")));return e+=". Received type ".concat(typeof v)},TypeError);n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");n("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+
e+" method is not implemented"});n("ERR_STREAM_PREMATURE_CLOSE","Premature close");n("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});n("ERR_MULTIPLE_CALLBACK","Callback called multiple times");n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");n("ERR_STREAM_WRITE_AFTER_END","write after end");n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);n("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT",
"stream.unshift() after end event");J.exports.codes=w},{}],38:[function(y,J,D){(function(C){(function(){function n(l){if(!(this instanceof n))return new n(l);r.call(this,l);v.call(this,l);this.allowHalfOpen=!0;l&&(!1===l.readable&&(this.readable=!1),!1===l.writable&&(this.writable=!1),!1===l.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",f)))}function f(){this._writableState.ended||C.nextTick(w,this)}function w(l){l.end()}var e=Object.keys||function(l){var h=[],E;for(E in l)h.push(E);return h};
J.exports=n;var r=y("./_stream_readable"),v=y("./_stream_writable");y("inherits")(n,r);e=e(v.prototype);for(var t=0;t<e.length;t++){var k=e[t];n.prototype[k]||(n.prototype[k]=v.prototype[k])}Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(n.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(n.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(n.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(l){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=l,this._writableState.destroyed=l)}})}).call(this)}).call(this,y("_process"))},{"./_stream_readable":40,
"./_stream_writable":42,_process:27,inherits:20}],39:[function(y,J,D){function C(f){if(!(this instanceof C))return new C(f);n.call(this,f)}J.exports=C;var n=y("./_stream_transform");y("inherits")(C,n);C.prototype._transform=function(f,w,e){e(null,f)}},{"./_stream_transform":41,inherits:20}],40:[function(y,J,D){(function(C,n){(function(){function f(F,z,Q){if("function"===typeof F.prependListener)return F.prependListener(z,Q);if(F._events&&F._events[z])Array.isArray(F._events[z])?F._events[z].unshift(Q):
F._events[z]=[Q,F._events[z]];else F.on(z,Q)}function w(F,z,Q){I=I||y("./_stream_duplex");F=F||{};"boolean"!==typeof Q&&(Q=z instanceof I);this.objectMode=!!F.objectMode;Q&&(this.objectMode=this.objectMode||!!F.readableObjectMode);this.highWaterMark=W(this,F,"readableHighWaterMark",Q);this.buffer=new V;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=
!1;this.paused=!0;this.emitClose=!1!==F.emitClose;this.autoDestroy=!!F.autoDestroy;this.destroyed=!1;this.defaultEncoding=F.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;F.encoding&&(g||(g=y("string_decoder/").StringDecoder),this.decoder=new g(F.encoding),this.encoding=F.encoding)}function e(F){I=I||y("./_stream_duplex");if(!(this instanceof e))return new e(F);this._readableState=new w(F,this,this instanceof I);this.readable=!0;F&&("function"===typeof F.read&&
(this._read=F.read),"function"===typeof F.destroy&&(this._destroy=F.destroy));N.call(this)}function r(F,z,Q,Y,Z){O("readableAddChunk",z);var X=F._readableState;if(null===z)X.reading=!1,O("onEofChunk"),X.ended||(X.decoder&&(z=X.decoder.end())&&z.length&&(X.buffer.push(z),X.length+=X.objectMode?1:z.length),X.ended=!0,X.sync?k(F):(X.needReadable=!1,X.emittedReadable||(X.emittedReadable=!0,l(F))));else{if(!Z){Z=z;var da;M.isBuffer(Z)||Z instanceof T||"string"===typeof Z||void 0===Z||X.objectMode||(da=
new b("chunk",["string","Buffer","Uint8Array"],Z));var ea=da}if(ea)R(F,ea);else if(X.objectMode||z&&0<z.length)if("string"===typeof z||X.objectMode||Object.getPrototypeOf(z)===M.prototype||(z=M.from(z)),Y)X.endEmitted?R(F,new c):v(F,X,z,!0);else if(X.ended)R(F,new a);else{if(X.destroyed)return!1;X.reading=!1;X.decoder&&!Q?(z=X.decoder.write(z),X.objectMode||0!==z.length?v(F,X,z,!1):h(F,X)):v(F,X,z,!1)}else Y||(X.reading=!1,h(F,X))}return!X.ended&&(X.length<X.highWaterMark||0===X.length)}function v(F,
z,Q,Y){z.flowing&&0===z.length&&!z.sync?(z.awaitDrain=0,F.emit("data",Q)):(z.length+=z.objectMode?1:Q.length,Y?z.buffer.unshift(Q):z.buffer.push(Q),z.needReadable&&k(F));h(F,z)}function t(F,z){if(0>=F||0===z.length&&z.ended)return 0;if(z.objectMode)return 1;if(F!==F)return z.flowing&&z.length?z.buffer.head.data.length:z.length;if(F>z.highWaterMark){var Q=F;1073741824<=Q?Q=1073741824:(Q--,Q|=Q>>>1,Q|=Q>>>2,Q|=Q>>>4,Q|=Q>>>8,Q|=Q>>>16,Q++);z.highWaterMark=Q}return F<=z.length?F:z.ended?z.length:(z.needReadable=
!0,0)}function k(F){var z=F._readableState;O("emitReadable",z.needReadable,z.emittedReadable);z.needReadable=!1;z.emittedReadable||(O("emitReadable",z.flowing),z.emittedReadable=!0,C.nextTick(l,F))}function l(F){var z=F._readableState;O("emitReadable_",z.destroyed,z.length,z.ended);z.destroyed||!z.length&&!z.ended||(F.emit("readable"),z.emittedReadable=!1);z.needReadable=!z.flowing&&!z.ended&&z.length<=z.highWaterMark;p(F)}function h(F,z){z.readingMore||(z.readingMore=!0,C.nextTick(E,F,z))}function E(F,
z){for(;!z.reading&&!z.ended&&(z.length<z.highWaterMark||z.flowing&&0===z.length);){var Q=z.length;O("maybeReadMore read 0");F.read(0);if(Q===z.length)break}z.readingMore=!1}function u(F){return function(){var z=F._readableState;O("pipeOnDrain",z.awaitDrain);z.awaitDrain&&z.awaitDrain--;0===z.awaitDrain&&F.listeners("data").length&&(z.flowing=!0,p(F))}}function B(F){var z=F._readableState;z.readableListening=0<F.listenerCount("readable");z.resumeScheduled&&!z.paused?z.flowing=!0:0<F.listenerCount("data")&&
F.resume()}function m(F){O("readable nexttick read 0");F.read(0)}function A(F,z){O("resume",z.reading);z.reading||F.read(0);z.resumeScheduled=!1;F.emit("resume");p(F);z.flowing&&!z.reading&&F.read(0)}function p(F){var z=F._readableState;for(O("flow",z.flowing);z.flowing&&null!==F.read(););}function x(F,z){if(0===z.length)return null;z.objectMode?F=z.buffer.shift():!F||F>=z.length?(F=z.decoder?z.buffer.join(""):1===z.buffer.length?z.buffer.first():z.buffer.concat(z.length),z.buffer.clear()):F=z.buffer.consume(F,
z.decoder);return F}function G(F){var z=F._readableState;O("endReadable",z.endEmitted);z.endEmitted||(z.ended=!0,C.nextTick(H,z,F))}function H(F,z){O("endReadableNT",F.endEmitted,F.length);F.endEmitted||0!==F.length||(F.endEmitted=!0,z.readable=!1,z.emit("end"),F.autoDestroy&&(F=z._writableState,(!F||F.autoDestroy&&F.finished)&&z.destroy()))}function L(F,z){for(var Q=0,Y=F.length;Q<Y;Q++)if(F[Q]===z)return Q;return-1}J.exports=e;var I;e.ReadableState=w;y("events");var N=y("./internal/streams/stream"),
M=y("buffer").Buffer,T=n.Uint8Array||function(){},S=y("util");var O=S&&S.debuglog?S.debuglog("stream"):function(){};var V=y("./internal/streams/buffer_list");S=y("./internal/streams/destroy");var W=y("./internal/streams/state").getHighWaterMark,U=y("../errors").codes,b=U.ERR_INVALID_ARG_TYPE,a=U.ERR_STREAM_PUSH_AFTER_EOF,d=U.ERR_METHOD_NOT_IMPLEMENTED,c=U.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,g,q,K;y("inherits")(e,N);var R=S.errorOrDestroy,P=["error","close","destroy","pause","resume"];Object.defineProperty(e.prototype,
"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(F){this._readableState&&(this._readableState.destroyed=F)}});e.prototype.destroy=S.destroy;e.prototype._undestroy=S.undestroy;e.prototype._destroy=function(F,z){z(F)};e.prototype.push=function(F,z){var Q=this._readableState;if(Q.objectMode)var Y=!0;else"string"===typeof F&&(z=z||Q.defaultEncoding,z!==Q.encoding&&(F=M.from(F,z),z=""),Y=!0);return r(this,F,z,!1,Y)};e.prototype.unshift=
function(F){return r(this,F,null,!0,!1)};e.prototype.isPaused=function(){return!1===this._readableState.flowing};e.prototype.setEncoding=function(F){g||(g=y("string_decoder/").StringDecoder);F=new g(F);this._readableState.decoder=F;this._readableState.encoding=this._readableState.decoder.encoding;for(var z=this._readableState.buffer.head,Q="";null!==z;)Q+=F.write(z.data),z=z.next;this._readableState.buffer.clear();""!==Q&&this._readableState.buffer.push(Q);this._readableState.length=Q.length;return this};
e.prototype.read=function(F){O("read",F);F=parseInt(F,10);var z=this._readableState,Q=F;0!==F&&(z.emittedReadable=!1);if(0===F&&z.needReadable&&((0!==z.highWaterMark?z.length>=z.highWaterMark:0<z.length)||z.ended))return O("read: emitReadable",z.length,z.ended),0===z.length&&z.ended?G(this):k(this),null;F=t(F,z);if(0===F&&z.ended)return 0===z.length&&G(this),null;var Y=z.needReadable;O("need readable",Y);if(0===z.length||z.length-F<z.highWaterMark)Y=!0,O("length less than watermark",Y);z.ended||z.reading?
O("reading or ended",!1):Y&&(O("do read"),z.reading=!0,z.sync=!0,0===z.length&&(z.needReadable=!0),this._read(z.highWaterMark),z.sync=!1,z.reading||(F=t(Q,z)));Y=0<F?x(F,z):null;null===Y?(z.needReadable=z.length<=z.highWaterMark,F=0):(z.length-=F,z.awaitDrain=0);0===z.length&&(z.ended||(z.needReadable=!0),Q!==F&&z.ended&&G(this));null!==Y&&this.emit("data",Y);return Y};e.prototype._read=function(F){R(this,new d("_read()"))};e.prototype.pipe=function(F,z){function Q(ca,ha){O("onunpipe");ca===ba&&ha&&
!1===ha.hasUnpiped&&(ha.hasUnpiped=!0,O("cleanup"),F.removeListener("close",da),F.removeListener("finish",ea),F.removeListener("drain",ia),F.removeListener("error",X),F.removeListener("unpipe",Q),ba.removeListener("end",Y),ba.removeListener("end",fa),ba.removeListener("data",Z),ja=!0,!aa.awaitDrain||F._writableState&&!F._writableState.needDrain||ia())}function Y(){O("onend");F.end()}function Z(ca){O("ondata");ca=F.write(ca);O("dest.write",ca);!1===ca&&((1===aa.pipesCount&&aa.pipes===F||1<aa.pipesCount&&
-1!==L(aa.pipes,F))&&!ja&&(O("false write response, pause",aa.awaitDrain),aa.awaitDrain++),ba.pause())}function X(ca){O("onerror",ca);fa();F.removeListener("error",X);0===F.listeners("error").length&&R(F,ca)}function da(){F.removeListener("finish",ea);fa()}function ea(){O("onfinish");F.removeListener("close",da);fa()}function fa(){O("unpipe");ba.unpipe(F)}var ba=this,aa=this._readableState;switch(aa.pipesCount){case 0:aa.pipes=F;break;case 1:aa.pipes=[aa.pipes,F];break;default:aa.pipes.push(F)}aa.pipesCount+=
1;O("pipe count=%d opts=%j",aa.pipesCount,z);z=z&&!1===z.end||F===C.stdout||F===C.stderr?fa:Y;if(aa.endEmitted)C.nextTick(z);else ba.once("end",z);F.on("unpipe",Q);var ia=u(ba);F.on("drain",ia);var ja=!1;ba.on("data",Z);f(F,"error",X);F.once("close",da);F.once("finish",ea);F.emit("pipe",ba);aa.flowing||(O("pipe resume"),ba.resume());return F};e.prototype.unpipe=function(F){var z=this._readableState,Q={hasUnpiped:!1};if(0===z.pipesCount)return this;if(1===z.pipesCount){if(F&&F!==z.pipes)return this;
F||(F=z.pipes);z.pipes=null;z.pipesCount=0;z.flowing=!1;F&&F.emit("unpipe",this,Q);return this}if(!F){F=z.pipes;Q=z.pipesCount;z.pipes=null;z.pipesCount=0;z.flowing=!1;for(z=0;z<Q;z++)F[z].emit("unpipe",this,{hasUnpiped:!1});return this}var Y=L(z.pipes,F);if(-1===Y)return this;z.pipes.splice(Y,1);--z.pipesCount;1===z.pipesCount&&(z.pipes=z.pipes[0]);F.emit("unpipe",this,Q);return this};e.prototype.on=function(F,z){z=N.prototype.on.call(this,F,z);var Q=this._readableState;"data"===F?(Q.readableListening=
0<this.listenerCount("readable"),!1!==Q.flowing&&this.resume()):"readable"!==F||Q.endEmitted||Q.readableListening||(Q.readableListening=Q.needReadable=!0,Q.flowing=!1,Q.emittedReadable=!1,O("on readable",Q.length,Q.reading),Q.length?k(this):Q.reading||C.nextTick(m,this));return z};e.prototype.addListener=e.prototype.on;e.prototype.removeListener=function(F,z){z=N.prototype.removeListener.call(this,F,z);"readable"===F&&C.nextTick(B,this);return z};e.prototype.removeAllListeners=function(F){var z=N.prototype.removeAllListeners.apply(this,
arguments);"readable"!==F&&void 0!==F||C.nextTick(B,this);return z};e.prototype.resume=function(){var F=this._readableState;F.flowing||(O("resume"),F.flowing=!F.readableListening,F.resumeScheduled||(F.resumeScheduled=!0,C.nextTick(A,this,F)));F.paused=!1;return this};e.prototype.pause=function(){O("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(O("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};e.prototype.wrap=
function(F){var z=this,Q=this._readableState,Y=!1;F.on("end",function(){O("wrapped end");if(Q.decoder&&!Q.ended){var X=Q.decoder.end();X&&X.length&&z.push(X)}z.push(null)});F.on("data",function(X){O("wrapped data");Q.decoder&&(X=Q.decoder.write(X));Q.objectMode&&(null===X||void 0===X)||!(Q.objectMode||X&&X.length)||z.push(X)||(Y=!0,F.pause())});for(var Z in F)void 0===this[Z]&&"function"===typeof F[Z]&&(this[Z]=function(X){return function(){return F[X].apply(F,arguments)}}(Z));for(Z=0;Z<P.length;Z++)F.on(P[Z],
this.emit.bind(this,P[Z]));this._read=function(X){O("wrapped _read",X);Y&&(Y=!1,F.resume())};return this};"function"===typeof Symbol&&(e.prototype[Symbol.asyncIterator]=function(){void 0===q&&(q=y("./internal/streams/async_iterator"));return q(this)});Object.defineProperty(e.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(e.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});
Object.defineProperty(e.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(F){this._readableState&&(this._readableState.flowing=F)}});e._fromList=x;Object.defineProperty(e.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(e.from=function(F,z){void 0===K&&(K=y("./internal/streams/from"));return K(e,F,z)})}).call(this)}).call(this,y("_process"),"undefined"!==typeof global?
global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":37,"./_stream_duplex":38,"./internal/streams/async_iterator":43,"./internal/streams/buffer_list":44,"./internal/streams/destroy":45,"./internal/streams/from":47,"./internal/streams/state":49,"./internal/streams/stream":50,_process:27,buffer:15,events:17,inherits:20,"string_decoder/":70,util:14}],41:[function(y,J,D){function C(l,h){var E=this._transformState;E.transforming=!1;var u=E.writecb;if(null===u)return this.emit("error",
new r);E.writechunk=null;E.writecb=null;null!=h&&this.push(h);u(l);l=this._readableState;l.reading=!1;(l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark)}function n(l){if(!(this instanceof n))return new n(l);k.call(this,l);this._transformState={afterTransform:C.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;l&&("function"===typeof l.transform&&(this._transform=l.transform),
"function"===typeof l.flush&&(this._flush=l.flush));this.on("prefinish",f)}function f(){var l=this;"function"!==typeof this._flush||this._readableState.destroyed?w(this,null,null):this._flush(function(h,E){w(l,h,E)})}function w(l,h,E){if(h)return l.emit("error",h);null!=E&&l.push(E);if(l._writableState.length)throw new t;if(l._transformState.transforming)throw new v;return l.push(null)}J.exports=n;J=y("../errors").codes;var e=J.ERR_METHOD_NOT_IMPLEMENTED,r=J.ERR_MULTIPLE_CALLBACK,v=J.ERR_TRANSFORM_ALREADY_TRANSFORMING,
t=J.ERR_TRANSFORM_WITH_LENGTH_0,k=y("./_stream_duplex");y("inherits")(n,k);n.prototype.push=function(l,h){this._transformState.needTransform=!1;return k.prototype.push.call(this,l,h)};n.prototype._transform=function(l,h,E){E(new e("_transform()"))};n.prototype._write=function(l,h,E){var u=this._transformState;u.writecb=E;u.writechunk=l;u.writeencoding=h;u.transforming||(l=this._readableState,(u.needTransform||l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark))};n.prototype._read=
function(l){l=this._transformState;null===l.writechunk||l.transforming?l.needTransform=!0:(l.transforming=!0,this._transform(l.writechunk,l.writeencoding,l.afterTransform))};n.prototype._destroy=function(l,h){k.prototype._destroy.call(this,l,function(E){h(E)})}},{"../errors":37,"./_stream_duplex":38,inherits:20}],42:[function(y,J,D){(function(C,n){(function(){function f(b){var a=this;this.entry=this.next=null;this.finish=function(){var d=a.entry;for(a.entry=null;d;){var c=d.callback;b.pendingcb--;
c(void 0);d=d.next}b.corkedRequestsFree.next=a}}function w(){}function e(b,a,d){u=u||y("./_stream_duplex");b=b||{};"boolean"!==typeof d&&(d=a instanceof u);this.objectMode=!!b.objectMode;d&&(this.objectMode=this.objectMode||!!b.writableObjectMode);this.highWaterMark=G(this,b,"writableHighWaterMark",d);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==b.decodeStrings;this.defaultEncoding=b.defaultEncoding||"utf8";this.length=0;this.writing=
!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(c){var g=a._writableState,q=g.sync,K=g.writecb;if("function"!==typeof K)throw new N;g.writing=!1;g.writecb=null;g.length-=g.writelen;g.writelen=0;c?(--g.pendingcb,q?(C.nextTick(K,c),C.nextTick(E,a,g),a._writableState.errorEmitted=!0,W(a,c)):(K(c),a._writableState.errorEmitted=!0,W(a,c),E(a,g))):((c=l(g)||a.destroyed)||g.corked||g.bufferProcessing||!g.bufferedRequest||k(a,g),q?C.nextTick(t,a,g,c,K):t(a,g,c,K))};this.writecb=
null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==b.emitClose;this.autoDestroy=!!b.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new f(this)}function r(b){u=u||y("./_stream_duplex");var a=this instanceof u;if(!a&&!U.call(r,this))return new r(b);this._writableState=new e(b,this,a);this.writable=!0;b&&("function"===typeof b.write&&(this._write=b.write),"function"===typeof b.writev&&(this._writev=
b.writev),"function"===typeof b.destroy&&(this._destroy=b.destroy),"function"===typeof b.final&&(this._final=b.final));m.call(this)}function v(b,a,d,c,g,q,K){a.writelen=c;a.writecb=K;a.writing=!0;a.sync=!0;if(a.destroyed)a.onwrite(new T("write"));else d?b._writev(g,a.onwrite):b._write(g,q,a.onwrite);a.sync=!1}function t(b,a,d,c){!d&&0===a.length&&a.needDrain&&(a.needDrain=!1,b.emit("drain"));a.pendingcb--;c();E(b,a)}function k(b,a){a.bufferProcessing=!0;var d=a.bufferedRequest;if(b._writev&&d&&d.next){var c=
Array(a.bufferedRequestCount),g=a.corkedRequestsFree;g.entry=d;for(var q=0,K=!0;d;)c[q]=d,d.isBuf||(K=!1),d=d.next,q+=1;c.allBuffers=K;v(b,a,!0,a.length,c,"",g.finish);a.pendingcb++;a.lastBufferedRequest=null;g.next?(a.corkedRequestsFree=g.next,g.next=null):a.corkedRequestsFree=new f(a);a.bufferedRequestCount=0}else{for(;d&&(c=d.chunk,v(b,a,!1,a.objectMode?1:c.length,c,d.encoding,d.callback),d=d.next,a.bufferedRequestCount--,!a.writing););null===d&&(a.lastBufferedRequest=null)}a.bufferedRequest=d;
a.bufferProcessing=!1}function l(b){return b.ending&&0===b.length&&null===b.bufferedRequest&&!b.finished&&!b.writing}function h(b,a){b._final(function(d){a.pendingcb--;d&&W(b,d);a.prefinished=!0;b.emit("prefinish");E(b,a)})}function E(b,a){var d=l(a);d&&(a.prefinished||a.finalCalled||("function"!==typeof b._final||a.destroyed?(a.prefinished=!0,b.emit("prefinish")):(a.pendingcb++,a.finalCalled=!0,C.nextTick(h,b,a))),0===a.pendingcb&&(a.finished=!0,b.emit("finish"),a.autoDestroy&&(a=b._readableState,
(!a||a.autoDestroy&&a.endEmitted)&&b.destroy())));return d}J.exports=r;var u;r.WritableState=e;var B={deprecate:y("util-deprecate")},m=y("./internal/streams/stream"),A=y("buffer").Buffer,p=n.Uint8Array||function(){},x=y("./internal/streams/destroy"),G=y("./internal/streams/state").getHighWaterMark,H=y("../errors").codes,L=H.ERR_INVALID_ARG_TYPE,I=H.ERR_METHOD_NOT_IMPLEMENTED,N=H.ERR_MULTIPLE_CALLBACK,M=H.ERR_STREAM_CANNOT_PIPE,T=H.ERR_STREAM_DESTROYED,S=H.ERR_STREAM_NULL_VALUES,O=H.ERR_STREAM_WRITE_AFTER_END,
V=H.ERR_UNKNOWN_ENCODING,W=x.errorOrDestroy;y("inherits")(r,m);e.prototype.getBuffer=function(){for(var b=this.bufferedRequest,a=[];b;)a.push(b),b=b.next;return a};(function(){try{Object.defineProperty(e.prototype,"buffer",{get:B.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(b){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var U=Function.prototype[Symbol.hasInstance];
Object.defineProperty(r,Symbol.hasInstance,{value:function(b){return U.call(this,b)?!0:this!==r?!1:b&&b._writableState instanceof e}})}else U=function(b){return b instanceof this};r.prototype.pipe=function(){W(this,new M)};r.prototype.write=function(b,a,d){var c=this._writableState,g=!1,q;if(q=!c.objectMode)q=b,q=A.isBuffer(q)||q instanceof p;q&&!A.isBuffer(b)&&(b=A.from(b));"function"===typeof a&&(d=a,a=null);q?a="buffer":a||(a=c.defaultEncoding);"function"!==typeof d&&(d=w);if(c.ending)c=d,d=new O,
W(this,d),C.nextTick(c,d);else{var K;if(!(K=q)){K=b;var R=d,P;null===K?P=new S:"string"===typeof K||c.objectMode||(P=new L("chunk",["string","Buffer"],K));P?(W(this,P),C.nextTick(R,P),K=!1):K=!0}K&&(c.pendingcb++,g=q,g||(P=b,c.objectMode||!1===c.decodeStrings||"string"!==typeof P||(P=A.from(P,a)),b!==P&&(g=!0,a="buffer",b=P)),q=c.objectMode?1:b.length,c.length+=q,P=c.length<c.highWaterMark,P||(c.needDrain=!0),c.writing||c.corked?(q=c.lastBufferedRequest,c.lastBufferedRequest={chunk:b,encoding:a,isBuf:g,
callback:d,next:null},q?q.next=c.lastBufferedRequest:c.bufferedRequest=c.lastBufferedRequest,c.bufferedRequestCount+=1):v(this,c,!1,q,b,a,d),g=P)}return g};r.prototype.cork=function(){this._writableState.corked++};r.prototype.uncork=function(){var b=this._writableState;b.corked&&(b.corked--,b.writing||b.corked||b.bufferProcessing||!b.bufferedRequest||k(this,b))};r.prototype.setDefaultEncoding=function(b){"string"===typeof b&&(b=b.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((b+
"").toLowerCase())))throw new V(b);this._writableState.defaultEncoding=b;return this};Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});r.prototype._write=function(b,a,d){d(new I("_write()"))};r.prototype._writev=null;r.prototype.end=function(b,a,d){var c=this._writableState;
"function"===typeof b?(d=b,a=b=null):"function"===typeof a&&(d=a,a=null);null!==b&&void 0!==b&&this.write(b,a);c.corked&&(c.corked=1,this.uncork());if(!c.ending){b=d;c.ending=!0;E(this,c);if(b)if(c.finished)C.nextTick(b);else this.once("finish",b);c.ended=!0;this.writable=!1}return this};Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?
!1:this._writableState.destroyed},set:function(b){this._writableState&&(this._writableState.destroyed=b)}});r.prototype.destroy=x.destroy;r.prototype._undestroy=x.undestroy;r.prototype._destroy=function(b,a){a(b)}}).call(this)}).call(this,y("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":37,"./_stream_duplex":38,"./internal/streams/destroy":45,"./internal/streams/state":49,"./internal/streams/stream":50,_process:27,
buffer:15,inherits:20,"util-deprecate":74}],43:[function(y,J,D){(function(C){(function(){function n(x,G,H){G in x?Object.defineProperty(x,G,{value:H,enumerable:!0,configurable:!0,writable:!0}):x[G]=H;return x}function f(x,G){return{value:x,done:G}}function w(x){var G=x[k];if(null!==G){var H=x[m].read();null!==H&&(x[u]=null,x[k]=null,x[l]=null,G(f(H,!1)))}}function e(x){C.nextTick(w,x)}function r(x,G){return function(H,L){x.then(function(){if(G[E])H(f(void 0,!0));else G[B](H,L)},L)}}var v,t=y("./end-of-stream"),
k=Symbol("lastResolve"),l=Symbol("lastReject"),h=Symbol("error"),E=Symbol("ended"),u=Symbol("lastPromise"),B=Symbol("handlePromise"),m=Symbol("stream"),A=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((v={get stream(){return this[m]},next:function(){var x=this,G=this[h];if(null!==G)return Promise.reject(G);if(this[E])return Promise.resolve(f(void 0,!0));if(this[m].destroyed)return new Promise(function(H,L){C.nextTick(function(){x[h]?L(x[h]):H(f(void 0,!0))})});if(G=this[u])G=new Promise(r(G,
this));else{G=this[m].read();if(null!==G)return Promise.resolve(f(G,!1));G=new Promise(this[B])}return this[u]=G}},n(v,Symbol.asyncIterator,function(){return this}),n(v,"return",function(){var x=this;return new Promise(function(G,H){x[m].destroy(null,function(L){L?H(L):G(f(void 0,!0))})})}),v),A);J.exports=function(x){var G,H=Object.create(p,(G={},n(G,m,{value:x,writable:!0}),n(G,k,{value:null,writable:!0}),n(G,l,{value:null,writable:!0}),n(G,h,{value:null,writable:!0}),n(G,E,{value:x._readableState.endEmitted,
writable:!0}),n(G,B,{value:function(L,I){var N=H[m].read();N?(H[u]=null,H[k]=null,H[l]=null,L(f(N,!1))):(H[k]=L,H[l]=I)},writable:!0}),G));H[u]=null;t(x,function(L){if(L&&"ERR_STREAM_PREMATURE_CLOSE"!==L.code){var I=H[l];null!==I&&(H[u]=null,H[k]=null,H[l]=null,I(L));H[h]=L}else L=H[k],null!==L&&(H[u]=null,H[k]=null,H[l]=null,L(f(void 0,!0))),H[E]=!0});x.on("readable",e.bind(null,H));return H}}).call(this)}).call(this,y("_process"))},{"./end-of-stream":46,_process:27}],44:[function(y,J,D){function C(t,
k){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(t);k&&(h=h.filter(function(E){return Object.getOwnPropertyDescriptor(t,E).enumerable}));l.push.apply(l,h)}return l}function n(t){for(var k=1;k<arguments.length;k++){var l=null!=arguments[k]?arguments[k]:{};k%2?C(Object(l),!0).forEach(function(h){var E=l[h];h in t?Object.defineProperty(t,h,{value:E,enumerable:!0,configurable:!0,writable:!0}):t[h]=E}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,
Object.getOwnPropertyDescriptors(l)):C(Object(l)).forEach(function(h){Object.defineProperty(t,h,Object.getOwnPropertyDescriptor(l,h))})}return t}function f(t,k){for(var l=0;l<k.length;l++){var h=k[l];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(t,h.key,h)}}function w(t,k,l){k&&f(t.prototype,k);l&&f(t,l);return t}var e=y("buffer").Buffer,r=y("util").inspect,v=r&&r.custom||"inspect";J.exports=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");
this.tail=this.head=null;this.length=0}w(t,[{key:"push",value:function(k){k={data:k,next:null};0<this.length?this.tail.next=k:this.head=k;this.tail=k;++this.length}},{key:"unshift",value:function(k){k={data:k,next:this.head};0===this.length&&(this.tail=k);this.head=k;++this.length}},{key:"shift",value:function(){if(0!==this.length){var k=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return k}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=
0}},{key:"join",value:function(k){if(0===this.length)return"";for(var l=this.head,h=""+l.data;l=l.next;)h+=k+l.data;return h}},{key:"concat",value:function(k){if(0===this.length)return e.alloc(0);k=e.allocUnsafe(k>>>0);for(var l=this.head,h=0;l;)e.prototype.copy.call(l.data,k,h),h+=l.data.length,l=l.next;return k}},{key:"consume",value:function(k,l){k<this.head.data.length?(l=this.head.data.slice(0,k),this.head.data=this.head.data.slice(k)):l=k===this.head.data.length?this.shift():l?this._getString(k):
this._getBuffer(k);return l}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(k){var l=this.head,h=1,E=l.data;for(k-=E.length;l=l.next;){var u=l.data,B=k>u.length?u.length:k;E=B===u.length?E+u:E+u.slice(0,k);k-=B;if(0===k){B===u.length?(++h,this.head=l.next?l.next:this.tail=null):(this.head=l,l.data=u.slice(B));break}++h}this.length-=h;return E}},{key:"_getBuffer",value:function(k){var l=e.allocUnsafe(k),h=this.head,E=1;h.data.copy(l);for(k-=h.data.length;h=
h.next;){var u=h.data,B=k>u.length?u.length:k;u.copy(l,l.length-k,0,B);k-=B;if(0===k){B===u.length?(++E,this.head=h.next?h.next:this.tail=null):(this.head=h,h.data=u.slice(B));break}++E}this.length-=E;return l}},{key:v,value:function(k,l){return r(this,n({},l,{depth:0,customInspect:!1}))}}]);return t}()},{buffer:15,util:14}],45:[function(y,J,D){(function(C){(function(){function n(e,r){w(e,r);f(e)}function f(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||
e.emit("close")}function w(e,r){e.emit("error",r)}J.exports={destroy:function(e,r){var v=this,t=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||t)return r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,C.nextTick(w,this,e)):C.nextTick(w,this,e)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(e||null,function(k){!r&&
k?v._writableState?v._writableState.errorEmitted?C.nextTick(f,v):(v._writableState.errorEmitted=!0,C.nextTick(n,v,k)):C.nextTick(n,v,k):r?(C.nextTick(f,v),r(k)):C.nextTick(f,v)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=
!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,r){var v=e._readableState,t=e._writableState;v&&v.autoDestroy||t&&t.autoDestroy?e.destroy(r):e.emit("error",r)}}}).call(this)}).call(this,y("_process"))},{_process:27}],46:[function(y,J,D){function C(e){var r=!1;return function(){if(!r){r=!0;for(var v=arguments.length,t=Array(v),k=0;k<v;k++)t[k]=arguments[k];e.apply(this,t)}}}function n(){}function f(e,r,v){if("function"===
typeof r)return f(e,null,r);r||={};v=C(v||n);var t=r.readable||!1!==r.readable&&e.readable,k=r.writable||!1!==r.writable&&e.writable,l=function(){e.writable||E()},h=e._writableState&&e._writableState.finished,E=function(){k=!1;h=!0;t||v.call(e)},u=e._readableState&&e._readableState.endEmitted,B=function(){t=!1;u=!0;k||v.call(e)},m=function(x){v.call(e,x)},A=function(){var x;if(t&&!u)return e._readableState&&e._readableState.ended||(x=new w),v.call(e,x);if(k&&!h)return e._writableState&&e._writableState.ended||
(x=new w),v.call(e,x)},p=function(){e.req.on("finish",E)};if(e.setHeader&&"function"===typeof e.abort)if(e.on("complete",E),e.on("abort",A),e.req)p();else e.on("request",p);else k&&!e._writableState&&(e.on("end",l),e.on("close",l));e.on("end",B);e.on("finish",E);if(!1!==r.error)e.on("error",m);e.on("close",A);return function(){e.removeListener("complete",E);e.removeListener("abort",A);e.removeListener("request",p);e.req&&e.req.removeListener("finish",E);e.removeListener("end",l);e.removeListener("close",
l);e.removeListener("finish",E);e.removeListener("end",B);e.removeListener("error",m);e.removeListener("close",A)}}var w=y("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;J.exports=f},{"../../../errors":37}],47:[function(y,J,D){J.exports=function(){throw Error("Readable.from is not available in the browser");}},{}],48:[function(y,J,D){function C(k){var l=!1;return function(){l||(l=!0,k.apply(void 0,arguments))}}function n(k){if(k)throw k;}function f(k,l,h,E){E=C(E);var u=!1;k.on("close",function(){u=
!0});void 0===r&&(r=y("./end-of-stream"));r(k,{readable:l,writable:h},function(m){if(m)return E(m);u=!0;E()});var B=!1;return function(m){if(!u&&!B){B=!0;if(k.setHeader&&"function"===typeof k.abort)return k.abort();if("function"===typeof k.destroy)return k.destroy();E(m||new t("pipe"))}}}function w(k){k()}function e(k,l){return k.pipe(l)}var r;D=y("../../../errors").codes;var v=D.ERR_MISSING_ARGS,t=D.ERR_STREAM_DESTROYED;J.exports=function(){for(var k=arguments.length,l=Array(k),h=0;h<k;h++)l[h]=
arguments[h];var E=l.length?"function"!==typeof l[l.length-1]?n:l.pop():n;Array.isArray(l[0])&&(l=l[0]);if(2>l.length)throw new v("streams");var u,B=l.map(function(m,A){var p=A<l.length-1;return f(m,p,0<A,function(x){u||=x;x&&B.forEach(w);p||(B.forEach(w),E(u))})});return l.reduce(e)}},{"../../../errors":37,"./end-of-stream":46}],49:[function(y,J,D){var C=y("../../../errors").codes.ERR_INVALID_OPT_VALUE;J.exports={getHighWaterMark:function(n,f,w,e){f=null!=f.highWaterMark?f.highWaterMark:e?f[w]:null;
if(null!=f){if(!isFinite(f)||Math.floor(f)!==f||0>f)throw new C(e?w:"highWaterMark",f);return Math.floor(f)}return n.objectMode?16:16384}}},{"../../../errors":37}],50:[function(y,J,D){J.exports=y("events").EventEmitter},{events:17}],51:[function(y,J,D){(function(C){(function(){var n=y("./lib/request"),f=y("./lib/response"),w=y("xtend"),e=y("builtin-status-codes"),r=y("url");D.request=function(v,t){v="string"===typeof v?r.parse(v):w(v);var k=-1===C.location.protocol.search(/^https?:$/)?"http:":"";
k=v.protocol||k;var l=v.hostname||v.host,h=v.port,E=v.path||"/";l&&-1!==l.indexOf(":")&&(l="["+l+"]");v.url=(l?k+"//"+l:"")+(h?":"+h:"")+E;v.method=(v.method||"GET").toUpperCase();v.headers=v.headers||{};v=new n(v);if(t)v.on("response",t);return v};D.get=function(v,t){v=D.request(v,t);v.end();return v};D.ClientRequest=n;D.IncomingMessage=f.IncomingMessage;D.Agent=function(){};D.Agent.defaultMaxSockets=4;D.globalAgent=new D.Agent;D.STATUS_CODES=e;D.METHODS="CHECKOUT CONNECT COPY DELETE GET HEAD LOCK M-SEARCH MERGE MKACTIVITY MKCOL MOVE NOTIFY OPTIONS PATCH POST PROPFIND PROPPATCH PURGE PUT REPORT SEARCH SUBSCRIBE TRACE UNLOCK UNSUBSCRIBE".split(" ")}).call(this)}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./lib/request":53,"./lib/response":54,"builtin-status-codes":16,url:72,xtend:76}],52:[function(y,J,D){(function(C){(function(){function n(){if(void 0!==e)return e;if(C.XMLHttpRequest){e=new C.XMLHttpRequest;try{e.open("GET",C.XDomainRequest?"/":"https://example.com")}catch(r){e=null}}else e=null;return e}function f(r){var v=n();if(!v)return!1;try{return v.responseType=r,v.responseType===r}catch(t){}return!1}
function w(r){return"function"===typeof r}D.fetch=w(C.fetch)&&w(C.ReadableStream);D.writableStream=w(C.WritableStream);D.abortController=w(C.AbortController);D.arraybuffer=D.fetch||f("arraybuffer");D.msstream=!D.fetch&&f("ms-stream");D.mozchunkedarraybuffer=!D.fetch&&f("moz-chunked-arraybuffer");D.overrideMimeType=D.fetch||(n()?w(n().overrideMimeType):!1);var e=null}).call(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],
53:[function(y,J,D){(function(C,n,f){(function(){var w=y("./capability"),e=y("inherits"),r=y("./response"),v=y("readable-stream"),t=r.IncomingMessage,k=r.readyStates;r=J.exports=function(h){var E=this;v.Writable.call(E);E._opts=h;E._body=[];E._headers={};h.auth&&E.setHeader("Authorization","Basic "+f.from(h.auth).toString("base64"));Object.keys(h.headers).forEach(function(m){E.setHeader(m,h.headers[m])});var u=!0;if("disable-fetch"===h.mode||"requestTimeout"in h&&!w.abortController){u=!1;var B=!0}else if("prefer-streaming"===
h.mode)B=!1;else if("allow-wrong-content-type"===h.mode)B=!w.overrideMimeType;else{if(h.mode&&"default"!==h.mode&&"prefer-fast"!==h.mode)throw Error("Invalid value for opts.mode");B=!0}E._mode=w.fetch&&u?"fetch":w.mozchunkedarraybuffer?"moz-chunked-arraybuffer":w.msstream?"ms-stream":w.arraybuffer&&B?"arraybuffer":"text";E._fetchTimer=null;E._socketTimeout=null;E._socketTimer=null;E.on("finish",function(){E._onFinish()})};e(r,v.Writable);r.prototype.setHeader=function(h,E){var u=h.toLowerCase();-1===
l.indexOf(u)&&(this._headers[u]={name:h,value:E})};r.prototype.getHeader=function(h){return(h=this._headers[h.toLowerCase()])?h.value:null};r.prototype.removeHeader=function(h){delete this._headers[h.toLowerCase()]};r.prototype._onFinish=function(){var h=this;if(!h._destroyed){var E=h._opts;"timeout"in E&&0!==E.timeout&&h.setTimeout(E.timeout);var u=h._headers,B=null;"GET"!==E.method&&"HEAD"!==E.method&&(B=new Blob(h._body,{type:(u["content-type"]||{}).value||""}));var m=[];Object.keys(u).forEach(function(G){var H=
u[G].name;G=u[G].value;Array.isArray(G)?G.forEach(function(L){m.push([H,L])}):m.push([H,G])});if("fetch"===h._mode){var A=null;if(w.abortController){var p=new AbortController;A=p.signal;h._fetchAbortController=p;"requestTimeout"in E&&0!==E.requestTimeout&&(h._fetchTimer=n.setTimeout(function(){h.emit("requestTimeout");h._fetchAbortController&&h._fetchAbortController.abort()},E.requestTimeout))}n.fetch(h._opts.url,{method:h._opts.method,headers:m,body:B||void 0,mode:"cors",credentials:E.withCredentials?
"include":"same-origin",signal:A}).then(function(G){h._fetchResponse=G;h._resetTimers(!1);h._connect()},function(G){h._resetTimers(!0);h._destroyed||h.emit("error",G)})}else{var x=h._xhr=new n.XMLHttpRequest;try{x.open(h._opts.method,h._opts.url,!0)}catch(G){C.nextTick(function(){h.emit("error",G)});return}"responseType"in x&&(x.responseType=h._mode);"withCredentials"in x&&(x.withCredentials=!!E.withCredentials);"text"===h._mode&&"overrideMimeType"in x&&x.overrideMimeType("text/plain; charset=x-user-defined");
"requestTimeout"in E&&(x.timeout=E.requestTimeout,x.ontimeout=function(){h.emit("requestTimeout")});m.forEach(function(G){x.setRequestHeader(G[0],G[1])});h._response=null;x.onreadystatechange=function(){switch(x.readyState){case k.LOADING:case k.DONE:h._onXHRProgress()}};"moz-chunked-arraybuffer"===h._mode&&(x.onprogress=function(){h._onXHRProgress()});x.onerror=function(){h._destroyed||(h._resetTimers(!0),h.emit("error",Error("XHR error")))};try{x.send(B)}catch(G){C.nextTick(function(){h.emit("error",
G)})}}}};r.prototype._onXHRProgress=function(){this._resetTimers(!1);try{var h=this._xhr.status;var E=null!==h&&0!==h}catch(u){E=!1}E&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress(this._resetTimers.bind(this)))};r.prototype._connect=function(){var h=this;h._destroyed||(h._response=new t(h._xhr,h._fetchResponse,h._mode,h._resetTimers.bind(h)),h._response.on("error",function(E){h.emit("error",E)}),h.emit("response",h._response))};r.prototype._write=function(h,E,u){this._body.push(h);
u()};r.prototype._resetTimers=function(h){var E=this;n.clearTimeout(E._socketTimer);E._socketTimer=null;h?(n.clearTimeout(E._fetchTimer),E._fetchTimer=null):E._socketTimeout&&(E._socketTimer=n.setTimeout(function(){E.emit("timeout")},E._socketTimeout))};r.prototype.abort=r.prototype.destroy=function(h){this._destroyed=!0;this._resetTimers(!0);this._response&&(this._response._destroyed=!0);this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort();h&&this.emit("error",
h)};r.prototype.end=function(h,E,u){"function"===typeof h&&(u=h,h=void 0);v.Writable.prototype.end.call(this,h,E,u)};r.prototype.setTimeout=function(h,E){if(E)this.once("timeout",E);this._socketTimeout=h;this._resetTimers(!1)};r.prototype.flushHeaders=function(){};r.prototype.setNoDelay=function(){};r.prototype.setSocketKeepAlive=function(){};var l="accept-charset accept-encoding access-control-request-headers access-control-request-method connection content-length cookie cookie2 date dnt expect host keep-alive origin referer te trailer transfer-encoding upgrade via".split(" ")}).call(this)}).call(this,
y("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},y("buffer").Buffer)},{"./capability":52,"./response":54,_process:27,buffer:15,inherits:20,"readable-stream":69}],54:[function(y,J,D){(function(C,n,f){(function(){var w=y("./capability"),e=y("inherits"),r=y("readable-stream"),v=D.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},t=D.IncomingMessage=function(k,l,h,E){var u=this;r.Readable.call(u);u._mode=h;u.headers=
{};u.rawHeaders=[];u.trailers={};u.rawTrailers=[];u.on("end",function(){C.nextTick(function(){u.emit("close")})});if("fetch"===h){u._fetchResponse=l;u.url=l.url;u.statusCode=l.status;u.statusMessage=l.statusText;l.headers.forEach(function(A,p){u.headers[p.toLowerCase()]=A;u.rawHeaders.push(p,A)});if(w.writableStream){k=new WritableStream({write:function(A){E(!1);return new Promise(function(p,x){u._destroyed?x():u.push(f.from(A))?p():u._resumeFetch=p})},close:function(){E(!0);u._destroyed||u.push(null)},
abort:function(A){E(!0);u._destroyed||u.emit("error",A)}});try{l.body.pipeTo(k).catch(function(A){E(!0);u._destroyed||u.emit("error",A)});return}catch(A){}}var B=l.body.getReader();function m(){B.read().then(function(A){u._destroyed||(E(A.done),A.done?u.push(null):(u.push(f.from(A.value)),m()))}).catch(function(A){E(!0);u._destroyed||u.emit("error",A)})}m()}else if(u._xhr=k,u._pos=0,u.url=k.responseURL,u.statusCode=k.status,u.statusMessage=k.statusText,k.getAllResponseHeaders().split(/\r?\n/).forEach(function(m){if(m=
m.match(/^([^:]+):\s*(.*)/)){var A=m[1].toLowerCase();"set-cookie"===A?(void 0===u.headers[A]&&(u.headers[A]=[]),u.headers[A].push(m[2])):u.headers[A]=void 0!==u.headers[A]?u.headers[A]+(", "+m[2]):m[2];u.rawHeaders.push(m[1],m[2])}}),u._charset="x-user-defined",!w.overrideMimeType){if(l=u.rawHeaders["mime-type"])if(l=l.match(/;\s*charset=([^;])(;|$)/))u._charset=l[1].toLowerCase();u._charset||(u._charset="utf-8")}};e(t,r.Readable);t.prototype._read=function(){var k=this._resumeFetch;k&&(this._resumeFetch=
null,k())};t.prototype._onXHRProgress=function(k){var l=this,h=l._xhr,E=null;switch(l._mode){case "text":E=h.responseText;if(E.length>l._pos){h=E.substr(l._pos);if("x-user-defined"===l._charset){for(var u=f.alloc(h.length),B=0;B<h.length;B++)u[B]=h.charCodeAt(B)&255;l.push(u)}else l.push(h,l._charset);l._pos=E.length}break;case "arraybuffer":if(h.readyState!==v.DONE||!h.response)break;E=h.response;l.push(f.from(new Uint8Array(E)));break;case "moz-chunked-arraybuffer":E=h.response;if(h.readyState!==
v.LOADING||!E)break;l.push(f.from(new Uint8Array(E)));break;case "ms-stream":if(E=h.response,h.readyState===v.LOADING){var m=new n.MSStreamReader;m.onprogress=function(){m.result.byteLength>l._pos&&(l.push(f.from(new Uint8Array(m.result.slice(l._pos)))),l._pos=m.result.byteLength)};m.onload=function(){k(!0);l.push(null)};m.readAsArrayBuffer(E)}}l._xhr.readyState===v.DONE&&"ms-stream"!==l._mode&&(k(!0),l.push(null))}}).call(this)}).call(this,y("_process"),"undefined"!==typeof global?global:"undefined"!==
typeof self?self:"undefined"!==typeof window?window:{},y("buffer").Buffer)},{"./capability":52,_process:27,buffer:15,inherits:20,"readable-stream":69}],55:[function(y,J,D){arguments[4][37][0].apply(D,arguments)},{dup:37}],56:[function(y,J,D){arguments[4][38][0].apply(D,arguments)},{"./_stream_readable":58,"./_stream_writable":60,_process:27,dup:38,inherits:20}],57:[function(y,J,D){arguments[4][39][0].apply(D,arguments)},{"./_stream_transform":59,dup:39,inherits:20}],58:[function(y,J,D){arguments[4][40][0].apply(D,
arguments)},{"../errors":55,"./_stream_duplex":56,"./internal/streams/async_iterator":61,"./internal/streams/buffer_list":62,"./internal/streams/destroy":63,"./internal/streams/from":65,"./internal/streams/state":67,"./internal/streams/stream":68,_process:27,buffer:15,dup:40,events:17,inherits:20,"string_decoder/":70,util:14}],59:[function(y,J,D){arguments[4][41][0].apply(D,arguments)},{"../errors":55,"./_stream_duplex":56,dup:41,inherits:20}],60:[function(y,J,D){arguments[4][42][0].apply(D,arguments)},
{"../errors":55,"./_stream_duplex":56,"./internal/streams/destroy":63,"./internal/streams/state":67,"./internal/streams/stream":68,_process:27,buffer:15,dup:42,inherits:20,"util-deprecate":74}],61:[function(y,J,D){arguments[4][43][0].apply(D,arguments)},{"./end-of-stream":64,_process:27,dup:43}],62:[function(y,J,D){arguments[4][44][0].apply(D,arguments)},{buffer:15,dup:44,util:14}],63:[function(y,J,D){arguments[4][45][0].apply(D,arguments)},{_process:27,dup:45}],64:[function(y,J,D){arguments[4][46][0].apply(D,
arguments)},{"../../../errors":55,dup:46}],65:[function(y,J,D){arguments[4][47][0].apply(D,arguments)},{dup:47}],66:[function(y,J,D){arguments[4][48][0].apply(D,arguments)},{"../../../errors":55,"./end-of-stream":64,dup:48}],67:[function(y,J,D){arguments[4][49][0].apply(D,arguments)},{"../../../errors":55,dup:49}],68:[function(y,J,D){arguments[4][50][0].apply(D,arguments)},{dup:50,events:17}],69:[function(y,J,D){D=J.exports=y("./lib/_stream_readable.js");D.Stream=D;D.Readable=D;D.Writable=y("./lib/_stream_writable.js");
D.Duplex=y("./lib/_stream_duplex.js");D.Transform=y("./lib/_stream_transform.js");D.PassThrough=y("./lib/_stream_passthrough.js");D.finished=y("./lib/internal/streams/end-of-stream.js");D.pipeline=y("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":56,"./lib/_stream_passthrough.js":57,"./lib/_stream_readable.js":58,"./lib/_stream_transform.js":59,"./lib/_stream_writable.js":60,"./lib/internal/streams/end-of-stream.js":64,"./lib/internal/streams/pipeline.js":66}],70:[function(y,J,D){function C(B){if(!B)return"utf8";
for(var m;;)switch(B){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return B;default:if(m)return;B=(""+B).toLowerCase();m=!0}}function n(B){var m=C(B);if("string"!==typeof m&&(E.isEncoding===u||!u(B)))throw Error("Unknown encoding: "+B);this.encoding=m||B;switch(this.encoding){case "utf16le":this.text=r;this.end=v;B=4;break;case "utf8":this.fillLast=e;B=
4;break;case "base64":this.text=t;this.end=k;B=3;break;default:this.write=l;this.end=h;return}this.lastTotal=this.lastNeed=0;this.lastChar=E.allocUnsafe(B)}function f(B){return 127>=B?0:6===B>>5?2:14===B>>4?3:30===B>>3?4:2===B>>6?-1:-2}function w(B,m,A){var p=m.length-1;if(p<A)return 0;var x=f(m[p]);if(0<=x)return 0<x&&(B.lastNeed=x-1),x;if(--p<A||-2===x)return 0;x=f(m[p]);if(0<=x)return 0<x&&(B.lastNeed=x-2),x;if(--p<A||-2===x)return 0;x=f(m[p]);return 0<=x?(0<x&&(2===x?x=0:B.lastNeed=x-3),x):0}
function e(B){var m=this.lastTotal-this.lastNeed;a:if(128!==(B[0]&192)){this.lastNeed=0;var A="\ufffd"}else{if(1<this.lastNeed&&1<B.length){if(128!==(B[1]&192)){this.lastNeed=1;A="\ufffd";break a}if(2<this.lastNeed&&2<B.length&&128!==(B[2]&192)){this.lastNeed=2;A="\ufffd";break a}}A=void 0}if(void 0!==A)return A;if(this.lastNeed<=B.length)return B.copy(this.lastChar,m,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);B.copy(this.lastChar,m,0,B.length);this.lastNeed-=B.length}
function r(B,m){if(0===(B.length-m)%2){if(m=B.toString("utf16le",m)){var A=m.charCodeAt(m.length-1);if(55296<=A&&56319>=A)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=B[B.length-2],this.lastChar[1]=B[B.length-1],m.slice(0,-1)}return m}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=B[B.length-1];return B.toString("utf16le",m,B.length-1)}function v(B){B=B&&B.length?this.write(B):"";return this.lastNeed?B+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):B}function t(B,
m){var A=(B.length-m)%3;if(0===A)return B.toString("base64",m);this.lastNeed=3-A;this.lastTotal=3;1===A?this.lastChar[0]=B[B.length-1]:(this.lastChar[0]=B[B.length-2],this.lastChar[1]=B[B.length-1]);return B.toString("base64",m,B.length-A)}function k(B){B=B&&B.length?this.write(B):"";return this.lastNeed?B+this.lastChar.toString("base64",0,3-this.lastNeed):B}function l(B){return B.toString(this.encoding)}function h(B){return B&&B.length?this.write(B):""}var E=y("safe-buffer").Buffer,u=E.isEncoding||
function(B){B=""+B;switch(B&&B.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};D.StringDecoder=n;n.prototype.write=function(B){if(0===B.length)return"";if(this.lastNeed){var m=this.fillLast(B);if(void 0===m)return"";var A=this.lastNeed;this.lastNeed=0}else A=0;return A<B.length?m?m+this.text(B,A):this.text(B,A):m||""};n.prototype.end=function(B){B=B&&B.length?
this.write(B):"";return this.lastNeed?B+"\ufffd":B};n.prototype.text=function(B,m){var A=w(this,B,m);if(!this.lastNeed)return B.toString("utf8",m);this.lastTotal=A;A=B.length-(A-this.lastNeed);B.copy(this.lastChar,0,A);return B.toString("utf8",m,A)};n.prototype.fillLast=function(B){if(this.lastNeed<=B.length)return B.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);B.copy(this.lastChar,this.lastTotal-this.lastNeed,0,B.length);
this.lastNeed-=B.length}},{"safe-buffer":34}],71:[function(y,J,D){(function(C,n){(function(){function f(k,l){this._id=k;this._clearFn=l}var w=y("process/browser.js").nextTick,e=Function.prototype.apply,r=Array.prototype.slice,v={},t=0;D.setTimeout=function(){return new f(e.call(setTimeout,window,arguments),clearTimeout)};D.setInterval=function(){return new f(e.call(setInterval,window,arguments),clearInterval)};D.clearTimeout=D.clearInterval=function(k){k.close()};f.prototype.unref=f.prototype.ref=
function(){};f.prototype.close=function(){this._clearFn.call(window,this._id)};D.enroll=function(k,l){clearTimeout(k._idleTimeoutId);k._idleTimeout=l};D.unenroll=function(k){clearTimeout(k._idleTimeoutId);k._idleTimeout=-1};D._unrefActive=D.active=function(k){clearTimeout(k._idleTimeoutId);var l=k._idleTimeout;0<=l&&(k._idleTimeoutId=setTimeout(function(){k._onTimeout&&k._onTimeout()},l))};D.setImmediate="function"===typeof C?C:function(k){var l=t++,h=2>arguments.length?!1:r.call(arguments,1);v[l]=
!0;w(function(){v[l]&&(h?k.apply(null,h):k.call(null),D.clearImmediate(l))});return l};D.clearImmediate="function"===typeof n?n:function(k){delete v[k]}}).call(this)}).call(this,y("timers").setImmediate,y("timers").clearImmediate)},{"process/browser.js":27,timers:71}],72:[function(y,J,D){function C(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function n(p,x,G){if(p&&w.isObject(p)&&p instanceof C)return p;
var H=new C;H.parse(p,x,G);return H}var f=y("punycode"),w=y("./util");D.parse=n;D.resolve=function(p,x){return n(p,!1,!0).resolve(x)};D.resolveObject=function(p,x){return p?n(p,!1,!0).resolveObject(x):x};D.format=function(p){w.isString(p)&&(p=n(p));return p instanceof C?p.format():C.prototype.format.call(p)};D.Url=C;var e=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,v=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/;J="{}|\\^`".split("").concat('<>"` \r\n\t'.split(""));var t=["'"].concat(J),k=["%","/","?",";","#"].concat(t),
l=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,E=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,u={javascript:!0,"javascript:":!0},B={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=y("querystring");C.prototype.parse=function(p,x,G){if(!w.isString(p))throw new TypeError("Parameter 'url' must be a string, not "+typeof p);var H=p.indexOf("?");H=-1!==H&&H<p.indexOf("#")?"?":"#";p=p.split(H);p[0]=p[0].replace(/\\/g,"/");p=p.join(H);
H=p.trim();if(!G&&1===p.split("#").length&&(p=v.exec(H)))return this.href=this.path=H,this.pathname=p[1],p[2]?(this.search=p[2],this.query=x?A.parse(this.search.substr(1)):this.search.substr(1)):x&&(this.search="",this.query={}),this;if(p=e.exec(H)){p=p[0];var L=p.toLowerCase();this.protocol=L;H=H.substr(p.length)}if(G||p||H.match(/^\/\/[^@\/]+@[^@\/]+/)){var I="//"===H.substr(0,2);!I||p&&B[p]||(H=H.substr(2),this.slashes=!0)}if(!B[p]&&(I||p&&!m[p])){I=-1;for(G=0;G<l.length;G++)p=H.indexOf(l[G]),
-1!==p&&(-1===I||p<I)&&(I=p);I=-1===I?H.lastIndexOf("@"):H.lastIndexOf("@",I);-1!==I&&(G=H.slice(0,I),H=H.slice(I+1),this.auth=decodeURIComponent(G));I=-1;for(G=0;G<k.length;G++)p=H.indexOf(k[G]),-1!==p&&(-1===I||p<I)&&(I=p);-1===I&&(I=H.length);this.host=H.slice(0,I);H=H.slice(I);this.parseHost();this.hostname=this.hostname||"";I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I){var N=this.hostname.split(/\./);G=0;for(p=N.length;G<p;G++){var M=N[G];if(M&&!M.match(h)){for(var T=
"",S=0,O=M.length;S<O;S++)T=127<M.charCodeAt(S)?T+"x":T+M[S];if(!T.match(h)){p=N.slice(0,G);G=N.slice(G+1);if(M=M.match(E))p.push(M[1]),G.unshift(M[2]);G.length&&(H="/"+G.join(".")+H);this.hostname=p.join(".");break}}}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase();I||(this.hostname=f.toASCII(this.hostname));G=this.port?":"+this.port:"";this.host=(this.hostname||"")+G;this.href+=this.host;I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==H[0]&&(H="/"+H))}if(!u[L])for(G=
0,p=t.length;G<p;G++)I=t[G],-1!==H.indexOf(I)&&(M=encodeURIComponent(I),M===I&&(M=escape(I)),H=H.split(I).join(M));G=H.indexOf("#");-1!==G&&(this.hash=H.substr(G),H=H.slice(0,G));G=H.indexOf("?");-1!==G?(this.search=H.substr(G),this.query=H.substr(G+1),x&&(this.query=A.parse(this.query)),H=H.slice(0,G)):x&&(this.search="",this.query={});H&&(this.pathname=H);m[L]&&this.hostname&&!this.pathname&&(this.pathname="/");if(this.pathname||this.search)G=this.pathname||"",this.path=G+(this.search||"");this.href=
this.format();return this};C.prototype.format=function(){var p=this.auth||"";p&&(p=encodeURIComponent(p),p=p.replace(/%3A/i,":"),p+="@");var x=this.protocol||"",G=this.pathname||"",H=this.hash||"",L=!1,I="";this.host?L=p+this.host:this.hostname&&(L=p+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(L+=":"+this.port));this.query&&w.isObject(this.query)&&Object.keys(this.query).length&&(I=A.stringify(this.query));p=this.search||I&&"?"+I||"";x&&":"!==x.substr(-1)&&(x+=
":");this.slashes||(!x||m[x])&&!1!==L?(L="//"+(L||""),G&&"/"!==G.charAt(0)&&(G="/"+G)):L||="";H&&"#"!==H.charAt(0)&&(H="#"+H);p&&"?"!==p.charAt(0)&&(p="?"+p);G=G.replace(/[?#]/g,function(N){return encodeURIComponent(N)});p=p.replace("#","%23");return x+L+G+p+H};C.prototype.resolve=function(p){return this.resolveObject(n(p,!1,!0)).format()};C.prototype.resolveObject=function(p){if(w.isString(p)){var x=new C;x.parse(p,!1,!0);p=x}x=new C;for(var G=Object.keys(this),H=0;H<G.length;H++){var L=G[H];x[L]=
this[L]}x.hash=p.hash;if(""===p.href)return x.href=x.format(),x;if(p.slashes&&!p.protocol){G=Object.keys(p);for(H=0;H<G.length;H++)L=G[H],"protocol"!==L&&(x[L]=p[L]);m[x.protocol]&&x.hostname&&!x.pathname&&(x.path=x.pathname="/");x.href=x.format();return x}if(p.protocol&&p.protocol!==x.protocol){if(!m[p.protocol]){G=Object.keys(p);for(H=0;H<G.length;H++)L=G[H],x[L]=p[L];x.href=x.format();return x}x.protocol=p.protocol;if(p.host||B[p.protocol])x.pathname=p.pathname;else{for(var I=(p.pathname||"").split("/");I.length&&
!(p.host=I.shift()););p.host||(p.host="");p.hostname||(p.hostname="");""!==I[0]&&I.unshift("");2>I.length&&I.unshift("");x.pathname=I.join("/")}x.search=p.search;x.query=p.query;x.host=p.host||"";x.auth=p.auth;x.hostname=p.hostname||p.host;x.port=p.port;if(x.pathname||x.search)x.path=(x.pathname||"")+(x.search||"");x.slashes=x.slashes||p.slashes;x.href=x.format();return x}G=x.pathname&&"/"===x.pathname.charAt(0);var N=p.host||p.pathname&&"/"===p.pathname.charAt(0),M=G=N||G||x.host&&p.pathname;H=x.pathname&&
x.pathname.split("/")||[];I=p.pathname&&p.pathname.split("/")||[];if(L=x.protocol&&!m[x.protocol])x.hostname="",x.port=null,x.host&&(""===H[0]?H[0]=x.host:H.unshift(x.host)),x.host="",p.protocol&&(p.hostname=null,p.port=null,p.host&&(""===I[0]?I[0]=p.host:I.unshift(p.host)),p.host=null),G=G&&(""===I[0]||""===H[0]);if(N)x.host=p.host||""===p.host?p.host:x.host,x.hostname=p.hostname||""===p.hostname?p.hostname:x.hostname,x.search=p.search,x.query=p.query,H=I;else if(I.length)H||=[],H.pop(),H=H.concat(I),
x.search=p.search,x.query=p.query;else if(!w.isNullOrUndefined(p.search))return L&&(x.hostname=x.host=H.shift(),L=x.host&&0<x.host.indexOf("@")?x.host.split("@"):!1)&&(x.auth=L.shift(),x.host=x.hostname=L.shift()),x.search=p.search,x.query=p.query,w.isNull(x.pathname)&&w.isNull(x.search)||(x.path=(x.pathname?x.pathname:"")+(x.search?x.search:"")),x.href=x.format(),x;if(!H.length)return x.pathname=null,x.path=x.search?"/"+x.search:null,x.href=x.format(),x;N=H.slice(-1)[0];I=(x.host||p.host||1<H.length)&&
("."===N||".."===N)||""===N;for(var T=0,S=H.length;0<=S;S--)N=H[S],"."===N?H.splice(S,1):".."===N?(H.splice(S,1),T++):T&&(H.splice(S,1),T--);if(!G&&!M)for(;T--;T)H.unshift("..");!G||""===H[0]||H[0]&&"/"===H[0].charAt(0)||H.unshift("");I&&"/"!==H.join("/").substr(-1)&&H.push("");M=""===H[0]||H[0]&&"/"===H[0].charAt(0);L&&(x.hostname=x.host=M?"":H.length?H.shift():"",L=x.host&&0<x.host.indexOf("@")?x.host.split("@"):!1)&&(x.auth=L.shift(),x.host=x.hostname=L.shift());(G=G||x.host&&H.length)&&!M&&H.unshift("");
H.length?x.pathname=H.join("/"):(x.pathname=null,x.path=null);w.isNull(x.pathname)&&w.isNull(x.search)||(x.path=(x.pathname?x.pathname:"")+(x.search?x.search:""));x.auth=p.auth||x.auth;x.slashes=x.slashes||p.slashes;x.href=x.format();return x};C.prototype.parseHost=function(){var p=this.host,x=r.exec(p);x&&(x=x[0],":"!==x&&(this.port=x.substr(1)),p=p.substr(0,p.length-x.length));p&&(this.hostname=p)}},{"./util":73,punycode:28,querystring:31}],73:[function(y,J,D){J.exports={isString:function(C){return"string"===
typeof C},isObject:function(C){return"object"===typeof C&&null!==C},isNull:function(C){return null===C},isNullOrUndefined:function(C){return null==C}}},{}],74:[function(y,J,D){(function(C){(function(){function n(f){try{if(!C.localStorage)return!1}catch(w){return!1}f=C.localStorage[f];return null==f?!1:"true"===String(f).toLowerCase()}J.exports=function(f,w){if(n("noDeprecation"))return f;var e=!1;return function(){if(!e){if(n("throwDeprecation"))throw Error(w);n("traceDeprecation")?console.trace(w):
console.warn(w);e=!0}return f.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],75:[function(y,J,D){function C(){}var n=function(v){if(Object.keys)return Object.keys(v);var t=[],k;for(k in v)t.push(k);return t},f=function(v,t){if(v.forEach)return v.forEach(t);for(var k=0;k<v.length;k++)t(v[k],k,v)},w=function(){try{return Object.defineProperty({},"_",{}),function(v,t,k){Object.defineProperty(v,
t,{writable:!0,enumerable:!1,configurable:!0,value:k})}}catch(v){return function(t,k,l){t[k]=l}}}(),e="Array Boolean Date Error EvalError Function Infinity JSON Math NaN Number Object RangeError ReferenceError RegExp String SyntaxError TypeError URIError decodeURI decodeURIComponent encodeURI encodeURIComponent escape eval isFinite isNaN parseFloat parseInt undefined unescape".split(" ");C.prototype={};var r=D.Script=function(v){if(!(this instanceof r))return new r(v);this.code=v};r.prototype.runInContext=
function(v){if(!(v instanceof C))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={});t.style.display="none";document.body.appendChild(t);var k=t.contentWindow,l=k.eval,h=k.execScript;!l&&h&&(h.call(k,"null"),l=k.eval);f(n(v),function(u){k[u]=v[u]});f(e,function(u){v[u]&&(k[u]=v[u])});var E=n(k);l=l.call(k,this.code);f(n(k),function(u){var B;if(!(B=u in v)){a:if(E.indexOf)B=E.indexOf(u);else{for(B=0;B<E.length;B++)if(E[B]===u)break a;B=-1}B=
-1===B}B&&(v[u]=k[u])});f(e,function(u){u in v||w(v,u,k[u])});document.body.removeChild(t);return l};r.prototype.runInThisContext=function(){return eval(this.code)};r.prototype.runInNewContext=function(v){var t=r.createContext(v),k=this.runInContext(t);v&&f(n(t),function(l){v[l]=t[l]});return k};f(n(r.prototype),function(v){D[v]=r[v]=function(t){var k=r(t);return k[v].apply(k,[].slice.call(arguments,1))}});D.isContext=function(v){return v instanceof C};D.createScript=function(v){return D.Script(v)};
D.createContext=r.createContext=function(v){var t=new C;"object"===typeof v&&f(n(v),function(k){t[k]=v[k]});return t}},{}],76:[function(y,J,D){J.exports=function(){for(var n={},f=0;f<arguments.length;f++){var w=arguments[f],e;for(e in w)C.call(w,e)&&(n[e]=w[e])}return n};var C=Object.prototype.hasOwnProperty},{}],77:[function(y,J,D){const {setTimeout:C}=y("timers");J.exports=class extends Map{constructor(n=1E3){super();this.timeout=n}set(n,f){this.has(n)&&clearTimeout(super.get(n).tid);super.set(n,
{tid:C(this.delete.bind(this,n),this.timeout).unref(),value:f})}get(n){return(n=super.get(n))?n.value:null}getOrSet(n,f){if(this.has(n))return this.get(n);let w=f();this.set(n,w);(async()=>{try{await w}catch(e){this.delete(n)}})();return w}delete(n){let f=super.get(n);f&&(clearTimeout(f.tid),super.delete(n))}clear(){for(let n of this.values())clearTimeout(n.tid);super.clear()}}},{timers:71}],78:[function(y,J,D){const C=y("./utils"),n=y("./formats"),f="mp4a mp3 vorbis aac opus flac".split(" "),w="mp4v;avc1;Sorenson H.283;MPEG-4 Visual;VP8;VP9;H.264".split(";"),
e=u=>u.bitrate||0,r=u=>w.findIndex(B=>u.codecs&&u.codecs.includes(B)),v=u=>u.audioBitrate||0,t=u=>f.findIndex(B=>u.codecs&&u.codecs.includes(B)),k=(u,B,m)=>{let A=0;for(let p of m)if(A=p(B)-p(u),0!==A)break;return A},l=(u,B)=>k(u,B,[m=>parseInt(m.qualityLabel),e,r]),h=(u,B)=>k(u,B,[v,t]);D.sortFormats=(u,B)=>k(u,B,[m=>+!!m.isHLS,m=>+!!m.isDashMPD,m=>+(0<m.contentLength),m=>+(m.hasVideo&&m.hasAudio),m=>+m.hasVideo,m=>parseInt(m.qualityLabel)||0,e,v,r,t]);D.chooseFormat=(u,B)=>{if("object"===typeof B.format){if(!B.format.url)throw Error("Invalid format given, did you use `ytdl.getInfo()`?");
return B.format}B.filter&&(u=D.filterFormats(u,B.filter));u.some(m=>m.isHLS)&&(u=u.filter(m=>m.isHLS||!m.isLive));B=B.quality||"highest";switch(B){case "highest":u=u[0];break;case "lowest":u=u[u.length-1];break;case "highestaudio":u=D.filterFormats(u,"audio");u.sort(h);const m=u[0];u=u.filter(G=>0===k(m,G,[v,t]));const A=u.map(G=>parseInt(G.qualityLabel)||0).sort((G,H)=>G-H)[0];u=u.find(G=>(parseInt(G.qualityLabel)||0)===A);break;case "lowestaudio":u=D.filterFormats(u,"audio");u.sort(h);u=u[u.length-
1];break;case "highestvideo":u=D.filterFormats(u,"video");u.sort(l);const p=u[0];u=u.filter(G=>0===l(p,G));const x=u.map(G=>G.audioBitrate||0).sort((G,H)=>G-H)[0];u=u.find(G=>(G.audioBitrate||0)===x);break;case "lowestvideo":u=D.filterFormats(u,"video");u.sort(l);u=u[u.length-1];break;default:u=E(B,u)}if(!u)throw Error(`No such format found: ${B}`);return u};const E=(u,B)=>{let m=A=>B.find(p=>`${p.itag}`===`${A}`);return Array.isArray(u)?m(u.find(A=>m(A))):m(u)};D.filterFormats=(u,B)=>{let m;switch(B){case "videoandaudio":case "audioandvideo":m=
A=>A.hasVideo&&A.hasAudio;break;case "video":m=A=>A.hasVideo;break;case "videoonly":m=A=>A.hasVideo&&!A.hasAudio;break;case "audio":m=A=>A.hasAudio;break;case "audioonly":m=A=>!A.hasVideo&&A.hasAudio;break;default:if("function"===typeof B)m=B;else throw TypeError(`Given filter (${B}) is not supported`);}return u.filter(A=>!!A.url&&m(A))};D.addFormatMeta=u=>{u=Object.assign({},n[u.itag],u);u.hasVideo=!!u.qualityLabel;u.hasAudio=!!u.audioBitrate;u.container=u.mimeType?u.mimeType.split(";")[0].split("/")[1]:
null;u.codecs=u.mimeType?C.between(u.mimeType,'codecs="','"'):null;u.videoCodec=u.hasVideo&&u.codecs?u.codecs.split(", ")[0]:null;u.audioCodec=u.hasAudio&&u.codecs?u.codecs.split(", ").slice(-1)[0]:null;u.isLive=/\bsource[/=]yt_live_broadcast\b/.test(u.url);u.isHLS=/\/manifest\/hls_(variant|playlist)\//.test(u.url);u.isDashMPD=/\/manifest\/dash\//.test(u.url);return u}},{"./formats":79,"./utils":85}],79:[function(y,J,D){J.exports={5:{mimeType:'video/flv; codecs="Sorenson H.283, mp3"',qualityLabel:"240p",
bitrate:25E4,audioBitrate:64},6:{mimeType:'video/flv; codecs="Sorenson H.263, mp3"',qualityLabel:"270p",bitrate:8E5,audioBitrate:64},13:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:null,bitrate:5E5,audioBitrate:null},17:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:"144p",bitrate:5E4,audioBitrate:24},18:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5E5,audioBitrate:96},22:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2E6,
audioBitrate:192},34:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5E5,audioBitrate:128},35:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"480p",bitrate:8E5,audioBitrate:128},36:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:"240p",bitrate:175E3,audioBitrate:32},37:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:3E6,audioBitrate:192},38:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"3072p",bitrate:35E5,audioBitrate:192},
43:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:5E5,audioBitrate:128},44:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"480p",bitrate:1E6,audioBitrate:128},45:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"720p",bitrate:2E6,audioBitrate:192},46:{mimeType:'audio/webm; codecs="vp8, vorbis"',qualityLabel:"1080p",bitrate:null,audioBitrate:192},82:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5E5,audioBitrate:96},83:{mimeType:'video/mp4; codecs="H.264, aac"',
qualityLabel:"240p",bitrate:5E5,audioBitrate:96},84:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2E6,audioBitrate:192},85:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:3E6,audioBitrate:192},91:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"144p",bitrate:1E5,audioBitrate:48},92:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"240p",bitrate:15E4,audioBitrate:48},93:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5E5,
audioBitrate:128},94:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"480p",bitrate:8E5,audioBitrate:128},95:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:15E5,audioBitrate:256},96:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:25E5,audioBitrate:256},100:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:null,audioBitrate:128},101:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:null,audioBitrate:192},
102:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"720p",bitrate:null,audioBitrate:192},120:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2E6,audioBitrate:128},127:{mimeType:'audio/ts; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:96},128:{mimeType:'audio/ts; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:96},132:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"240p",bitrate:15E4,audioBitrate:48},133:{mimeType:'video/mp4; codecs="H.264"',
qualityLabel:"240p",bitrate:2E5,audioBitrate:null},134:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"360p",bitrate:3E5,audioBitrate:null},135:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"480p",bitrate:5E5,audioBitrate:null},136:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"720p",bitrate:1E6,audioBitrate:null},137:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:25E5,audioBitrate:null},138:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"4320p",bitrate:135E5,
audioBitrate:null},139:{mimeType:'audio/mp4; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:48},140:{mimeType:'audio/m4a; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:128},141:{mimeType:'audio/mp4; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:256},151:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:5E4,audioBitrate:24},160:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"144p",bitrate:1E5,audioBitrate:null},171:{mimeType:'audio/webm; codecs="vorbis"',
qualityLabel:null,bitrate:null,audioBitrate:128},172:{mimeType:'audio/webm; codecs="vorbis"',qualityLabel:null,bitrate:null,audioBitrate:192},242:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p",bitrate:1E5,audioBitrate:null},243:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"360p",bitrate:25E4,audioBitrate:null},244:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"480p",bitrate:5E5,audioBitrate:null},247:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p",bitrate:7E5,audioBitrate:null},
248:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p",bitrate:15E5,audioBitrate:null},249:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:48},250:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:64},251:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:160},264:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1440p",bitrate:4E6,audioBitrate:null},266:{mimeType:'video/mp4; codecs="H.264"',
qualityLabel:"2160p",bitrate:125E5,audioBitrate:null},271:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p",bitrate:9E6,audioBitrate:null},272:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"4320p",bitrate:2E7,audioBitrate:null},278:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"144p 30fps",bitrate:8E4,audioBitrate:null},298:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"720p",bitrate:3E6,audioBitrate:null},299:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:55E5,
audioBitrate:null},300:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:1318E3,audioBitrate:48},302:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p HFR",bitrate:25E5,audioBitrate:null},303:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p HFR",bitrate:5E6,audioBitrate:null},308:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p HFR",bitrate:1E7,audioBitrate:null},313:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p",bitrate:13E6,audioBitrate:null},
315:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p HFR",bitrate:2E7,audioBitrate:null},330:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"144p HDR, HFR",bitrate:8E4,audioBitrate:null},331:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p HDR, HFR",bitrate:1E5,audioBitrate:null},332:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"360p HDR, HFR",bitrate:25E4,audioBitrate:null},333:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p HDR, HFR",bitrate:5E5,audioBitrate:null},
334:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p HDR, HFR",bitrate:1E6,audioBitrate:null},335:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p HDR, HFR",bitrate:15E5,audioBitrate:null},336:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p HDR, HFR",bitrate:5E6,audioBitrate:null},337:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p HDR, HFR",bitrate:12E6,audioBitrate:null}}},{}],80:[function(y,J,D){(function(C){(function(){const n=y("stream").PassThrough,f=y("./info"),
w=y("./utils"),e=y("./format-utils"),r=y("./url-utils"),v=y("./sig"),t=y("miniget"),k=y("m3u8stream"),{parseTimestamp:l}=y("m3u8stream"),h=(m,A)=>{const p=E(A);h.getInfo(m,A).then(x=>{B(p,x,A)},p.emit.bind(p,"error"));return p};J.exports=h;h.getBasicInfo=f.getBasicInfo;h.getInfo=f.getInfo;h.chooseFormat=e.chooseFormat;h.filterFormats=e.filterFormats;h.validateID=r.validateID;h.validateURL=r.validateURL;h.getURLVideoID=r.getURLVideoID;h.getVideoID=r.getVideoID;h.cache={sig:v.cache,info:f.cache,watch:f.watchPageCache,
cookie:f.cookieCache};h.version=y("../package.json").version;const E=m=>{const A=new n({highWaterMark:m&&m.highWaterMark||524288});A._destroy=()=>{A.destroyed=!0};return A},u=(m,A,p)=>{"abort request response error redirect retry reconnect".split(" ").forEach(x=>{m.prependListener(x,A.emit.bind(A,x))});m.pipe(A,{end:p})},B=(m,A,p)=>{p=p||{};let x=w.playError(A.player_response,["UNPLAYABLE","LIVE_STREAM_OFFLINE","LOGIN_REQUIRED"]);if(x)m.emit("error",x);else if(A.formats.length){try{var G=e.chooseFormat(A.formats,
p)}catch(S){m.emit("error",S);return}m.emit("info",A,G);if(!m.destroyed){var H=0,L=S=>{H+=S.length;m.emit("progress",S.length,H,T)},I=p.dlChunkSize||10485760,N=!0;if(G.isHLS||G.isDashMPD){var M=k(G.url,{chunkReadahead:+A.live_chunk_readahead,begin:p.begin||G.isLive&&Date.now(),liveBuffer:p.liveBuffer,requestOptions:p.requestOptions,parser:G.isDashMPD?"dash-mpd":"m3u8",id:G.itag});M.on("progress",(S,O)=>{m.emit("progress",S.size,S.num,O)});u(M,m,N)}else{const S=Object.assign({},p.requestOptions,{maxReconnects:6,
maxRetries:3,backoff:{inc:500,max:1E4}});if(0===I||G.hasAudio&&G.hasVideo)p.begin&&(G.url+=`&begin=${l(p.begin)}`),p.range&&(p.range.start||p.range.end)&&(S.headers=Object.assign({},S.headers,{Range:`bytes=${p.range.start||"0"}-${p.range.end||""}`})),M=t(G.url,S),M.on("response",O=>{m.destroyed||(T=T||parseInt(O.headers["content-length"]))}),M.on("data",L),u(M,m,N);else{let O=p.range&&p.range.start||0,V=O+I;const W=p.range&&p.range.end;var T=p.range?(W?W+1:parseInt(G.contentLength))-O:parseInt(G.contentLength);
const U=()=>{!W&&V>=T&&(V=0);W&&V>W&&(V=W);N=!V||V===W;S.headers=Object.assign({},S.headers,{Range:`bytes=${O}-${V||""}`});M=t(G.url,S);M.on("data",L);M.on("end",()=>{!m.destroyed&&V&&V!==W&&(O=V+1,V+=I,U())});u(M,m,N)};U()}}m._destroy=()=>{m.destroyed=!0;M.destroy();M.end()}}}else m.emit("error",Error("This video is unavailable"))};h.downloadFromInfo=(m,A)=>{const p=E(A);if(!m.full)throw Error("Cannot use `ytdl.downloadFromInfo()` when called with info from `ytdl.getBasicInfo()`");C(()=>{B(p,m,A)});
return p}}).call(this)}).call(this,y("timers").setImmediate)},{"../package.json":86,"./format-utils":78,"./info":82,"./sig":83,"./url-utils":84,"./utils":85,m3u8stream:22,miniget:26,stream:36,timers:71}],81:[function(y,J,D){const C=y("./utils"),n=y("querystring"),{parseTimestamp:f}=y("m3u8stream"),w={song:{name:"Music",url:"https://music.youtube.com/"}},e=t=>t?t.runs?t.runs[0].text:t.simpleText:null;D.getMedia=t=>{let k={},l=[];try{l=t.response.contents.twoColumnWatchNextResults.results.results.contents}catch(E){}t=
l.find(E=>E.videoSecondaryInfoRenderer);if(!t)return{};try{var h=(t.metadataRowContainer||t.videoSecondaryInfoRenderer.metadataRowContainer).metadataRowContainerRenderer.rows;for(let E of h)if(E.metadataRowRenderer){let u=e(E.metadataRowRenderer.title).toLowerCase(),B=E.metadataRowRenderer.contents[0];k[u]=e(B);let m=B.runs;m&&m[0].navigationEndpoint&&(k[`${u}_url`]=(new URL(m[0].navigationEndpoint.commandMetadata.webCommandMetadata.url,"https://www.youtube.com/watch?v=")).toString());u in w&&(k.category=
w[u].name,k.category_url=w[u].url)}else if(E.richMetadataRowRenderer){let u=E.richMetadataRowRenderer.contents,B=u.filter(A=>"RICH_METADATA_RENDERER_STYLE_BOX_ART"===A.richMetadataRenderer.style);for(let {richMetadataRenderer:A}of B){h=A;k.year=e(h.subtitle);let p=e(h.callToAction).split(" ")[1];k[p]=e(h.title);k[`${p}_url`]=(new URL(h.endpoint.commandMetadata.webCommandMetadata.url,"https://www.youtube.com/watch?v=")).toString();k.thumbnails=h.thumbnail.thumbnails}let m=u.filter(A=>"RICH_METADATA_RENDERER_STYLE_TOPIC"===
A.richMetadataRenderer.style);for(let {richMetadataRenderer:A}of m)h=A,k.category=e(h.title),k.category_url=(new URL(h.endpoint.commandMetadata.webCommandMetadata.url,"https://www.youtube.com/watch?v=")).toString()}}catch(E){}return k};const r=t=>!(!t||!t.find(k=>"Verified"===k.metadataBadgeRenderer.tooltip));D.getAuthor=t=>{let k,l=[],h,E=!1;try{let u=t.response.contents.twoColumnWatchNextResults.results.results.contents.find(B=>B.videoSecondaryInfoRenderer&&B.videoSecondaryInfoRenderer.owner&&B.videoSecondaryInfoRenderer.owner.videoOwnerRenderer).videoSecondaryInfoRenderer.owner.videoOwnerRenderer;
k=u.navigationEndpoint.browseEndpoint.browseId;l=u.thumbnail.thumbnails.map(B=>{B.url=(new URL(B.url,"https://www.youtube.com/watch?v=")).toString();return B});h=C.parseAbbreviatedNumber(e(u.subscriberCountText));E=r(u.badges)}catch(u){}try{let u=t.player_response.microformat&&t.player_response.microformat.playerMicroformatRenderer,B=u&&u.channelId||k||t.player_response.videoDetails.channelId,m={id:B,name:u?u.ownerChannelName:t.player_response.videoDetails.author,user:u?u.ownerProfileUrl.split("/").slice(-1)[0]:
null,channel_url:`https://www.youtube.com/channel/${B}`,external_channel_url:u?`https://www.youtube.com/channel/${u.externalChannelId}`:"",user_url:u?(new URL(u.ownerProfileUrl,"https://www.youtube.com/watch?v=")).toString():"",thumbnails:l,verified:E,subscriber_count:h};l.length&&C.deprecate(m,"avatar",m.thumbnails[0].url,"author.avatar","author.thumbnails[0].url");return m}catch(u){return{}}};const v=(t,k)=>{if(t)try{let l=e(t.viewCountText),h=e(t.shortViewCountText),E=k.find(x=>x.id===t.videoId);
/^\d/.test(h)||(h=E&&E.short_view_count_text||"");l=(/^\d/.test(l)?l:h).split(" ")[0];let u=t.shortBylineText.runs[0].navigationEndpoint.browseEndpoint,B=u.browseId,m=e(t.shortBylineText),A=(u.canonicalBaseUrl||"").split("/").slice(-1)[0],p={id:t.videoId,title:e(t.title),published:e(t.publishedTimeText),author:{id:B,name:m,user:A,channel_url:`https://www.youtube.com/channel/${B}`,user_url:`https://www.youtube.com/user/${A}`,thumbnails:t.channelThumbnail.thumbnails.map(x=>{x.url=(new URL(x.url,"https://www.youtube.com/watch?v=")).toString();
return x}),verified:r(t.ownerBadges),[Symbol.toPrimitive](){console.warn("`relatedVideo.author` will be removed in a near future release, use `relatedVideo.author.name` instead.");return p.author.name}},short_view_count_text:h.split(" ")[0],view_count:l.replace(/,/g,""),length_seconds:t.lengthText?Math.floor(f(e(t.lengthText))/1E3):k&&`${k.length_seconds}`,thumbnails:t.thumbnail.thumbnails,richThumbnails:t.richThumbnail?t.richThumbnail.movingThumbnailRenderer.movingThumbnailDetails.thumbnails:[],
isLive:!(!t.badges||!t.badges.find(x=>"LIVE NOW"===x.metadataBadgeRenderer.label))};C.deprecate(p,"author_thumbnail",p.author.thumbnails[0].url,"relatedVideo.author_thumbnail","relatedVideo.author.thumbnails[0].url");C.deprecate(p,"ucid",p.author.id,"relatedVideo.ucid","relatedVideo.author.id");C.deprecate(p,"video_thumbnail",p.thumbnails[0].url,"relatedVideo.video_thumbnail","relatedVideo.thumbnails[0].url");return p}catch(l){}};D.getRelatedVideos=t=>{let k=[];var l=[];try{k=t.response.webWatchNextResponseExtensionData.relatedVideoArgs.split(",").map(h=>
n.parse(h))}catch(h){}try{l=t.response.contents.twoColumnWatchNextResults.secondaryResults.secondaryResults.results}catch(h){return[]}t=[];for(let h of l||[])if(l=h.compactVideoRenderer)(l=v(l,k))&&t.push(l);else if((l=h.compactAutoplayRenderer||h.itemSectionRenderer)&&Array.isArray(l.contents))for(let E of l.contents)(l=v(E.compactVideoRenderer,k))&&t.push(l);return t};D.getLikes=t=>{try{let k=t.response.contents.twoColumnWatchNextResults.results.results.contents.find(l=>l.videoPrimaryInfoRenderer).videoPrimaryInfoRenderer.videoActions.menuRenderer.topLevelButtons.find(l=>
l.toggleButtonRenderer&&"LIKE"===l.toggleButtonRenderer.defaultIcon.iconType);return parseInt(k.toggleButtonRenderer.defaultText.accessibility.accessibilityData.label.replace(/\D+/g,""))}catch(k){return null}};D.getDislikes=t=>{try{let k=t.response.contents.twoColumnWatchNextResults.results.results.contents.find(l=>l.videoPrimaryInfoRenderer).videoPrimaryInfoRenderer.videoActions.menuRenderer.topLevelButtons.find(l=>l.toggleButtonRenderer&&"DISLIKE"===l.toggleButtonRenderer.defaultIcon.iconType);
return parseInt(k.toggleButtonRenderer.defaultText.accessibility.accessibilityData.label.replace(/\D+/g,""))}catch(k){return null}};D.cleanVideoDetails=(t,k)=>{t.thumbnails=t.thumbnail.thumbnails;delete t.thumbnail;C.deprecate(t,"thumbnail",{thumbnails:t.thumbnails},"videoDetails.thumbnail.thumbnails","videoDetails.thumbnails");t.description=t.shortDescription||e(t.description);delete t.shortDescription;C.deprecate(t,"shortDescription",t.description,"videoDetails.shortDescription","videoDetails.description");
t.lengthSeconds=k.player_response.microformat&&k.player_response.microformat.playerMicroformatRenderer.lengthSeconds||k.player_response.videoDetails.lengthSeconds;return t};D.getStoryboards=t=>{t=t.player_response.storyboards&&t.player_response.storyboards.playerStoryboardSpecRenderer&&t.player_response.storyboards.playerStoryboardSpecRenderer.spec&&t.player_response.storyboards.playerStoryboardSpecRenderer.spec.split("|");if(!t)return[];const k=new URL(t.shift());return t.map((l,h)=>{let [E,u,B,
m,A,p,x,G]=l.split("#");k.searchParams.set("sigh",G);B=parseInt(B,10);m=parseInt(m,10);A=parseInt(A,10);l=Math.ceil(B/(m*A));return{templateUrl:k.toString().replace("$L",h).replace("$N",x),thumbnailWidth:parseInt(E,10),thumbnailHeight:parseInt(u,10),thumbnailCount:B,interval:parseInt(p,10),columns:m,rows:A,storyboardCount:l}})};D.getChapters=t=>{t=(t=(t=t.response&&t.response.playerOverlays&&t.response.playerOverlays.playerOverlayRenderer)&&t.decoratedPlayerBarRenderer&&t.decoratedPlayerBarRenderer.decoratedPlayerBarRenderer&&
t.decoratedPlayerBarRenderer.decoratedPlayerBarRenderer.playerBar)&&t.multiMarkersPlayerBarRenderer&&t.multiMarkersPlayerBarRenderer.markersMap;return(t=Array.isArray(t)&&t.find(k=>k.value&&Array.isArray(k.value.chapters)))?t.value.chapters.map(k=>({title:e(k.chapterRenderer.title),start_time:k.chapterRenderer.timeRangeStartMillis/1E3})):[]}},{"./utils":85,m3u8stream:22,querystring:31}],82:[function(y,J,D){const C=y("querystring"),n=y("sax"),f=y("miniget"),w=y("./utils"),{setTimeout:e}=y("timers"),
r=y("./format-utils"),v=y("./url-utils"),t=y("./info-extras"),k=y("./sig");y=y("./cache");D.cache=new y;D.cookieCache=new y(864E5);D.watchPageCache=new y;let l="2.20210622.10.00";class h extends Error{}const E=["support.google.com/youtube/?p=age_restrictions","youtube.com/t/community_guidelines"];D.getBasicInfo=async(b,a)=>{const d=Object.assign({},f.defaultOptions,a.requestOptions);a.requestOptions=Object.assign({},a.requestOptions,{});a.requestOptions.headers=Object.assign({},{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.101 Safari/537.36"},
a.requestOptions.headers);a=await x([b,a],g=>{var q=w.playError(g.player_response,["ERROR"],h);let K=u(g.player_response);if(q||K)throw q||K;if(q=g&&g.player_response)(q=g.player_response.streamingData)||(q=(q=g.player_response.playabilityStatus)&&"UNPLAYABLE"===q.status&&q.errorScreen&&q.errorScreen.playerLegacyDesktopYpcOfferRenderer),q||(q=(g=g.player_response.playabilityStatus)&&"LIVE_STREAM_OFFLINE"===g.status);return q},d,[S,T,O]);Object.assign(a,{formats:V(a.player_response),related_videos:t.getRelatedVideos(a)});
const c=t.getMedia(a);b={author:t.getAuthor(a),media:c,likes:t.getLikes(a),dislikes:t.getDislikes(a),age_restricted:!!(c&&c.notice_url&&E.some(g=>c.notice_url.includes(g))),video_url:"https://www.youtube.com/watch?v="+b,storyboards:t.getStoryboards(a),chapters:t.getChapters(a)};a.videoDetails=t.cleanVideoDetails(Object.assign({},a.player_response&&a.player_response.microformat&&a.player_response.microformat.playerMicroformatRenderer,a.player_response&&a.player_response.videoDetails,b),a);return a};
const u=b=>(b=b&&b.playabilityStatus)&&"LOGIN_REQUIRED"===b.status&&b.messages&&b.messages.filter(a=>/This is a private video/.test(a)).length?new h(b.reason||b.messages&&b.messages[0]):null,B=(b,a)=>`${"https://www.youtube.com/watch?v="+b}&hl=${a.lang||"en"}`,m=(b,a)=>{const d=B(b,a);return D.watchPageCache.getOrSet(d,()=>w.exposedMiniget(d,a).text())},A=b=>(b=/<script\s+src="([^"]+)"(?:\s+type="text\/javascript")?\s+name="player_ias\/base"\s*>|"jsUrl":"([^"]+)"/.exec(b))?b[1]||b[2]:null,p=(b,a,
d,c)=>D.cookieCache.getOrSet(d,async()=>{let g=(await m(b,a)).match(/(["'])ID_TOKEN\1[:,]\s?"([^"]+)"/);if(!g&&c)throw new h("Cookie header used in request, but unable to find YouTube identity token");return g&&g[2]}),x=async(b,a,d,c)=>{let g;for(let q of c)try{const K=await H(q,b.concat([g]),d);K.player_response&&(K.player_response.videoDetails=G(g&&g.player_response&&g.player_response.videoDetails,K.player_response.videoDetails),K.player_response=G(g&&g.player_response,K.player_response));g=G(g,
K);if(a(g,!1))break}catch(K){if(K instanceof h||q===c[c.length-1])throw K;}return g},G=(b,a)=>{if(!b||!a)return b||a;for(let [d,c]of Object.entries(a))null!==c&&void 0!==c&&(b[d]=c);return b},H=async(b,a,d)=>{let c=0,g;for(;c<=d.maxRetries;)try{g=await b(...a);break}catch(q){if(q instanceof h||q instanceof f.MinigetError&&500>q.statusCode||c>=d.maxRetries)throw q;let K=Math.min(++c*d.backoff.inc,d.backoff.max);await new Promise(R=>e(R,K))}return g},L=/^[)\]}'\s]+/,I=(b,a,d)=>{if(d&&"object"!==typeof d)try{return d=
d.replace(L,""),JSON.parse(d)}catch(c){throw Error(`Error parsing ${a} in ${b}: ${c.message}`);}else return d},N=(b,a,d,c,g,q)=>{d=w.between(d,c,g);if(!d)throw Error(`Could not find ${a} in ${b}`);return I(b,a,w.cutAfterJSON(`${q}${d}`))},M=(b,a)=>I(b,"player_response",a&&(a.args&&a.args.player_response||a.player_response||a.playerResponse||a.embedded_player_response)),T=async(b,a)=>{const d=Object.assign({headers:{}},a.requestOptions);var c=d.headers.Cookie||d.headers.cookie;d.headers=Object.assign({"x-youtube-client-name":"1",
"x-youtube-client-version":l,"x-youtube-identity-token":D.cookieCache.get(c||"browser")||""},d.headers);var g=async(q,K)=>{d.headers["x-youtube-identity-token"]||(d.headers["x-youtube-identity-token"]=await p(b,a,q,K))};c&&await g(c,!0);c=`${B(b,a)}&pbj=1`;c=await w.exposedMiniget(c,a,d).text();c=I("watch.json","body",c);"now"===c.reload&&await g("browser",!1);if("now"===c.reload||!Array.isArray(c))throw Error("Unable to retrieve video metadata in watch.json");g=c.reduce((q,K)=>Object.assign(K,q),
{});g.player_response=M("watch.json",g);g.html5player=g.player&&g.player.assets&&g.player.assets.js;return g},S=async(b,a)=>{b=await m(b,a);a={page:"watch"};try{l=w.between(b,'{"key":"cver","value":"','"}'),a.player_response=N("watch.html","player_response",b,/\bytInitialPlayerResponse\s*=\s*\{/i,"\x3c/script>","{")}catch(d){let c=N("watch.html","player_response",b,/\bytplayer\.config\s*=\s*{/,"\x3c/script>","{");a.player_response=M("watch.html",c)}a.response=N("watch.html","response",b,/\bytInitialData("\])?\s*=\s*\{/i,
"\x3c/script>","{");a.html5player=A(b);return a},O=async(b,a)=>{const d=new URL("https://www.youtube.com/get_video_info");d.searchParams.set("video_id",b);d.searchParams.set("c","TVHTML5");d.searchParams.set("cver",`7${l.substr(1)}`);d.searchParams.set("eurl","https://youtube.googleapis.com/v/"+b);d.searchParams.set("ps","default");d.searchParams.set("gl","US");d.searchParams.set("hl",a.lang||"en");d.searchParams.set("html5","1");b=await w.exposedMiniget(d.toString(),a).text();b=C.parse(b);b.player_response=
M("get_video_info",b);return b},V=b=>{let a=[];b&&b.streamingData&&(a=a.concat(b.streamingData.formats||[]).concat(b.streamingData.adaptiveFormats||[]));return a};D.getInfo=async(b,a)=>{let d=await D.getBasicInfo(b,a);const c=d.player_response&&d.player_response.streamingData&&(d.player_response.streamingData.dashManifestUrl||d.player_response.streamingData.hlsManifestUrl);let g=[];if(d.formats.length){var q;(q=d.html5player||A(await m(b,a)))||(b=w.exposedMiniget(`${"https://www.youtube.com/embed/"+
b}?hl=${a.lang||"en"}`,a).text(),q=A(await b));d.html5player=q;if(!d.html5player)throw Error("Unable to find html5player file");b=(new URL(d.html5player,"https://www.youtube.com/watch?v=")).toString();g.push(k.decipherFormats(d.formats,b,a))}c&&d.player_response.streamingData.dashManifestUrl&&g.push(W(d.player_response.streamingData.dashManifestUrl,a));c&&d.player_response.streamingData.hlsManifestUrl&&g.push(U(d.player_response.streamingData.hlsManifestUrl,a));a=await Promise.all(g);d.formats=Object.values(Object.assign({},
...a));d.formats=d.formats.map(r.addFormatMeta);d.formats.sort(r.sortFormats);d.full=!0;return d};const W=(b,a)=>new Promise((d,c)=>{let g={};const q=n.parser(!1);q.onerror=c;let K;q.onopentag=P=>{if("ADAPTATIONSET"===P.name)K=P.attributes;else if("REPRESENTATION"===P.name){const F=parseInt(P.attributes.ID);isNaN(F)||(g[b]=Object.assign({itag:F,url:b,bitrate:parseInt(P.attributes.BANDWIDTH),mimeType:`${K.MIMETYPE}; codecs="${P.attributes.CODECS}"`},P.attributes.HEIGHT?{width:parseInt(P.attributes.WIDTH),
height:parseInt(P.attributes.HEIGHT),fps:parseInt(P.attributes.FRAMERATE)}:{audioSampleRate:P.attributes.AUDIOSAMPLINGRATE}))}};q.onend=()=>{d(g)};const R=w.exposedMiniget((new URL(b,"https://www.youtube.com/watch?v=")).toString(),a);R.setEncoding("utf8");R.on("error",c);R.on("data",P=>{q.write(P)});R.on("end",q.close.bind(q))}),U=async(b,a)=>{b=new URL(b,"https://www.youtube.com/watch?v=");let d={};(await w.exposedMiniget(b.toString(),a).text()).split("\n").filter(c=>/^https?:\/\//.test(c)).forEach(c=>
{const g=parseInt(c.match(/\/itag\/(\d+)\//)[1]);d[c]={itag:g,url:c}});return d};for(let b of["getBasicInfo","getInfo"]){const a=D[b];D[b]=async(d,c={})=>{w.checkForUpdates();let g=await v.getVideoID(d);d=[b,g,c.lang].join("-");return D.cache.getOrSet(d,()=>a(g,c))}}D.validateID=v.validateID;D.validateURL=v.validateURL;D.getURLVideoID=v.getURLVideoID;D.getVideoID=v.getVideoID},{"./cache":77,"./format-utils":78,"./info-extras":81,"./sig":83,"./url-utils":84,"./utils":85,miniget:26,querystring:31,sax:35,
timers:71}],83:[function(y,J,D){const C=y("querystring");J=y("./cache");const n=y("./utils"),f=y("vm");D.cache=new J;D.getFunctions=(w,e)=>D.cache.getOrSet(w,async()=>{var r=await n.exposedMiniget(w,e).text();r=D.extractFunctions(r);if(!r||!r.length)throw Error("Could not extract functions");D.cache.set(w,r);return r});D.extractFunctions=w=>{const e=[];(()=>{const r=n.between(w,'a.set("alr","yes");c&&(c=',"(decodeURIC");if(r&&r.length){var v=`${r}=function(a)`,t=w.indexOf(v);if(0<=t){t=w.slice(t+
v.length);v=`var ${v}${n.cutAfterJSON(t)}`;if(t=n.between(v,'a=a.split("");',".")){var k=`var ${t}={`,l=w.indexOf(k);0>l?t="":(k=w.slice(l+k.length-1),t=`var ${t}=${n.cutAfterJSON(k)}`)}else t="";v=`${t};${v};${r}(sig);`;e.push(v)}}})();(()=>{var r=n.between(w,'&&(b=a.get("n"))&&(b=',"(b)");r.includes("[")&&(r=n.between(w,`${r.split("[")[0]}=[`,"]"));if(r&&r.length){const t=`${r}=function(a)`;var v=w.indexOf(t);0<=v&&(v=w.slice(v+t.length),r=`var ${t}${n.cutAfterJSON(v)};${r}(ncode);`,e.push(r))}})();
return e};D.setDownloadURL=(w,e,r)=>{const v=l=>{l=C.parse(l);if(!l.s||!e)return l.url;const h=new URL(decodeURIComponent(l.url));h.searchParams.set(l.sp?l.sp:"signature",e.runInNewContext({sig:decodeURIComponent(l.s)}));return h.toString()},t=l=>{const h=new URL(decodeURIComponent(l)),E=h.searchParams.get("n");if(!E||!r)return l;h.searchParams.set("n",r.runInNewContext({ncode:E}));return h.toString()},k=w.url||w.signatureCipher||w.cipher;w.url=w.url?t(k):t(v(k));delete w.signatureCipher;delete w.cipher};
D.decipherFormats=async(w,e,r)=>{let v={};e=await D.getFunctions(e,r);const t=e.length?new f.Script(e[0]):null,k=1<e.length?new f.Script(e[1]):null;w.forEach(l=>{D.setDownloadURL(l,t,k);v[l.url]=l});return v}},{"./cache":77,"./utils":85,querystring:31,vm:75}],84:[function(y,J,D){const C=new Set(["youtube.com","www.youtube.com","m.youtube.com","music.youtube.com","gaming.youtube.com"]),n=/^https?:\/\/(youtu\.be\/|(www\.)?youtube\.com\/(embed|v|shorts)\/)/;D.getURLVideoID=e=>{const r=new URL(e);var v=
r.searchParams.get("v");if(n.test(e)&&!v)v=r.pathname.split("/"),v="youtu.be"===r.host?v[1]:v[2];else if(r.hostname&&!C.has(r.hostname))throw Error("Not a YouTube domain");if(!v)throw Error(`No video id found: ${e}`);v=v.substring(0,11);if(!D.validateID(v))throw TypeError(`Video id (${v}) does not match expected `+`format (${w.toString()})`);return v};const f=/^https?:\/\//;D.getVideoID=e=>{if(D.validateID(e))return e;if(f.test(e))return D.getURLVideoID(e);throw Error(`No video id found: ${e}`);};
const w=/^[a-zA-Z0-9-_]{11}$/;D.validateID=e=>w.test(e);D.validateURL=e=>{try{return D.getURLVideoID(e),!0}catch(r){return!1}}},{}],85:[function(y,J,D){(function(C){(function(){const n=y("miniget");D.between=(w,e,r)=>{let v;if(e instanceof RegExp){e=w.match(e);if(!e)return"";v=e.index+e[0].length}else{v=w.indexOf(e);if(-1===v)return"";v+=e.length}w=w.slice(v);v=w.indexOf(r);return-1===v?"":w=w.slice(0,v)};D.parseAbbreviatedNumber=w=>{if(w=w.replace(",",".").replace(" ","").match(/([\d,.]+)([MK]?)/)){let [,
e,r]=w;e=parseFloat(e);return Math.round("M"===r?1E6*e:"K"===r?1E3*e:e)}return null};D.cutAfterJSON=w=>{let e,r;"["===w[0]?(e="[",r="]"):"{"===w[0]&&(e="{",r="}");if(!e)throw Error(`Can't cut unsupported JSON (need to begin with [ or { ) but got: ${w[0]}`);let v=!1,t=!1,k=0,l;for(l=0;l<w.length;l++)if('"'!==w[l]||t){if(t="\\"===w[l]&&!t,!v&&(w[l]===e?k++:w[l]===r&&k--,0===k))return w.substr(0,l+1)}else v=!v;throw Error("Can't cut unsupported JSON (no matching closing bracket found)");};D.playError=
(w,e,r=Error)=>(w=w&&w.playabilityStatus)&&e.includes(w.status)?new r(w.reason||w.messages&&w.messages[0]):null;D.exposedMiniget=(w,e={},r)=>{w=n(w,r||e.requestOptions);"function"===typeof e.requestCallback&&e.requestCallback(w);return w};D.deprecate=(w,e,r,v,t)=>{Object.defineProperty(w,e,{get:()=>{console.warn(`\`${v}\` will be removed in a near future release, `+`use \`${t}\` instead.`);return r}})};const f=y("../package.json");D.lastUpdateCheck=0;D.checkForUpdates=()=>!C.env.YTDL_NO_UPDATE&&!f.version.startsWith("0.0.0-")&&
432E5<=Date.now()-D.lastUpdateCheck?(D.lastUpdateCheck=Date.now(),n("https://api.github.com/repos/fent/node-ytdl-core/releases/latest",{headers:{"User-Agent":"ytdl-core"}}).text().then(w=>{JSON.parse(w).tag_name!==`v${f.version}`&&console.warn('\u001b[33mWARNING:\u001b[0m ytdl-core is out of date! Update with "npm install ytdl-core@latest".')},w=>{console.warn("Error checking for updates:",w.message);console.warn("You can disable this check by setting the `YTDL_NO_UPDATE` env variable.")})):null}).call(this)}).call(this,
y("_process"))},{"../package.json":86,_process:27,miniget:26}],86:[function(y,J,D){J.exports={name:"ytdl-core",description:"YouTube video downloader in pure javascript.",keywords:["youtube","video","download"],version:"4.10.1",repository:{type:"git",url:"git://github.com/fent/node-ytdl-core.git"},author:"fent <fentbox@gmail.com> (https://github.com/fent)",contributors:["Tobias Kutscha (https://github.com/TimeForANinja)","Andrew Kelley (https://github.com/andrewrk)","Mauricio Allende (https://github.com/mallendeo)",
"Rodrigo Altamirano (https://github.com/raltamirano)","Jim Buck (https://github.com/JimmyBoh)"],main:"./lib/index.js",types:"./typings/index.d.ts",files:["lib","typings"],scripts:{test:"nyc --reporter=lcov --reporter=text-summary npm run test:unit","test:unit":"mocha --ignore test/irl-test.js test/*-test.js --timeout 4000","test:irl":"mocha --timeout 16000 test/irl-test.js",lint:"eslint ./","lint:fix":"eslint --fix ./","lint:typings":"tslint typings/index.d.ts","lint:typings:fix":"tslint --fix typings/index.d.ts"},
dependencies:{m3u8stream:"^0.8.6",miniget:"^4.0.0",sax:"^1.1.3"},devDependencies:{"@types/node":"^13.1.0","assert-diff":"^3.0.1",dtslint:"^3.6.14",eslint:"^6.8.0",mocha:"^7.0.0","muk-require":"^1.2.0",nock:"^13.0.4",nyc:"^15.0.0",sinon:"^9.0.0","stream-equal":"~1.1.0",typescript:"^3.9.7"},engines:{node:">=10"},license:"MIT"}},{}]},{},[1])(1)});
