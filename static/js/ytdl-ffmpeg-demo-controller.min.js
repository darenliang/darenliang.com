(()=>{let d=!1,m=!1,g=[],h=[];const n=document.getElementById("url"),f=document.getElementById("output"),p=document.getElementById("formats"),k=document.getElementById("log"),l=a=>{a instanceof TypeError?(console.log("[error] YouTube proxy is currently having issues, please try again later."),alert("YouTube proxy is currently having issues, please try again later.")):(console.log(`[error] ${a}`),alert("An error has occurred, please check the console output or DevTools."))};(()=>{const a=console.log;
console.log=b=>{k.value="object"==typeof b?k.value+`${JSON.stringify(b)}\n`:k.value+`${b}\n`;k.scrollTop=k.scrollHeight;a(b)}})();window.getFormats=async()=>{if(m)alert("Currently getting formats...");else{m=!0;try{var a=await script.getInfo(n.value)}catch(c){l(c);m=!1;return}a=a.formats;g=[];h=[];for(var b of a)b.hasVideo?g.push(b):h.push(b);b="<p>Video Formats</p>";for(const [c,e]of g.entries())b+=`<input type="radio" id="video-${c}" name="video" value="${c}"><label for="video-${c}">${e.qualityLabel} - ${e.fps} fps - ${e.mimeType}${e.hasAudio?
"":" - video only"}</label><br>`;b+="<p>Audio Formats</p>";for(const [c,e]of h.entries())b+=`<input type="radio" id="audio-${c}" name="audio" value="${c}"><label for="audio-${c}">${e.audioBitrate} Kbps - ${e.mimeType}</label><br>`;p.innerHTML=b+'<br><button onclick="getMedia()">Convert</button>';m=!1}};window.getMedia=async()=>{if(d)alert("Currently processing files...");else{d=!0;var a=new FormData(document.forms.formats),b=a.get("video");a=a.get("audio");try{if(b)if(a){const c=await script.getVideoBuffer(g[parseInt(b)],
h[parseInt(a)]);f.innerHTML='<br><video id="player" width="100%" controls></video><br>';document.getElementById("player").src=URL.createObjectURL(new Blob([c],{type:"video/mp4"}))}else{const c=await script.getVideoBuffer(g[parseInt(b)]);f.innerHTML='<br><video id="player" width="100%" controls></video><br>';document.getElementById("player").src=URL.createObjectURL(new Blob([c],{type:"video/mp4"}))}else if(a){const c=await script.getAudioBuffer(h[parseInt(a)]);f.innerHTML='<br><audio id="player" style="width: 100%" controls></audio><br>';
document.getElementById("player").src=URL.createObjectURL(new Blob([c],{type:"audio/mp3"}))}else alert("No format was selected...")}catch(c){l(c)}d=!1}};window.getFastVideo=async()=>{if(d)alert("Currently processing files...");else{d=!0;try{const a=await script.getFastVideoBuffer(n.value);f.innerHTML='<br><video id="player" width="100%" controls></video><br>';document.getElementById("player").src=URL.createObjectURL(new Blob([a],{type:"video/mp4"}))}catch(a){l(a)}d=!1}};window.getBestVideo=async()=>
{if(d)alert("Currently processing files...");else{d=!0;try{const a=await script.getBestVideoBuffer(n.value);f.innerHTML='<br><video id="player" width="100%" controls></video><br>';document.getElementById("player").src=URL.createObjectURL(new Blob([a],{type:"video/mp4"}))}catch(a){l(a)}d=!1}};window.getBestAudio=async()=>{if(d)alert("Currently processing files...");else{d=!0;try{const a=await script.getBestAudioBuffer(n.value);f.innerHTML='<br><audio id="player" style="width: 100%" controls></audio><br>';
document.getElementById("player").src=URL.createObjectURL(new Blob([a],{type:"audio/mp3"}))}catch(a){l(a)}d=!1}}})();
